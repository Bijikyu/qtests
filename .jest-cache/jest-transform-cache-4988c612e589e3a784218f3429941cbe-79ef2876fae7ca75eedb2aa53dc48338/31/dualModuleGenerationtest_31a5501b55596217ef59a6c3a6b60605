f629a78db713ddd4b863616036bddf55
/**
 * Test qtests' ability to generate tests for both CommonJS and ES modules
 * Verifies the enhanced export detection and module-appropriate test generation
 */

const fs = require('fs');
const path = require('path');
const {
  TestGenerator
} = require('../lib/testGenerator');
describe('qtests Dual Module System Test Generation', () => {
  let tempDir;
  let generator;
  beforeEach(() => {
    // Create temporary directory for test files
    tempDir = path.join(__dirname, 'temp_module_tests');
    if (!fs.existsSync(tempDir)) {
      fs.mkdirSync(tempDir, {
        recursive: true
      });
    }
    generator = new TestGenerator({
      SRC_DIR: tempDir,
      TEST_DIR: path.join(tempDir, 'tests')
    });
  });
  afterEach(() => {
    // Cleanup temporary files
    if (fs.existsSync(tempDir)) {
      fs.rmSync(tempDir, {
        recursive: true,
        force: true
      });
    }
  });
  describe('CommonJS Export Detection', () => {
    it('should detect module.exports single function', () => {
      const commonJSCode = `
function calculateSum(a, b) {
  return a + b;
}

module.exports = calculateSum;
`;
      const exports = generator.extractExports(commonJSCode);
      expect(exports).toContain('calculateSum');
      expect(exports.length).toBe(1);
    });
    it('should detect module.exports object with multiple exports', () => {
      const commonJSCode = `
function add(a, b) { return a + b; }
function subtract(a, b) { return a - b; }

class Calculator {
  constructor() {}
}

module.exports = {
  add,
  subtract,
  Calculator
};
`;
      const exports = generator.extractExports(commonJSCode);
      expect(exports).toContain('add');
      expect(exports).toContain('subtract');
      expect(exports).toContain('Calculator');
      expect(exports.length).toBe(3);
    });
    it('should detect exports.property assignments', () => {
      const commonJSCode = `
function helper1() {}
function helper2() {}

exports.helper1 = helper1;
exports.helper2 = helper2;
`;
      const exports = generator.extractExports(commonJSCode);
      expect(exports).toContain('helper1');
      expect(exports).toContain('helper2');
      expect(exports.length).toBe(2);
    });
    it('should detect module.exports.property assignments', () => {
      const commonJSCode = `
function utilityA() {}
function utilityB() {}

module.exports.utilityA = utilityA;
module.exports.utilityB = utilityB;
`;
      const exports = generator.extractExports(commonJSCode);
      expect(exports).toContain('utilityA');
      expect(exports).toContain('utilityB');
      expect(exports.length).toBe(2);
    });
  });
  describe('ES Module Export Detection', () => {
    it('should detect export const declarations', () => {
      const esModuleCode = `
export const API_URL = 'https://api.example.com';
export const MAX_RETRIES = 3;
`;
      const exports = generator.extractExports(esModuleCode);
      expect(exports).toContain('API_URL');
      expect(exports).toContain('MAX_RETRIES');
      expect(exports.length).toBe(2);
    });
    it('should detect export function declarations', () => {
      const esModuleCode = `
export function processData(data) {
  return data.map(item => item.value);
}

export function validateInput(input) {
  return typeof input === 'string';
}
`;
      const exports = generator.extractExports(esModuleCode);
      expect(exports).toContain('processData');
      expect(exports).toContain('validateInput');
      expect(exports.length).toBe(2);
    });
    it('should detect export class declarations', () => {
      const esModuleCode = `
export class DataProcessor {
  constructor() {}
}

export class ValidationEngine {
  validate() {}
}
`;
      const exports = generator.extractExports(esModuleCode);
      expect(exports).toContain('DataProcessor');
      expect(exports).toContain('ValidationEngine');
      expect(exports.length).toBe(2);
    });
  });
  describe('Mixed Module Pattern Detection', () => {
    it('should handle files with both ES and CommonJS patterns', () => {
      const mixedCode = `
// ES module style
export function esFunction() {
  return 'es';
}

// CommonJS style
function cjsFunction() {
  return 'cjs';
}

module.exports.cjsFunction = cjsFunction;
`;
      const exports = generator.extractExports(mixedCode);
      expect(exports).toContain('esFunction');
      expect(exports).toContain('cjsFunction');
      expect(exports.length).toBe(2);
    });
  });
  describe('Import Detection (CommonJS vs ES Modules)', () => {
    it('should detect CommonJS require statements', () => {
      const commonJSCode = `
const fs = require('fs');
const path = require('path');
const axios = require('axios');
`;
      const imports = generator.getUsedModules(commonJSCode);
      expect(imports).toContain('fs');
      expect(imports).toContain('path');
      expect(imports).toContain('axios');
    });
    it('should detect ES module import statements', () => {
      const esModuleCode = `
import fs from 'fs';
import { resolve } from 'path';
import axios from 'axios';
`;
      const imports = generator.getUsedModules(esModuleCode);
      expect(imports).toContain('fs');
      expect(imports).toContain('path');
      expect(imports).toContain('axios');
    });
    it('should filter out relative imports', () => {
      const codeWithRelative = `
const fs = require('fs');
const local = require('./localFile');
const parent = require('../parentFile');
import axios from 'axios';
import { util } from './utils';
`;
      const imports = generator.getUsedModules(codeWithRelative);
      expect(imports).toContain('fs');
      expect(imports).toContain('axios');
      expect(imports).not.toContain('./localFile');
      expect(imports).not.toContain('../parentFile');
      expect(imports).not.toContain('./utils');
    });
  });
  describe('Test Generation for Different Module Systems', () => {
    it('should generate CommonJS-style tests for CommonJS projects', () => {
      // Mock CommonJS project (no "type": "module" in package.json)
      generator.isESModule = false;
      const commonJSFile = path.join(tempDir, 'mathUtils.js');
      const commonJSCode = `
function add(a, b) {
  return a + b;
}

module.exports = { add };
`;
      fs.writeFileSync(commonJSFile, commonJSCode);
      const exports = generator.extractExports(commonJSCode);
      const testContent = generator.createUnitTest(commonJSFile, exports, false, []);

      // Should use require syntax
      expect(testContent).toContain('const mod = require(');
      expect(testContent).not.toContain('import');
      expect(testContent).toContain("describe('mathUtils.js'");
      expect(testContent).toContain("test('add works'");
    });
    it('should generate ES module-style tests for ES module projects', () => {
      // Mock ES module project
      generator.isESModule = true;
      const esModuleFile = path.join(tempDir, 'dataProcessor.js');
      const esModuleCode = `
export function process(data) {
  return data.filter(Boolean);
}
`;
      fs.writeFileSync(esModuleFile, esModuleCode);
      const exports = generator.extractExports(esModuleCode);
      const testContent = generator.createUnitTest(esModuleFile, exports, false, []);

      // Should use import syntax
      expect(testContent).toContain('import * as mod from');
      expect(testContent).not.toContain('require(');
      expect(testContent).toContain("describe('dataProcessor.js'");
      expect(testContent).toContain("test('process works'");
    });
  });
  describe('Real File Analysis and Test Generation', () => {
    it('should analyze and generate tests for CommonJS files', () => {
      const commonJSFile = path.join(tempDir, 'realCommonJS.js');
      const commonJSCode = `
const fs = require('fs');

function readConfig(filename) {
  return JSON.parse(fs.readFileSync(filename, 'utf8'));
}

class ConfigManager {
  constructor() {
    this.config = {};
  }
  
  load(file) {
    this.config = readConfig(file);
  }
}

module.exports = {
  readConfig,
  ConfigManager
};
`;
      fs.writeFileSync(commonJSFile, commonJSCode);

      // Analyze the file
      generator.analyze(commonJSFile);

      // Check if test was generated
      const expectedTestPath = generator.getRelativeTestPath(commonJSFile, 'unit');
      expect(generator.scanned.length).toBeGreaterThan(0);
      expect(generator.scanned[0].type).toBe('unit');
    });
    it('should analyze and generate tests for ES module files', () => {
      const esModuleFile = path.join(tempDir, 'realESModule.js');
      const esModuleCode = `
export function validateEmail(email) {
  return email.includes('@');
}

export class EmailValidator {
  constructor() {}
  
  isValid(email) {
    return validateEmail(email);
  }
}
`;
      fs.writeFileSync(esModuleFile, esModuleCode);

      // Analyze the file
      generator.analyze(esModuleFile);

      // Check if test was generated
      expect(generator.scanned.length).toBeGreaterThan(0);
      expect(generator.scanned[0].type).toBe('unit');
    });
  });
  describe('Edge Cases and Error Handling', () => {
    it('should handle files with no exports gracefully', () => {
      const noExportsCode = `
// Just some utility functions that aren't exported
function internal() {}
const PRIVATE_CONST = 'private';
`;
      const exports = generator.extractExports(noExportsCode);
      expect(exports).toEqual([]);
    });
    it('should handle malformed export patterns', () => {
      const malformedCode = `
module.exports = 
function incomplete() {}
exports. = 'invalid';
export 
`;
      const exports = generator.extractExports(malformedCode);
      // Should not crash and return valid exports only
      expect(Array.isArray(exports)).toBe(true);
    });
    it('should handle files with comments containing export-like patterns', () => {
      const commentCode = `
// This is not an export: module.exports = fake
/* 
 * export function commentedOut() {}
 */
function realFunction() {}
module.exports = realFunction;
`;
      const exports = generator.extractExports(commentCode);
      expect(exports).toContain('realFunction');
      expect(exports).not.toContain('fake');
      expect(exports).not.toContain('commentedOut');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwiVGVzdEdlbmVyYXRvciIsImRlc2NyaWJlIiwidGVtcERpciIsImdlbmVyYXRvciIsImJlZm9yZUVhY2giLCJqb2luIiwiX19kaXJuYW1lIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsIlNSQ19ESVIiLCJURVNUX0RJUiIsImFmdGVyRWFjaCIsInJtU3luYyIsImZvcmNlIiwiaXQiLCJjb21tb25KU0NvZGUiLCJleHBvcnRzIiwiZXh0cmFjdEV4cG9ydHMiLCJleHBlY3QiLCJ0b0NvbnRhaW4iLCJsZW5ndGgiLCJ0b0JlIiwiZXNNb2R1bGVDb2RlIiwibWl4ZWRDb2RlIiwiaW1wb3J0cyIsImdldFVzZWRNb2R1bGVzIiwiY29kZVdpdGhSZWxhdGl2ZSIsIm5vdCIsImlzRVNNb2R1bGUiLCJjb21tb25KU0ZpbGUiLCJ3cml0ZUZpbGVTeW5jIiwidGVzdENvbnRlbnQiLCJjcmVhdGVVbml0VGVzdCIsImVzTW9kdWxlRmlsZSIsImFuYWx5emUiLCJleHBlY3RlZFRlc3RQYXRoIiwiZ2V0UmVsYXRpdmVUZXN0UGF0aCIsInNjYW5uZWQiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0eXBlIiwibm9FeHBvcnRzQ29kZSIsInRvRXF1YWwiLCJtYWxmb3JtZWRDb2RlIiwiQXJyYXkiLCJpc0FycmF5IiwiY29tbWVudENvZGUiXSwic291cmNlcyI6WyJkdWFsTW9kdWxlR2VuZXJhdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBxdGVzdHMnIGFiaWxpdHkgdG8gZ2VuZXJhdGUgdGVzdHMgZm9yIGJvdGggQ29tbW9uSlMgYW5kIEVTIG1vZHVsZXNcbiAqIFZlcmlmaWVzIHRoZSBlbmhhbmNlZCBleHBvcnQgZGV0ZWN0aW9uIGFuZCBtb2R1bGUtYXBwcm9wcmlhdGUgdGVzdCBnZW5lcmF0aW9uXG4gKi9cblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IHsgVGVzdEdlbmVyYXRvciB9ID0gcmVxdWlyZSgnLi4vbGliL3Rlc3RHZW5lcmF0b3InKTtcblxuZGVzY3JpYmUoJ3F0ZXN0cyBEdWFsIE1vZHVsZSBTeXN0ZW0gVGVzdCBHZW5lcmF0aW9uJywgKCkgPT4ge1xuICBsZXQgdGVtcERpcjtcbiAgbGV0IGdlbmVyYXRvcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDcmVhdGUgdGVtcG9yYXJ5IGRpcmVjdG9yeSBmb3IgdGVzdCBmaWxlc1xuICAgIHRlbXBEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAndGVtcF9tb2R1bGVfdGVzdHMnKTtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmModGVtcERpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyh0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgXG4gICAgZ2VuZXJhdG9yID0gbmV3IFRlc3RHZW5lcmF0b3Ioe1xuICAgICAgU1JDX0RJUjogdGVtcERpcixcbiAgICAgIFRFU1RfRElSOiBwYXRoLmpvaW4odGVtcERpciwgJ3Rlc3RzJylcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhbnVwIHRlbXBvcmFyeSBmaWxlc1xuICAgIGlmIChmcy5leGlzdHNTeW5jKHRlbXBEaXIpKSB7XG4gICAgICBmcy5ybVN5bmModGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbW1vbkpTIEV4cG9ydCBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgbW9kdWxlLmV4cG9ydHMgc2luZ2xlIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbW9uSlNDb2RlID0gYFxuZnVuY3Rpb24gY2FsY3VsYXRlU3VtKGEsIGIpIHtcbiAgcmV0dXJuIGEgKyBiO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbGN1bGF0ZVN1bTtcbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGNvbW1vbkpTQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdjYWxjdWxhdGVTdW0nKTtcbiAgICAgIGV4cGVjdChleHBvcnRzLmxlbmd0aCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IG1vZHVsZS5leHBvcnRzIG9iamVjdCB3aXRoIG11bHRpcGxlIGV4cG9ydHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21tb25KU0NvZGUgPSBgXG5mdW5jdGlvbiBhZGQoYSwgYikgeyByZXR1cm4gYSArIGI7IH1cbmZ1bmN0aW9uIHN1YnRyYWN0KGEsIGIpIHsgcmV0dXJuIGEgLSBiOyB9XG5cbmNsYXNzIENhbGN1bGF0b3Ige1xuICBjb25zdHJ1Y3RvcigpIHt9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQsXG4gIHN1YnRyYWN0LFxuICBDYWxjdWxhdG9yXG59O1xuYDtcbiAgICAgIGNvbnN0IGV4cG9ydHMgPSBnZW5lcmF0b3IuZXh0cmFjdEV4cG9ydHMoY29tbW9uSlNDb2RlKTtcbiAgICAgIGV4cGVjdChleHBvcnRzKS50b0NvbnRhaW4oJ2FkZCcpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMpLnRvQ29udGFpbignc3VidHJhY3QnKTtcbiAgICAgIGV4cGVjdChleHBvcnRzKS50b0NvbnRhaW4oJ0NhbGN1bGF0b3InKTtcbiAgICAgIGV4cGVjdChleHBvcnRzLmxlbmd0aCkudG9CZSgzKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IGV4cG9ydHMucHJvcGVydHkgYXNzaWdubWVudHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21tb25KU0NvZGUgPSBgXG5mdW5jdGlvbiBoZWxwZXIxKCkge31cbmZ1bmN0aW9uIGhlbHBlcjIoKSB7fVxuXG5leHBvcnRzLmhlbHBlcjEgPSBoZWxwZXIxO1xuZXhwb3J0cy5oZWxwZXIyID0gaGVscGVyMjtcbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGNvbW1vbkpTQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdoZWxwZXIxJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdoZWxwZXIyJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRldGVjdCBtb2R1bGUuZXhwb3J0cy5wcm9wZXJ0eSBhc3NpZ25tZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW1vbkpTQ29kZSA9IGBcbmZ1bmN0aW9uIHV0aWxpdHlBKCkge31cbmZ1bmN0aW9uIHV0aWxpdHlCKCkge31cblxubW9kdWxlLmV4cG9ydHMudXRpbGl0eUEgPSB1dGlsaXR5QTtcbm1vZHVsZS5leHBvcnRzLnV0aWxpdHlCID0gdXRpbGl0eUI7XG5gO1xuICAgICAgY29uc3QgZXhwb3J0cyA9IGdlbmVyYXRvci5leHRyYWN0RXhwb3J0cyhjb21tb25KU0NvZGUpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMpLnRvQ29udGFpbigndXRpbGl0eUEnKTtcbiAgICAgIGV4cGVjdChleHBvcnRzKS50b0NvbnRhaW4oJ3V0aWxpdHlCJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFUyBNb2R1bGUgRXhwb3J0IERldGVjdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRldGVjdCBleHBvcnQgY29uc3QgZGVjbGFyYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgZXNNb2R1bGVDb2RlID0gYFxuZXhwb3J0IGNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nO1xuZXhwb3J0IGNvbnN0IE1BWF9SRVRSSUVTID0gMztcbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGVzTW9kdWxlQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdBUElfVVJMJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdNQVhfUkVUUklFUycpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMubGVuZ3RoKS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgZXhwb3J0IGZ1bmN0aW9uIGRlY2xhcmF0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVzTW9kdWxlQ29kZSA9IGBcbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XG4gIHJldHVybiBkYXRhLm1hcChpdGVtID0+IGl0ZW0udmFsdWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVJbnB1dChpbnB1dCkge1xuICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJztcbn1cbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGVzTW9kdWxlQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdwcm9jZXNzRGF0YScpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMpLnRvQ29udGFpbigndmFsaWRhdGVJbnB1dCcpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMubGVuZ3RoKS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgZXhwb3J0IGNsYXNzIGRlY2xhcmF0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVzTW9kdWxlQ29kZSA9IGBcbmV4cG9ydCBjbGFzcyBEYXRhUHJvY2Vzc29yIHtcbiAgY29uc3RydWN0b3IoKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVuZ2luZSB7XG4gIHZhbGlkYXRlKCkge31cbn1cbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGVzTW9kdWxlQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdEYXRhUHJvY2Vzc29yJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdWYWxpZGF0aW9uRW5naW5lJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNaXhlZCBNb2R1bGUgUGF0dGVybiBEZXRlY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZXMgd2l0aCBib3RoIEVTIGFuZCBDb21tb25KUyBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1peGVkQ29kZSA9IGBcbi8vIEVTIG1vZHVsZSBzdHlsZVxuZXhwb3J0IGZ1bmN0aW9uIGVzRnVuY3Rpb24oKSB7XG4gIHJldHVybiAnZXMnO1xufVxuXG4vLyBDb21tb25KUyBzdHlsZVxuZnVuY3Rpb24gY2pzRnVuY3Rpb24oKSB7XG4gIHJldHVybiAnY2pzJztcbn1cblxubW9kdWxlLmV4cG9ydHMuY2pzRnVuY3Rpb24gPSBjanNGdW5jdGlvbjtcbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKG1peGVkQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdlc0Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9Db250YWluKCdjanNGdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMubGVuZ3RoKS50b0JlKDIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW1wb3J0IERldGVjdGlvbiAoQ29tbW9uSlMgdnMgRVMgTW9kdWxlcyknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgQ29tbW9uSlMgcmVxdWlyZSBzdGF0ZW1lbnRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbW9uSlNDb2RlID0gYFxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGF4aW9zID0gcmVxdWlyZSgnYXhpb3MnKTtcbmA7XG4gICAgICBjb25zdCBpbXBvcnRzID0gZ2VuZXJhdG9yLmdldFVzZWRNb2R1bGVzKGNvbW1vbkpTQ29kZSk7XG4gICAgICBleHBlY3QoaW1wb3J0cykudG9Db250YWluKCdmcycpO1xuICAgICAgZXhwZWN0KGltcG9ydHMpLnRvQ29udGFpbigncGF0aCcpO1xuICAgICAgZXhwZWN0KGltcG9ydHMpLnRvQ29udGFpbignYXhpb3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IEVTIG1vZHVsZSBpbXBvcnQgc3RhdGVtZW50cycsICgpID0+IHtcbiAgICAgIGNvbnN0IGVzTW9kdWxlQ29kZSA9IGBcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuYDtcbiAgICAgIGNvbnN0IGltcG9ydHMgPSBnZW5lcmF0b3IuZ2V0VXNlZE1vZHVsZXMoZXNNb2R1bGVDb2RlKTtcbiAgICAgIGV4cGVjdChpbXBvcnRzKS50b0NvbnRhaW4oJ2ZzJyk7XG4gICAgICBleHBlY3QoaW1wb3J0cykudG9Db250YWluKCdwYXRoJyk7XG4gICAgICBleHBlY3QoaW1wb3J0cykudG9Db250YWluKCdheGlvcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgb3V0IHJlbGF0aXZlIGltcG9ydHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlV2l0aFJlbGF0aXZlID0gYFxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgbG9jYWwgPSByZXF1aXJlKCcuL2xvY2FsRmlsZScpO1xuY29uc3QgcGFyZW50ID0gcmVxdWlyZSgnLi4vcGFyZW50RmlsZScpO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICcuL3V0aWxzJztcbmA7XG4gICAgICBjb25zdCBpbXBvcnRzID0gZ2VuZXJhdG9yLmdldFVzZWRNb2R1bGVzKGNvZGVXaXRoUmVsYXRpdmUpO1xuICAgICAgZXhwZWN0KGltcG9ydHMpLnRvQ29udGFpbignZnMnKTtcbiAgICAgIGV4cGVjdChpbXBvcnRzKS50b0NvbnRhaW4oJ2F4aW9zJyk7XG4gICAgICBleHBlY3QoaW1wb3J0cykubm90LnRvQ29udGFpbignLi9sb2NhbEZpbGUnKTtcbiAgICAgIGV4cGVjdChpbXBvcnRzKS5ub3QudG9Db250YWluKCcuLi9wYXJlbnRGaWxlJyk7XG4gICAgICBleHBlY3QoaW1wb3J0cykubm90LnRvQ29udGFpbignLi91dGlscycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGVzdCBHZW5lcmF0aW9uIGZvciBEaWZmZXJlbnQgTW9kdWxlIFN5c3RlbXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBDb21tb25KUy1zdHlsZSB0ZXN0cyBmb3IgQ29tbW9uSlMgcHJvamVjdHMnLCAoKSA9PiB7XG4gICAgICAvLyBNb2NrIENvbW1vbkpTIHByb2plY3QgKG5vIFwidHlwZVwiOiBcIm1vZHVsZVwiIGluIHBhY2thZ2UuanNvbilcbiAgICAgIGdlbmVyYXRvci5pc0VTTW9kdWxlID0gZmFsc2U7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbW1vbkpTRmlsZSA9IHBhdGguam9pbih0ZW1wRGlyLCAnbWF0aFV0aWxzLmpzJyk7XG4gICAgICBjb25zdCBjb21tb25KU0NvZGUgPSBgXG5mdW5jdGlvbiBhZGQoYSwgYikge1xuICByZXR1cm4gYSArIGI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBhZGQgfTtcbmA7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGNvbW1vbkpTRmlsZSwgY29tbW9uSlNDb2RlKTtcbiAgICAgIFxuICAgICAgY29uc3QgZXhwb3J0cyA9IGdlbmVyYXRvci5leHRyYWN0RXhwb3J0cyhjb21tb25KU0NvZGUpO1xuICAgICAgY29uc3QgdGVzdENvbnRlbnQgPSBnZW5lcmF0b3IuY3JlYXRlVW5pdFRlc3QoY29tbW9uSlNGaWxlLCBleHBvcnRzLCBmYWxzZSwgW10pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgdXNlIHJlcXVpcmUgc3ludGF4XG4gICAgICBleHBlY3QodGVzdENvbnRlbnQpLnRvQ29udGFpbignY29uc3QgbW9kID0gcmVxdWlyZSgnKTtcbiAgICAgIGV4cGVjdCh0ZXN0Q29udGVudCkubm90LnRvQ29udGFpbignaW1wb3J0Jyk7XG4gICAgICBleHBlY3QodGVzdENvbnRlbnQpLnRvQ29udGFpbihcImRlc2NyaWJlKCdtYXRoVXRpbHMuanMnXCIpO1xuICAgICAgZXhwZWN0KHRlc3RDb250ZW50KS50b0NvbnRhaW4oXCJ0ZXN0KCdhZGQgd29ya3MnXCIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBFUyBtb2R1bGUtc3R5bGUgdGVzdHMgZm9yIEVTIG1vZHVsZSBwcm9qZWN0cycsICgpID0+IHtcbiAgICAgIC8vIE1vY2sgRVMgbW9kdWxlIHByb2plY3RcbiAgICAgIGdlbmVyYXRvci5pc0VTTW9kdWxlID0gdHJ1ZTtcbiAgICAgIFxuICAgICAgY29uc3QgZXNNb2R1bGVGaWxlID0gcGF0aC5qb2luKHRlbXBEaXIsICdkYXRhUHJvY2Vzc29yLmpzJyk7XG4gICAgICBjb25zdCBlc01vZHVsZUNvZGUgPSBgXG5leHBvcnQgZnVuY3Rpb24gcHJvY2VzcyhkYXRhKSB7XG4gIHJldHVybiBkYXRhLmZpbHRlcihCb29sZWFuKTtcbn1cbmA7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGVzTW9kdWxlRmlsZSwgZXNNb2R1bGVDb2RlKTtcbiAgICAgIFxuICAgICAgY29uc3QgZXhwb3J0cyA9IGdlbmVyYXRvci5leHRyYWN0RXhwb3J0cyhlc01vZHVsZUNvZGUpO1xuICAgICAgY29uc3QgdGVzdENvbnRlbnQgPSBnZW5lcmF0b3IuY3JlYXRlVW5pdFRlc3QoZXNNb2R1bGVGaWxlLCBleHBvcnRzLCBmYWxzZSwgW10pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgdXNlIGltcG9ydCBzeW50YXhcbiAgICAgIGV4cGVjdCh0ZXN0Q29udGVudCkudG9Db250YWluKCdpbXBvcnQgKiBhcyBtb2QgZnJvbScpO1xuICAgICAgZXhwZWN0KHRlc3RDb250ZW50KS5ub3QudG9Db250YWluKCdyZXF1aXJlKCcpO1xuICAgICAgZXhwZWN0KHRlc3RDb250ZW50KS50b0NvbnRhaW4oXCJkZXNjcmliZSgnZGF0YVByb2Nlc3Nvci5qcydcIik7XG4gICAgICBleHBlY3QodGVzdENvbnRlbnQpLnRvQ29udGFpbihcInRlc3QoJ3Byb2Nlc3Mgd29ya3MnXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVhbCBGaWxlIEFuYWx5c2lzIGFuZCBUZXN0IEdlbmVyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbmFseXplIGFuZCBnZW5lcmF0ZSB0ZXN0cyBmb3IgQ29tbW9uSlMgZmlsZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb21tb25KU0ZpbGUgPSBwYXRoLmpvaW4odGVtcERpciwgJ3JlYWxDb21tb25KUy5qcycpO1xuICAgICAgY29uc3QgY29tbW9uSlNDb2RlID0gYFxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5mdW5jdGlvbiByZWFkQ29uZmlnKGZpbGVuYW1lKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhmaWxlbmFtZSwgJ3V0ZjgnKSk7XG59XG5cbmNsYXNzIENvbmZpZ01hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHt9O1xuICB9XG4gIFxuICBsb2FkKGZpbGUpIHtcbiAgICB0aGlzLmNvbmZpZyA9IHJlYWRDb25maWcoZmlsZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlYWRDb25maWcsXG4gIENvbmZpZ01hbmFnZXJcbn07XG5gO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhjb21tb25KU0ZpbGUsIGNvbW1vbkpTQ29kZSk7XG4gICAgICBcbiAgICAgIC8vIEFuYWx5emUgdGhlIGZpbGVcbiAgICAgIGdlbmVyYXRvci5hbmFseXplKGNvbW1vbkpTRmlsZSk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRlc3Qgd2FzIGdlbmVyYXRlZFxuICAgICAgY29uc3QgZXhwZWN0ZWRUZXN0UGF0aCA9IGdlbmVyYXRvci5nZXRSZWxhdGl2ZVRlc3RQYXRoKGNvbW1vbkpTRmlsZSwgJ3VuaXQnKTtcbiAgICAgIGV4cGVjdChnZW5lcmF0b3Iuc2Nhbm5lZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChnZW5lcmF0b3Iuc2Nhbm5lZFswXS50eXBlKS50b0JlKCd1bml0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFuYWx5emUgYW5kIGdlbmVyYXRlIHRlc3RzIGZvciBFUyBtb2R1bGUgZmlsZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlc01vZHVsZUZpbGUgPSBwYXRoLmpvaW4odGVtcERpciwgJ3JlYWxFU01vZHVsZS5qcycpO1xuICAgICAgY29uc3QgZXNNb2R1bGVDb2RlID0gYFxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWwpIHtcbiAgcmV0dXJuIGVtYWlsLmluY2x1ZGVzKCdAJyk7XG59XG5cbmV4cG9ydCBjbGFzcyBFbWFpbFZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKCkge31cbiAgXG4gIGlzVmFsaWQoZW1haWwpIHtcbiAgICByZXR1cm4gdmFsaWRhdGVFbWFpbChlbWFpbCk7XG4gIH1cbn1cbmA7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGVzTW9kdWxlRmlsZSwgZXNNb2R1bGVDb2RlKTtcbiAgICAgIFxuICAgICAgLy8gQW5hbHl6ZSB0aGUgZmlsZVxuICAgICAgZ2VuZXJhdG9yLmFuYWx5emUoZXNNb2R1bGVGaWxlKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGVzdCB3YXMgZ2VuZXJhdGVkXG4gICAgICBleHBlY3QoZ2VuZXJhdG9yLnNjYW5uZWQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoZ2VuZXJhdG9yLnNjYW5uZWRbMF0udHlwZSkudG9CZSgndW5pdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRWRnZSBDYXNlcyBhbmQgRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZXMgd2l0aCBubyBleHBvcnRzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBub0V4cG9ydHNDb2RlID0gYFxuLy8gSnVzdCBzb21lIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgYXJlbid0IGV4cG9ydGVkXG5mdW5jdGlvbiBpbnRlcm5hbCgpIHt9XG5jb25zdCBQUklWQVRFX0NPTlNUID0gJ3ByaXZhdGUnO1xuYDtcbiAgICAgIGNvbnN0IGV4cG9ydHMgPSBnZW5lcmF0b3IuZXh0cmFjdEV4cG9ydHMobm9FeHBvcnRzQ29kZSk7XG4gICAgICBleHBlY3QoZXhwb3J0cykudG9FcXVhbChbXSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgZXhwb3J0IHBhdHRlcm5zJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsZm9ybWVkQ29kZSA9IGBcbm1vZHVsZS5leHBvcnRzID0gXG5mdW5jdGlvbiBpbmNvbXBsZXRlKCkge31cbmV4cG9ydHMuID0gJ2ludmFsaWQnO1xuZXhwb3J0IFxuYDtcbiAgICAgIGNvbnN0IGV4cG9ydHMgPSBnZW5lcmF0b3IuZXh0cmFjdEV4cG9ydHMobWFsZm9ybWVkQ29kZSk7XG4gICAgICAvLyBTaG91bGQgbm90IGNyYXNoIGFuZCByZXR1cm4gdmFsaWQgZXhwb3J0cyBvbmx5XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShleHBvcnRzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZpbGVzIHdpdGggY29tbWVudHMgY29udGFpbmluZyBleHBvcnQtbGlrZSBwYXR0ZXJucycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW1lbnRDb2RlID0gYFxuLy8gVGhpcyBpcyBub3QgYW4gZXhwb3J0OiBtb2R1bGUuZXhwb3J0cyA9IGZha2Vcbi8qIFxuICogZXhwb3J0IGZ1bmN0aW9uIGNvbW1lbnRlZE91dCgpIHt9XG4gKi9cbmZ1bmN0aW9uIHJlYWxGdW5jdGlvbigpIHt9XG5tb2R1bGUuZXhwb3J0cyA9IHJlYWxGdW5jdGlvbjtcbmA7XG4gICAgICBjb25zdCBleHBvcnRzID0gZ2VuZXJhdG9yLmV4dHJhY3RFeHBvcnRzKGNvbW1lbnRDb2RlKTtcbiAgICAgIGV4cGVjdChleHBvcnRzKS50b0NvbnRhaW4oJ3JlYWxGdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KGV4cG9ydHMpLm5vdC50b0NvbnRhaW4oJ2Zha2UnKTtcbiAgICAgIGV4cGVjdChleHBvcnRzKS5ub3QudG9Db250YWluKCdjb21tZW50ZWRPdXQnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQztBQUN4QixNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTTtFQUFFRTtBQUFjLENBQUMsR0FBR0YsT0FBTyxDQUFDLHNCQUFzQixDQUFDO0FBRXpERyxRQUFRLENBQUMsMkNBQTJDLEVBQUUsTUFBTTtFQUMxRCxJQUFJQyxPQUFPO0VBQ1gsSUFBSUMsU0FBUztFQUViQyxVQUFVLENBQUMsTUFBTTtJQUNmO0lBQ0FGLE9BQU8sR0FBR0gsSUFBSSxDQUFDTSxJQUFJLENBQUNDLFNBQVMsRUFBRSxtQkFBbUIsQ0FBQztJQUNuRCxJQUFJLENBQUNULEVBQUUsQ0FBQ1UsVUFBVSxDQUFDTCxPQUFPLENBQUMsRUFBRTtN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