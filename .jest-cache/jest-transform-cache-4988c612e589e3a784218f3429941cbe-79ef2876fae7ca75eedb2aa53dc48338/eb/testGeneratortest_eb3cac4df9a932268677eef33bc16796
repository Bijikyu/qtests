75b170fb235acbe5dc20baa6c3977757
/**
 * Test Suite for Test Generator
 * 
 * Comprehensive testing of the TestGenerator class and CLI functionality.
 * Tests file scanning, code analysis, test generation, and CLI interface.
 */

const {
  runTestSuite,
  createAssertions
} = require('../utils/runTestSuite');
const {
  TestGenerator,
  DEFAULT_CONFIG,
  PATTERNS
} = require('../lib/testGenerator');
const fs = require('fs');
const path = require('path');
const {
  execSync
} = require('child_process');
const assert = createAssertions();

// Test Generator Configuration Tests
const configTests = [['uses default configuration', () => {
  const defaultGen = new TestGenerator();
  assert.equal(defaultGen.config.SRC_DIR, 'src', 'Should use default src directory');
  assert.equal(defaultGen.config.TEST_DIR, 'tests/integration', 'Should use default test directory');
  assert.truthy(defaultGen.config.KNOWN_MOCKS.includes('axios'), 'Should include axios in known mocks');
  assert.truthy(defaultGen.config.VALID_EXTS.includes('.js'), 'Should include .js extension');
}], ['accepts custom configuration', () => {
  const customGen = new TestGenerator({
    SRC_DIR: 'lib',
    TEST_DIR: 'spec',
    KNOWN_MOCKS: ['custom-lib']
  });
  assert.equal(customGen.config.SRC_DIR, 'lib', 'Should use custom src directory');
  assert.equal(customGen.config.TEST_DIR, 'spec', 'Should use custom test directory');
  assert.truthy(customGen.config.KNOWN_MOCKS.includes('custom-lib'), 'Should include custom mock');
}]];

// File System Operations Tests
const fileSystemTests = [['walks directory structure', () => {
  const tempDir = path.join(__dirname, 'temp-test-' + Date.now());
  fs.mkdirSync(tempDir, {
    recursive: true
  });
  try {
    // Create test files
    const srcDir = path.join(tempDir, 'src');
    fs.mkdirSync(srcDir, {
      recursive: true
    });
    fs.writeFileSync(path.join(srcDir, 'utils.js'), 'export const helper = () => {};');
    fs.mkdirSync(path.join(srcDir, 'components'), {
      recursive: true
    });
    fs.writeFileSync(path.join(srcDir, 'components', 'Button.tsx'), 'export const Button = () => {};');
    const originalCwd = process.cwd();
    process.chdir(tempDir);
    try {
      const generator = new TestGenerator({
        SRC_DIR: 'src',
        TEST_DIR: 'tests'
      });
      const files = generator.walk('src');
      assert.truthy(files.length >= 2, 'Should find multiple files');
      assert.truthy(files.some(f => f.endsWith('utils.js')), 'Should find utils.js');
      assert.truthy(files.some(f => f.endsWith('Button.tsx')), 'Should find Button.tsx');
    } finally {
      process.chdir(originalCwd);
    }
  } finally {
    // Cleanup
    fs.rmSync(tempDir, {
      recursive: true,
      force: true
    });
  }
}]];

// CLI Tests
const cliTests = [['CLI script exists and is executable', () => {
  const cliPath = path.join(__dirname, '..', 'bin', 'qtests-generate');
  assert.truthy(fs.existsSync(cliPath), 'CLI script should exist');
  const stats = fs.statSync(cliPath);
  assert.truthy(stats.mode & 0o111, 'CLI script should be executable'); // Check executable bit
}], ['CLI shows help when requested', () => {
  const result = execSync('node bin/qtests-generate --help', {
    cwd: path.join(__dirname, '..'),
    encoding: 'utf8',
    stdio: 'pipe'
  });
  assert.truthy(result.includes('USAGE'), 'Help should include usage information');
  assert.truthy(result.includes('OPTIONS'), 'Help should include options');
  assert.truthy(result.includes('qtests-generate'), 'Help should include command name');
}], ['CLI shows version when requested', () => {
  const result = execSync('node bin/qtests-generate --version', {
    cwd: path.join(__dirname, '..'),
    encoding: 'utf8',
    stdio: 'pipe'
  });
  assert.truthy(result.includes('qtests v'), 'Version should include qtests version');
}]];

// Test Generation Tests  
const generationTests = [['generates unit test content', () => {
  const generator = new TestGenerator();
  const exports = ['calculate', 'Calculator'];
  const usesQtests = false;
  const mocks = ['axios'];
  const testContent = generator.createUnitTest('calculator.js', exports, usesQtests, mocks);
  assert.truthy(testContent.includes('calculate'), 'Should include function name');
  assert.truthy(testContent.includes('Calculator'), 'Should include class name');
  assert.truthy(testContent.includes('describe'), 'Should include describe statements');
}], ['generates API test content', () => {
  const generator = new TestGenerator();
  const method = 'get';
  const route = '/api/users';
  const testContent = generator.createApiTest(method, route);
  assert.truthy(testContent.includes('/api/users'), 'Should include route path');
  assert.truthy(testContent.includes('GET'), 'Should include GET method');
  assert.truthy(testContent.includes('request'), 'Should include request statements');
}]];

// Run all test suites
async function runAllTests() {
  console.log('ðŸ§ª Running Test Generator Tests...\n');
  await runTestSuite('Configuration Tests', configTests);
  await runTestSuite('File System Tests', fileSystemTests);
  await runTestSuite('CLI Tests', cliTests);
  await runTestSuite('Generation Tests', generationTests);
  console.log('\nâœ… All Test Generator tests completed!');
}

// Run tests if this is the main module
if (require.main === module) {
  runAllTests().catch(console.error);
}
module.exports = {
  runAllTests
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJydW5UZXN0U3VpdGUiLCJjcmVhdGVBc3NlcnRpb25zIiwicmVxdWlyZSIsIlRlc3RHZW5lcmF0b3IiLCJERUZBVUxUX0NPTkZJRyIsIlBBVFRFUk5TIiwiZnMiLCJwYXRoIiwiZXhlY1N5bmMiLCJhc3NlcnQiLCJjb25maWdUZXN0cyIsImRlZmF1bHRHZW4iLCJlcXVhbCIsImNvbmZpZyIsIlNSQ19ESVIiLCJURVNUX0RJUiIsInRydXRoeSIsIktOT1dOX01PQ0tTIiwiaW5jbHVkZXMiLCJWQUxJRF9FWFRTIiwiY3VzdG9tR2VuIiwiZmlsZVN5c3RlbVRlc3RzIiwidGVtcERpciIsImpvaW4iLCJfX2Rpcm5hbWUiLCJEYXRlIiwibm93IiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwic3JjRGlyIiwid3JpdGVGaWxlU3luYyIsIm9yaWdpbmFsQ3dkIiwicHJvY2VzcyIsImN3ZCIsImNoZGlyIiwiZ2VuZXJhdG9yIiwiZmlsZXMiLCJ3YWxrIiwibGVuZ3RoIiwic29tZSIsImYiLCJlbmRzV2l0aCIsInJtU3luYyIsImZvcmNlIiwiY2xpVGVzdHMiLCJjbGlQYXRoIiwiZXhpc3RzU3luYyIsInN0YXRzIiwic3RhdFN5bmMiLCJtb2RlIiwicmVzdWx0IiwiZW5jb2RpbmciLCJzdGRpbyIsImdlbmVyYXRpb25UZXN0cyIsImV4cG9ydHMiLCJ1c2VzUXRlc3RzIiwibW9ja3MiLCJ0ZXN0Q29udGVudCIsImNyZWF0ZVVuaXRUZXN0IiwibWV0aG9kIiwicm91dGUiLCJjcmVhdGVBcGlUZXN0IiwicnVuQWxsVGVzdHMiLCJjb25zb2xlIiwibG9nIiwibWFpbiIsIm1vZHVsZSIsImNhdGNoIiwiZXJyb3IiXSwic291cmNlcyI6WyJ0ZXN0R2VuZXJhdG9yLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IFN1aXRlIGZvciBUZXN0IEdlbmVyYXRvclxuICogXG4gKiBDb21wcmVoZW5zaXZlIHRlc3Rpbmcgb2YgdGhlIFRlc3RHZW5lcmF0b3IgY2xhc3MgYW5kIENMSSBmdW5jdGlvbmFsaXR5LlxuICogVGVzdHMgZmlsZSBzY2FubmluZywgY29kZSBhbmFseXNpcywgdGVzdCBnZW5lcmF0aW9uLCBhbmQgQ0xJIGludGVyZmFjZS5cbiAqL1xuXG5jb25zdCB7IHJ1blRlc3RTdWl0ZSwgY3JlYXRlQXNzZXJ0aW9ucyB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvcnVuVGVzdFN1aXRlJyk7XG5jb25zdCB7IFRlc3RHZW5lcmF0b3IsIERFRkFVTFRfQ09ORklHLCBQQVRURVJOUyB9ID0gcmVxdWlyZSgnLi4vbGliL3Rlc3RHZW5lcmF0b3InKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7IGV4ZWNTeW5jIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyk7XG5cbmNvbnN0IGFzc2VydCA9IGNyZWF0ZUFzc2VydGlvbnMoKTtcblxuLy8gVGVzdCBHZW5lcmF0b3IgQ29uZmlndXJhdGlvbiBUZXN0c1xuY29uc3QgY29uZmlnVGVzdHMgPSBbXG4gIFsndXNlcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgZGVmYXVsdEdlbiA9IG5ldyBUZXN0R2VuZXJhdG9yKCk7XG4gICAgYXNzZXJ0LmVxdWFsKGRlZmF1bHRHZW4uY29uZmlnLlNSQ19ESVIsICdzcmMnLCAnU2hvdWxkIHVzZSBkZWZhdWx0IHNyYyBkaXJlY3RvcnknKTtcbiAgICBhc3NlcnQuZXF1YWwoZGVmYXVsdEdlbi5jb25maWcuVEVTVF9ESVIsICd0ZXN0cy9pbnRlZ3JhdGlvbicsICdTaG91bGQgdXNlIGRlZmF1bHQgdGVzdCBkaXJlY3RvcnknKTtcbiAgICBhc3NlcnQudHJ1dGh5KGRlZmF1bHRHZW4uY29uZmlnLktOT1dOX01PQ0tTLmluY2x1ZGVzKCdheGlvcycpLCAnU2hvdWxkIGluY2x1ZGUgYXhpb3MgaW4ga25vd24gbW9ja3MnKTtcbiAgICBhc3NlcnQudHJ1dGh5KGRlZmF1bHRHZW4uY29uZmlnLlZBTElEX0VYVFMuaW5jbHVkZXMoJy5qcycpLCAnU2hvdWxkIGluY2x1ZGUgLmpzIGV4dGVuc2lvbicpO1xuICB9XSxcblxuICBbJ2FjY2VwdHMgY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgY3VzdG9tR2VuID0gbmV3IFRlc3RHZW5lcmF0b3Ioe1xuICAgICAgU1JDX0RJUjogJ2xpYicsXG4gICAgICBURVNUX0RJUjogJ3NwZWMnLFxuICAgICAgS05PV05fTU9DS1M6IFsnY3VzdG9tLWxpYiddXG4gICAgfSk7XG4gICAgXG4gICAgYXNzZXJ0LmVxdWFsKGN1c3RvbUdlbi5jb25maWcuU1JDX0RJUiwgJ2xpYicsICdTaG91bGQgdXNlIGN1c3RvbSBzcmMgZGlyZWN0b3J5Jyk7XG4gICAgYXNzZXJ0LmVxdWFsKGN1c3RvbUdlbi5jb25maWcuVEVTVF9ESVIsICdzcGVjJywgJ1Nob3VsZCB1c2UgY3VzdG9tIHRlc3QgZGlyZWN0b3J5Jyk7XG4gICAgYXNzZXJ0LnRydXRoeShjdXN0b21HZW4uY29uZmlnLktOT1dOX01PQ0tTLmluY2x1ZGVzKCdjdXN0b20tbGliJyksICdTaG91bGQgaW5jbHVkZSBjdXN0b20gbW9jaycpO1xuICB9XVxuXTtcblxuLy8gRmlsZSBTeXN0ZW0gT3BlcmF0aW9ucyBUZXN0c1xuY29uc3QgZmlsZVN5c3RlbVRlc3RzID0gW1xuICBbJ3dhbGtzIGRpcmVjdG9yeSBzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgY29uc3QgdGVtcERpciA9IHBhdGguam9pbihfX2Rpcm5hbWUsICd0ZW1wLXRlc3QtJyArIERhdGUubm93KCkpO1xuICAgIGZzLm1rZGlyU3luYyh0ZW1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIHRlc3QgZmlsZXNcbiAgICAgIGNvbnN0IHNyY0RpciA9IHBhdGguam9pbih0ZW1wRGlyLCAnc3JjJyk7XG4gICAgICBmcy5ta2RpclN5bmMoc3JjRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKHNyY0RpciwgJ3V0aWxzLmpzJyksICdleHBvcnQgY29uc3QgaGVscGVyID0gKCkgPT4ge307Jyk7XG4gICAgICBmcy5ta2RpclN5bmMocGF0aC5qb2luKHNyY0RpciwgJ2NvbXBvbmVudHMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihzcmNEaXIsICdjb21wb25lbnRzJywgJ0J1dHRvbi50c3gnKSwgJ2V4cG9ydCBjb25zdCBCdXR0b24gPSAoKSA9PiB7fTsnKTtcbiAgICAgIFxuICAgICAgY29uc3Qgb3JpZ2luYWxDd2QgPSBwcm9jZXNzLmN3ZCgpO1xuICAgICAgcHJvY2Vzcy5jaGRpcih0ZW1wRGlyKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdG9yID0gbmV3IFRlc3RHZW5lcmF0b3IoeyBTUkNfRElSOiAnc3JjJywgVEVTVF9ESVI6ICd0ZXN0cycgfSk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZ2VuZXJhdG9yLndhbGsoJ3NyYycpO1xuICAgICAgICBcbiAgICAgICAgYXNzZXJ0LnRydXRoeShmaWxlcy5sZW5ndGggPj0gMiwgJ1Nob3VsZCBmaW5kIG11bHRpcGxlIGZpbGVzJyk7XG4gICAgICAgIGFzc2VydC50cnV0aHkoZmlsZXMuc29tZShmID0+IGYuZW5kc1dpdGgoJ3V0aWxzLmpzJykpLCAnU2hvdWxkIGZpbmQgdXRpbHMuanMnKTtcbiAgICAgICAgYXNzZXJ0LnRydXRoeShmaWxlcy5zb21lKGYgPT4gZi5lbmRzV2l0aCgnQnV0dG9uLnRzeCcpKSwgJ1Nob3VsZCBmaW5kIEJ1dHRvbi50c3gnKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHByb2Nlc3MuY2hkaXIob3JpZ2luYWxDd2QpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAvLyBDbGVhbnVwXG4gICAgICBmcy5ybVN5bmModGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfV1cbl07XG5cbi8vIENMSSBUZXN0c1xuY29uc3QgY2xpVGVzdHMgPSBbXG4gIFsnQ0xJIHNjcmlwdCBleGlzdHMgYW5kIGlzIGV4ZWN1dGFibGUnLCAoKSA9PiB7XG4gICAgY29uc3QgY2xpUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLicsICdiaW4nLCAncXRlc3RzLWdlbmVyYXRlJyk7XG4gICAgYXNzZXJ0LnRydXRoeShmcy5leGlzdHNTeW5jKGNsaVBhdGgpLCAnQ0xJIHNjcmlwdCBzaG91bGQgZXhpc3QnKTtcbiAgICBcbiAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKGNsaVBhdGgpO1xuICAgIGFzc2VydC50cnV0aHkoc3RhdHMubW9kZSAmIDBvMTExLCAnQ0xJIHNjcmlwdCBzaG91bGQgYmUgZXhlY3V0YWJsZScpOyAvLyBDaGVjayBleGVjdXRhYmxlIGJpdFxuICB9XSxcblxuICBbJ0NMSSBzaG93cyBoZWxwIHdoZW4gcmVxdWVzdGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGV4ZWNTeW5jKCdub2RlIGJpbi9xdGVzdHMtZ2VuZXJhdGUgLS1oZWxwJywgeyBcbiAgICAgIGN3ZDogcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyksXG4gICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgc3RkaW86ICdwaXBlJ1xuICAgIH0pO1xuICAgIFxuICAgIGFzc2VydC50cnV0aHkocmVzdWx0LmluY2x1ZGVzKCdVU0FHRScpLCAnSGVscCBzaG91bGQgaW5jbHVkZSB1c2FnZSBpbmZvcm1hdGlvbicpO1xuICAgIGFzc2VydC50cnV0aHkocmVzdWx0LmluY2x1ZGVzKCdPUFRJT05TJyksICdIZWxwIHNob3VsZCBpbmNsdWRlIG9wdGlvbnMnKTtcbiAgICBhc3NlcnQudHJ1dGh5KHJlc3VsdC5pbmNsdWRlcygncXRlc3RzLWdlbmVyYXRlJyksICdIZWxwIHNob3VsZCBpbmNsdWRlIGNvbW1hbmQgbmFtZScpO1xuICB9XSxcblxuICBbJ0NMSSBzaG93cyB2ZXJzaW9uIHdoZW4gcmVxdWVzdGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGV4ZWNTeW5jKCdub2RlIGJpbi9xdGVzdHMtZ2VuZXJhdGUgLS12ZXJzaW9uJywgeyBcbiAgICAgIGN3ZDogcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJyksXG4gICAgICBlbmNvZGluZzogJ3V0ZjgnLFxuICAgICAgc3RkaW86ICdwaXBlJ1xuICAgIH0pO1xuICAgIFxuICAgIGFzc2VydC50cnV0aHkocmVzdWx0LmluY2x1ZGVzKCdxdGVzdHMgdicpLCAnVmVyc2lvbiBzaG91bGQgaW5jbHVkZSBxdGVzdHMgdmVyc2lvbicpO1xuICB9XVxuXTtcblxuLy8gVGVzdCBHZW5lcmF0aW9uIFRlc3RzICBcbmNvbnN0IGdlbmVyYXRpb25UZXN0cyA9IFtcbiAgWydnZW5lcmF0ZXMgdW5pdCB0ZXN0IGNvbnRlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgZ2VuZXJhdG9yID0gbmV3IFRlc3RHZW5lcmF0b3IoKTtcbiAgICBjb25zdCBleHBvcnRzID0gWydjYWxjdWxhdGUnLCAnQ2FsY3VsYXRvciddO1xuICAgIGNvbnN0IHVzZXNRdGVzdHMgPSBmYWxzZTtcbiAgICBjb25zdCBtb2NrcyA9IFsnYXhpb3MnXTtcbiAgICBcbiAgICBjb25zdCB0ZXN0Q29udGVudCA9IGdlbmVyYXRvci5jcmVhdGVVbml0VGVzdCgnY2FsY3VsYXRvci5qcycsIGV4cG9ydHMsIHVzZXNRdGVzdHMsIG1vY2tzKTtcbiAgICBcbiAgICBhc3NlcnQudHJ1dGh5KHRlc3RDb250ZW50LmluY2x1ZGVzKCdjYWxjdWxhdGUnKSwgJ1Nob3VsZCBpbmNsdWRlIGZ1bmN0aW9uIG5hbWUnKTtcbiAgICBhc3NlcnQudHJ1dGh5KHRlc3RDb250ZW50LmluY2x1ZGVzKCdDYWxjdWxhdG9yJyksICdTaG91bGQgaW5jbHVkZSBjbGFzcyBuYW1lJyk7XG4gICAgYXNzZXJ0LnRydXRoeSh0ZXN0Q29udGVudC5pbmNsdWRlcygnZGVzY3JpYmUnKSwgJ1Nob3VsZCBpbmNsdWRlIGRlc2NyaWJlIHN0YXRlbWVudHMnKTtcbiAgfV0sXG5cbiAgWydnZW5lcmF0ZXMgQVBJIHRlc3QgY29udGVudCcsICgpID0+IHtcbiAgICBjb25zdCBnZW5lcmF0b3IgPSBuZXcgVGVzdEdlbmVyYXRvcigpO1xuICAgIGNvbnN0IG1ldGhvZCA9ICdnZXQnO1xuICAgIGNvbnN0IHJvdXRlID0gJy9hcGkvdXNlcnMnO1xuICAgIFxuICAgIGNvbnN0IHRlc3RDb250ZW50ID0gZ2VuZXJhdG9yLmNyZWF0ZUFwaVRlc3QobWV0aG9kLCByb3V0ZSk7XG4gICAgXG4gICAgYXNzZXJ0LnRydXRoeSh0ZXN0Q29udGVudC5pbmNsdWRlcygnL2FwaS91c2VycycpLCAnU2hvdWxkIGluY2x1ZGUgcm91dGUgcGF0aCcpO1xuICAgIGFzc2VydC50cnV0aHkodGVzdENvbnRlbnQuaW5jbHVkZXMoJ0dFVCcpLCAnU2hvdWxkIGluY2x1ZGUgR0VUIG1ldGhvZCcpO1xuICAgIGFzc2VydC50cnV0aHkodGVzdENvbnRlbnQuaW5jbHVkZXMoJ3JlcXVlc3QnKSwgJ1Nob3VsZCBpbmNsdWRlIHJlcXVlc3Qgc3RhdGVtZW50cycpO1xuICB9XVxuXTtcblxuLy8gUnVuIGFsbCB0ZXN0IHN1aXRlc1xuYXN5bmMgZnVuY3Rpb24gcnVuQWxsVGVzdHMoKSB7XG4gIGNvbnNvbGUubG9nKCfwn6eqIFJ1bm5pbmcgVGVzdCBHZW5lcmF0b3IgVGVzdHMuLi5cXG4nKTtcbiAgXG4gIGF3YWl0IHJ1blRlc3RTdWl0ZSgnQ29uZmlndXJhdGlvbiBUZXN0cycsIGNvbmZpZ1Rlc3RzKTtcbiAgYXdhaXQgcnVuVGVzdFN1aXRlKCdGaWxlIFN5c3RlbSBUZXN0cycsIGZpbGVTeXN0ZW1UZXN0cyk7XG4gIGF3YWl0IHJ1blRlc3RTdWl0ZSgnQ0xJIFRlc3RzJywgY2xpVGVzdHMpO1xuICBhd2FpdCBydW5UZXN0U3VpdGUoJ0dlbmVyYXRpb24gVGVzdHMnLCBnZW5lcmF0aW9uVGVzdHMpO1xuICBcbiAgY29uc29sZS5sb2coJ1xcbuKchSBBbGwgVGVzdCBHZW5lcmF0b3IgdGVzdHMgY29tcGxldGVkIScpO1xufVxuXG4vLyBSdW4gdGVzdHMgaWYgdGhpcyBpcyB0aGUgbWFpbiBtb2R1bGVcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xuICBydW5BbGxUZXN0cygpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgcnVuQWxsVGVzdHMgfTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBLFlBQVk7RUFBRUM7QUFBaUIsQ0FBQyxHQUFHQyxPQUFPLENBQUMsdUJBQXVCLENBQUM7QUFDM0UsTUFBTTtFQUFFQyxhQUFhO0VBQUVDLGNBQWM7RUFBRUM7QUFBUyxDQUFDLEdBQUdILE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQztBQUNuRixNQUFNSSxFQUFFLEdBQUdKLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU07RUFBRU07QUFBUyxDQUFDLEdBQUdOLE9BQU8sQ0FBQyxlQUFlLENBQUM7QUFFN0MsTUFBTU8sTUFBTSxHQUFHUixnQkFBZ0IsQ0FBQyxDQUFDOztBQUVqQztBQUNBLE1BQU1TLFdBQVcsR0FBRyxDQUNsQixDQUFDLDRCQUE0QixFQUFFLE1BQU07RUFDbkMsTUFBTUMsVUFBVSxHQUFHLElBQUlSLGFBQWEsQ0FBQyxDQUFDO0VBQ3RDTSxNQUFNLENBQUNHLEtBQUssQ0FBQ0QsVUFBVSxDQUFDRSxNQUFNLENBQUNDLE9BQU8sRUFBRSxLQUFLLEVBQUUsa0NBQWtDLENBQUM7RUFDbEZMLE1BQU0sQ0FBQ0csS0FBSyxDQUFDRCxVQUFVLENBQUNFLE1BQU0sQ0FBQ0UsUUFBUSxFQUFFLG1CQUFtQixFQUFFLG1DQUFtQyxDQUFDO0VBQ2xHTixNQUFNLENBQUNPLE1B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Q0FBQ3ZDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRSwyQkFBMkIsQ0FBQztFQUM5RVQsTUFBTSxDQUFDTyxNQUFNLENBQUN5QyxXQUFXLENBQUN2QyxRQUFRLENBQUMsVUFBVSxDQUFDLEVBQUUsb0NBQW9DLENBQUM7QUFDdkYsQ0FBQyxDQUFDLEVBRUYsQ0FBQyw0QkFBNEIsRUFBRSxNQUFNO0VBQ25DLE1BQU1pQixTQUFTLEdBQUcsSUFBSWhDLGFBQWEsQ0FBQyxDQUFDO0VBQ3JDLE1BQU13RCxNQUFNLEdBQUcsS0FBSztFQUNwQixNQUFNQyxLQUFLLEdBQUcsWUFBWTtFQUUxQixNQUFNSCxXQUFXLEdBQUd0QixTQUFTLENBQUMwQixhQUFhLENBQUNGLE1BQU0sRUFBRUMsS0FBSyxDQUFDO0VBRTFEbkQsTUFBTSxDQUFDTyxNQUFNLENBQUN5QyxXQUFXLENBQUN2QyxRQUFRLENBQUMsWUFBWSxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDOUVULE1BQU0sQ0FBQ08sTUFBTSxDQUFDeUMsV0FBVyxDQUFDdkMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLDJCQUEyQixDQUFDO0VBQ3ZFVCxNQUFNLENBQUNPLE1BQU0sQ0FBQ3lDLFdBQVcsQ0FBQ3ZDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRSxtQ0FBbUMsQ0FBQztBQUNyRixDQUFDLENBQUMsQ0FDSDs7QUFFRDtBQUNBLGVBQWU0QyxXQUFXQSxDQUFBLEVBQUc7RUFDM0JDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNDQUFzQyxDQUFDO0VBRW5ELE1BQU1oRSxZQUFZLENBQUMscUJBQXFCLEVBQUVVLFdBQVcsQ0FBQztFQUN0RCxNQUFNVixZQUFZLENBQUMsbUJBQW1CLEVBQUVxQixlQUFlLENBQUM7RUFDeEQsTUFBTXJCLFlBQVksQ0FBQyxXQUFXLEVBQUU0QyxRQUFRLENBQUM7RUFDekMsTUFBTTVDLFlBQVksQ0FBQyxrQkFBa0IsRUFBRXFELGVBQWUsQ0FBQztFQUV2RFUsT0FBTyxDQUFDQyxHQUFHLENBQUMseUNBQXlDLENBQUM7QUFDeEQ7O0FBRUE7QUFDQSxJQUFJOUQsT0FBTyxDQUFDK0QsSUFBSSxLQUFLQyxNQUFNLEVBQUU7RUFDM0JKLFdBQVcsQ0FBQyxDQUFDLENBQUNLLEtBQUssQ0FBQ0osT0FBTyxDQUFDSyxLQUFLLENBQUM7QUFDcEM7QUFFQUYsTUFBTSxDQUFDWixPQUFPLEdBQUc7RUFBRVE7QUFBWSxDQUFDIiwiaWdub3JlTGlzdCI6W119