{"version":3,"names":["fs","require","path","DEFAULT_CONFIG","SRC_DIR","TEST_DIR","KNOWN_MOCKS","VALID_EXTS","PATTERNS","qtests","api","exports","imports","TestGenerator","constructor","options","config","scanned","isESModule","detectESModule","packagePath","resolve","process","cwd","existsSync","packageJson","JSON","parse","readFileSync","type","sourceFiles","walkProject","filter","file","includes","extname","slice","esModuleCount","commonJSCount","content","error","shouldSkipDirectory","dirName","skipPatterns","startsWith","currentDir","walkRecursive","dir","readdirSync","withFileTypes","flatMap","entry","full","name","isDirectory","walk","categorizeFiles","files","existingTests","forEach","ext","basename","isTestFile","push","hasTest","hasCorrespondingTest","filename","testPatterns","some","pattern","test","sourceFile","allFiles","dirname","sameDirectoryTests","map","join","testDirectories","testDirectoryTests","testDir","testPath","allTestPaths","getRelativeTestPath","rel","relative","testExt","replace","createDir","p","mkdirSync","recursive","writeIfMissing","writeFileSync","getUsedModules","matchAll","m","x","createUnitTest","usesQtests","mocks","isTypeScript","useESModules","lines","length","lib","fn","createApiTest","method","route","toUpperCase","toLowerCase","analyze","mockTargets","i","created","apis","scaffoldJestSetup","trim","setup","generateTestRunner","isESModuleProject","templatePath","__dirname","runnerContent","convertToESModule","generateESModuleTemplate","generateCommonJSTemplate","updatePackageJsonTestScript","commonJSCode","console","log","scripts","stringify","message","generate","projectFiles","label","getResults","module"],"sources":["testGenerator.js"],"sourcesContent":["/**\n * Test Generator for qtests Framework\n * \n * Automatically generates unit tests and API tests by scanning source code.\n * Analyzes JavaScript/TypeScript files to detect exports, imports, and API routes,\n * then creates appropriate test files with proper structure and mocking.\n * \n * Features:\n * - Unit test generation for exported functions/classes\n * - API test generation for Express routes\n * - Automatic mock setup for known libraries\n * - Jest configuration scaffolding\n * - Support for qtests framework integration\n */\n\nconst fs = require('fs');\nconst path = require('path');\n\n// Configuration constants\nconst DEFAULT_CONFIG = {\n  SRC_DIR: 'src',\n  TEST_DIR: 'tests/integration',\n  KNOWN_MOCKS: ['axios', 'node-fetch', 'pg', 'mongoose', 'fs', 'redis'],\n  VALID_EXTS: ['.ts', '.js', '.tsx', '.jsx']\n};\n\n// Regex patterns for code analysis\nconst PATTERNS = {\n  qtests: /from ['\"]qtests['\"]/,\n  api: /\\b(app|router)\\.(get|post|put|delete|patch)\\s*\\(\\s*['\"`]([^'\"`]+)['\"`]/gi,\n  exports: /^\\s*export\\s+(?:const|function|class)\\s+([a-zA-Z0-9_]+)/gm,\n  imports: /from ['\"]([^'\"]+)['\"]/g\n};\n\nclass TestGenerator {\n  constructor(options = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...options };\n    this.scanned = [];\n    this.isESModule = this.detectESModule(); // Detect module type once during initialization\n  }\n\n  /**\n   * Detect if the current project uses ES modules or CommonJS\n   * Checks package.json for \"type\": \"module\" and source file patterns\n   */\n  detectESModule() {\n    try {\n      // Check package.json for \"type\": \"module\"\n      const packagePath = path.resolve(process.cwd(), 'package.json');\n      if (fs.existsSync(packagePath)) {\n        const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n        if (packageJson.type === 'module') {\n          return true;\n        }\n      }\n      \n      // Check for ES module patterns in source files\n      const sourceFiles = this.walkProject()\n        .filter(file => this.config.VALID_EXTS.includes(path.extname(file)))\n        .slice(0, 10); // Sample first 10 files for performance\n      \n      let esModuleCount = 0;\n      let commonJSCount = 0;\n      \n      for (const file of sourceFiles) {\n        try {\n          const content = fs.readFileSync(file, 'utf8');\n          // Look for ES module patterns\n          if (content.includes('import ') || content.includes('export ')) {\n            esModuleCount++;\n          }\n          // Look for CommonJS patterns\n          if (content.includes('require(') || content.includes('module.exports')) {\n            commonJSCount++;\n          }\n        } catch (error) {\n          // Skip files we can't read\n          continue;\n        }\n      }\n      \n      // Return true if ES modules are more prevalent\n      return esModuleCount > commonJSCount;\n    } catch (error) {\n      // Default to CommonJS if detection fails\n      return false;\n    }\n  }\n\n  /**\n   * Check if directory should be skipped during discovery\n   */\n  shouldSkipDirectory(dirName) {\n    const skipPatterns = [\n      'node_modules', '.git', '.next', 'dist', 'build', 'coverage',\n      '.vscode', '.idea', 'docs', 'documentation', 'assets', 'public', 'static',\n      '.replit_cache', '.config', '.npm', 'logs'\n    ];\n    return skipPatterns.includes(dirName) || dirName.startsWith('.');\n  }\n\n  /**\n   * Walk entire project directory structure, respecting skip patterns\n   */\n  walkProject() {\n    const currentDir = process.cwd();\n    return this.walkRecursive(currentDir);\n  }\n\n  /**\n   * Recursively walk directory and return all file paths, skipping irrelevant directories\n   */\n  walkRecursive(dir) {\n    if (!fs.existsSync(dir)) {\n      return [];\n    }\n    \n    return fs.readdirSync(dir, { withFileTypes: true }).flatMap(entry => {\n      const full = path.resolve(dir, entry.name);\n      \n      if (entry.isDirectory()) {\n        // Skip directories that shouldn't contain tests or source files\n        if (this.shouldSkipDirectory(entry.name)) {\n          return [];\n        }\n        return this.walkRecursive(full);\n      } else {\n        return [full];\n      }\n    });\n  }\n\n  /**\n   * Legacy walk method for backwards compatibility (walks single directory)\n   */\n  walk(dir) {\n    if (!fs.existsSync(dir)) {\n      return [];\n    }\n    \n    return fs.readdirSync(dir, { withFileTypes: true }).flatMap(entry => {\n      const full = path.resolve(dir, entry.name);\n      return entry.isDirectory() ? this.walk(full) : full;\n    });\n  }\n\n  /**\n   * Categorize discovered files into source files and existing tests\n   */\n  categorizeFiles(files) {\n    const sourceFiles = [];\n    const existingTests = [];\n    \n    files.forEach(file => {\n      const ext = path.extname(file);\n      const basename = path.basename(file);\n      \n      // Skip files with invalid extensions\n      if (!this.config.VALID_EXTS.includes(ext)) {\n        return;\n      }\n      \n      // Check if this is a test file\n      if (this.isTestFile(basename)) {\n        existingTests.push(file);\n      } else {\n        // Check if this source file already has a corresponding test\n        const hasTest = this.hasCorrespondingTest(file, files);\n        if (!hasTest) {\n          sourceFiles.push(file);\n        }\n      }\n    });\n    \n    return { sourceFiles, existingTests };\n  }\n\n  /**\n   * Check if filename indicates it's a test file\n   */\n  isTestFile(filename) {\n    const testPatterns = [\n      /\\.test\\./,\n      /\\.spec\\./,\n      /_test\\./,\n      /_spec\\./,\n      /\\.e2e\\./,\n      /\\.integration\\./\n    ];\n    \n    return testPatterns.some(pattern => pattern.test(filename));\n  }\n\n  /**\n   * Check if a source file has a corresponding test file\n   */\n  hasCorrespondingTest(sourceFile, allFiles) {\n    const dir = path.dirname(sourceFile);\n    const basename = path.basename(sourceFile, path.extname(sourceFile));\n    const ext = path.extname(sourceFile);\n    \n    // Common test file patterns to look for\n    const testPatterns = [\n      `${basename}.test${ext}`,\n      `${basename}.spec${ext}`,\n      `${basename}_test${ext}`,\n      `${basename}_spec${ext}`,\n      `${basename}.test.js`,\n      `${basename}.spec.js`,\n      `${basename}.test.ts`,\n      `${basename}.spec.ts`\n    ];\n    \n    // Look for test files in the same directory\n    const sameDirectoryTests = testPatterns.map(pattern => \n      path.join(dir, pattern)\n    );\n    \n    // Look for test files in common test directories\n    const testDirectories = ['tests', 'test', '__tests__', 'spec'];\n    const testDirectoryTests = testDirectories.flatMap(testDir => {\n      const testPath = path.join(dir, testDir);\n      return testPatterns.map(pattern => path.join(testPath, pattern));\n    });\n    \n    // Check if any of these test files exist\n    const allTestPaths = [...sameDirectoryTests, ...testDirectoryTests];\n    return allTestPaths.some(testPath => \n      allFiles.some(file => path.resolve(file) === path.resolve(testPath))\n    );\n  }\n\n  /**\n   * Generate test file path based on source file and test type\n   * Supports both feature-first (tests alongside files) and traditional (separate test directory) structures\n   */\n  getRelativeTestPath(file, type = 'unit') {\n    const dir = path.dirname(file);\n    const basename = path.basename(file, path.extname(file));\n    const ext = path.extname(file);\n    \n    if (type === 'unit') {\n      // For unit tests, place them alongside the source file with matching extension\n      return path.join(dir, `${basename}.test${ext}`);\n    } else {\n      // For API/integration tests, use the configured test directory\n      // Preserve TypeScript for .ts/.tsx files, use JavaScript for others\n      const rel = path.relative(process.cwd(), file);\n      const testExt = ['.ts', '.tsx'].includes(ext) ? '.ts' : '.js';\n      return path.join(this.config.TEST_DIR, rel.replace(/\\.[tj]sx?$/, `.test${testExt}`).replace(/[\\\\/]/g, '__'));\n    }\n  }\n\n  /**\n   * Create directory if it doesn't exist\n   */\n  createDir(p) {\n    const dir = path.dirname(p);\n    if (!fs.existsSync(dir)) {\n      fs.mkdirSync(dir, { recursive: true });\n    }\n  }\n\n  /**\n   * Write file only if it doesn't already exist\n   */\n  writeIfMissing(p, content) {\n    if (!fs.existsSync(p)) {\n      this.createDir(p);\n      fs.writeFileSync(p, content, 'utf8');\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Extract imported modules from file content\n   */\n  getUsedModules(content) {\n    return [...content.matchAll(PATTERNS.imports)]\n      .map(m => m[1])\n      .filter(x => !x.startsWith('.') && !x.startsWith('/'));\n  }\n\n  /**\n   * Generate unit test content for a file - optimized for speed\n   */\n  createUnitTest(file, exports, usesQtests, mocks) {\n    const ext = path.extname(file);\n    const isTypeScript = ['.ts', '.tsx'].includes(ext);\n    const useESModules = this.isESModule || isTypeScript; // TypeScript generally uses import/export\n    \n    const lines = [`// Auto-generated unit test for ${path.basename(file)} - optimized for speed`];\n    \n    // Fast test setup - minimal imports with proper module syntax\n    if (usesQtests) {\n      if (useESModules) {\n        lines.push(`import { test } from 'qtests';`);\n      } else {\n        lines.push(`const { test } = require('qtests');`);\n      }\n    }\n    \n    // Batch mock all libraries at once for performance\n    if (mocks.length > 0) {\n      lines.push(`// Mock external dependencies for speed`);\n      mocks.forEach(lib => {\n        if (useESModules) {\n          lines.push(`jest.mock('${lib}', () => ({ __esModule: true, default: jest.fn(), ...jest.requireActual('${lib}') }));`);\n        } else {\n          lines.push(`jest.mock('${lib}', () => ({ __esModule: true, default: jest.fn(), ...jest.requireActual('${lib}') }));`);\n        }\n      });\n    }\n    \n    // Import the module under test with appropriate syntax\n    const basename = path.basename(file, path.extname(file));\n    if (useESModules) {\n      lines.push(`import * as mod from './${basename}${ext}';`, '');\n    } else {\n      lines.push(`const mod = require('./${basename}${ext}');`, '');\n    }\n    \n    // Standard Jest with optimized performance\n    lines.push(`describe('${path.basename(file)}', () => {`);\n    \n    for (const fn of exports) {\n      lines.push(`  test('${fn} works', async () => {`);\n      lines.push(`    // Fast assertion - TODO: implement specific test logic`);\n      lines.push(`    expect(typeof mod.${fn}).toBeDefined();`);\n      lines.push('  });');\n    }\n    \n    lines.push('});\\n');\n    return lines.join('\\n');\n  }\n\n  /**\n   * Generate API test content for an endpoint - optimized for speed\n   */\n  createApiTest(method, route, isTypeScript = false) {\n    const useESModules = this.isESModule || isTypeScript; // TypeScript generally uses import/export\n    const lines = [`// Auto-generated API test for ${method.toUpperCase()} ${route} - optimized for speed`];\n    \n    // Import httpTest with appropriate module syntax\n    if (useESModules) {\n      lines.push(`import { httpTest } from 'qtests/lib/envUtils';`, '');\n    } else {\n      lines.push(`const { httpTest } = require('qtests/lib/envUtils');`, '');\n    }\n    \n    // Standard Jest with optimized performance\n    lines.push(`describe('${method.toUpperCase()} ${route}', () => {`);\n    lines.push(`  // Shared app setup for performance`);\n    lines.push(`  let sharedApp;`);\n    lines.push(`  beforeAll(() => {`);\n    lines.push(`    sharedApp = httpTest.createMockApp();`);\n    lines.push(`  });`);\n    lines.push(``);\n    \n    lines.push(`  test('should succeed', async () => {`);\n    lines.push(`    // Reuse shared app for speed`);\n    lines.push(`    const app = httpTest.createMockApp();`);\n    lines.push(`    app.${method.toLowerCase()}('${route}', (req, res) => {`);\n    lines.push(`      res.statusCode = 200;`);\n    lines.push(`      res.setHeader('content-type', 'application/json');`);\n    lines.push(`      res.end(JSON.stringify({ success: true }));`);\n    lines.push(`    });`);\n    lines.push(`    `);\n    lines.push(`    const res = await httpTest.supertest(app)`);\n    lines.push(`      .${method.toLowerCase()}('${route}')`);\n    lines.push(`      .expect(200)`);\n    lines.push(`      .end();`);\n    lines.push(`    `);\n    lines.push(`    expect(res.body.success).toBe(true);`);\n    lines.push('  });', '');\n    \n    lines.push('  test(\\'should handle error responses\\', async () => {');\n    lines.push(`    const app = httpTest.createMockApp();`);\n    lines.push(`    app.${method.toLowerCase()}('${route}', (req, res) => {`);\n    lines.push(`      res.statusCode = 400;`);\n    lines.push(`      res.setHeader('content-type', 'application/json');`);\n    lines.push(`      res.end(JSON.stringify({ error: 'Bad request' }));`);\n    lines.push(`    });`);\n    lines.push(`    `);\n    lines.push(`    const res = await httpTest.supertest(app)`);\n    lines.push(`      .${method.toLowerCase()}('${route}')`);\n    lines.push(`      .expect(400)`);\n    lines.push(`      .end();`);\n    lines.push(`    `);\n    lines.push(`    expect(res.body.error).toBe('Bad request');`);\n    lines.push('  });');\n    lines.push('});\\n');\n    return lines.join('\\n');\n  }\n\n  /**\n   * Analyze a single file and generate appropriate tests\n   */\n  analyze(file) {\n    const ext = path.extname(file);\n    if (!this.config.VALID_EXTS.includes(ext)) {\n      return;\n    }\n\n    const content = fs.readFileSync(file, 'utf8');\n    const usesQtests = PATTERNS.qtests.test(content);\n    const imports = this.getUsedModules(content);\n    const mockTargets = imports.filter(i => \n      this.config.KNOWN_MOCKS.includes(i) && i !== 'qtests'\n    );\n\n    // Generate unit tests for exported functions/classes\n    const exports = [...content.matchAll(PATTERNS.exports)].map(m => m[1]);\n    if (exports.length > 0) {\n      const testPath = this.getRelativeTestPath(file, 'unit');\n      const created = this.writeIfMissing(\n        testPath, \n        this.createUnitTest(file, exports, usesQtests, mockTargets)\n      );\n      if (created) {\n        this.scanned.push({ \n          type: 'unit', \n          file: path.relative('.', testPath) \n        });\n      }\n    }\n\n    // Generate API tests for detected routes\n    const apis = [...content.matchAll(PATTERNS.api)];\n    for (const [, , method, route] of apis) {\n      const isTypeScript = ['.ts', '.tsx'].includes(ext);\n      const testPath = this.getRelativeTestPath(file, 'api')\n        .replace(/\\.test\\.[jt]s$/, `__${method.toLowerCase()}.test${isTypeScript ? '.ts' : '.js'}`);\n      const created = this.writeIfMissing(\n        testPath, \n        this.createApiTest(method, route, isTypeScript)\n      );\n      if (created) {\n        this.scanned.push({ \n          type: 'api', \n          file: path.relative('.', testPath) \n        });\n      }\n    }\n  }\n\n  /**\n   * Create Jest configuration and setup files - ES Module aware\n   */\n  scaffoldJestSetup() {\n    const useESModules = this.isESModule;\n    \n    // Generate Jest config based on module type\n    const config = useESModules ? `\n// jest.config.js - ES Module configuration\nexport default {\n  preset: 'ts-jest/presets/default-esm',\n  extensionsToTreatAsEsm: ['.ts'],\n  testEnvironment: 'node',\n  setupFilesAfterEnv: ['./tests/setup.ts'],\n  moduleFileExtensions: ['ts', 'js', 'json'],\n  roots: ['<rootDir>/src', '<rootDir>/tests'],\n  globals: {\n    'ts-jest': {\n      useESM: true\n    }\n  },\n  moduleNameMapping: {\n    '^(\\\\.{1,2}/.*)\\\\.js$': '$1'\n  }\n};\n`.trim() : `\n// jest.config.js - CommonJS configuration\nmodule.exports = {\n  preset: 'ts-jest',\n  testEnvironment: 'node',\n  setupFilesAfterEnv: ['./tests/setup.ts'],\n  moduleFileExtensions: ['ts', 'js', 'json'],\n  roots: ['<rootDir>/src', '<rootDir>/tests'],\n};\n`.trim();\n\n    // Generate setup file based on module type\n    const setup = useESModules ? `\n// tests/setup.ts - ES Module setup\nlet server;\n\nbeforeAll(async () => {\n  const { default: app } = await import('../src/app.js');\n  server = app.listen(4000, () => console.log('Test server started'));\n});\n\nafterAll(async () => {\n  if (server) server.close();\n});\n`.trim() : `\n// tests/setup.ts - CommonJS setup\nlet server;\n\nbeforeAll(async () => {\n  const app = require('../src/app').default || require('../src/app');\n  server = app.listen(4000, () => console.log('Test server started'));\n});\n\nafterAll(async () => {\n  if (server) server.close();\n});\n`.trim();\n\n    this.writeIfMissing('jest.config.js', config);\n    this.writeIfMissing('tests/setup.ts', setup);\n  }\n\n  /**\n   * Generate qtests test runner file and update package.json\n   * Creates qtests-runner.js and updates the test script in package.json\n   * Automatically handles ES module compatibility\n   */\n  generateTestRunner() {\n    const fs = require('fs');\n    const path = require('path');\n    \n    // Check if project uses ES modules\n    const isESModuleProject = this.isESModuleProject();\n    \n    // Read the existing qtests-runner.js as template\n    const templatePath = path.join(__dirname, '..', 'qtests-runner.js');\n    let runnerContent;\n    \n    if (fs.existsSync(templatePath)) {\n      runnerContent = fs.readFileSync(templatePath, 'utf8');\n      \n      // Convert CommonJS to ES modules if needed\n      if (isESModuleProject) {\n        runnerContent = this.convertToESModule(runnerContent);\n      }\n    } else {\n      // Generate appropriate template based on module type\n      if (isESModuleProject) {\n        runnerContent = this.generateESModuleTemplate();\n      } else {\n        runnerContent = this.generateCommonJSTemplate();\n      }\n    }\n    \n    const created = this.writeIfMissing('qtests-runner.js', runnerContent);\n    \n    if (created) {\n      this.updatePackageJsonTestScript();\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Check if the current project uses ES modules\n   */\n  isESModuleProject() {\n    const fs = require('fs');\n    const path = require('path');\n    \n    try {\n      const packagePath = path.join(process.cwd(), 'package.json');\n      if (!fs.existsSync(packagePath)) return false;\n      \n      const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n      return packageJson.type === 'module';\n    } catch {\n      return false;\n    }\n  }\n\n  /**\n   * Convert CommonJS code to ES module syntax\n   */\n  convertToESModule(commonJSCode) {\n    return commonJSCode\n      .replace(/const fs = require\\('fs'\\);/, \"import fs from 'fs';\")\n      .replace(/const path = require\\('path'\\);/, \"import path from 'path';\")\n      .replace(/const { spawn } = require\\('child_process'\\);/, \"import { spawn } from 'child_process';\")\n      .replace(/const os = require\\('os'\\);/, \"import os from 'os';\")\n      .replace(/require\\.main === module/, \"import.meta.url === `file://${process.argv[1]}`\")\n      .replace(/module\\.exports = TestRunner;/, \"export default TestRunner;\")\n      .replace(/\\/\\/ Generated as: qtests-runner\\.js/, \"// Generated as: qtests-runner.js (ES Module Compatible)\")\n      .replace(/--testPathPattern/g, \"--testPathPattern\"); // Ensure correct Jest CLI parameter in ES modules\n  }\n\n  /**\n   * Generate ES module template\n   */\n  generateESModuleTemplate() {\n    return `// qtests Test Runner - Auto-generated by qtests (ES Module)\n// This file discovers and runs all tests in your project\n\nimport fs from 'fs';\nimport path from 'path';\nimport { spawn } from 'child_process';\nimport os from 'os';\n\n// Basic ES module test runner implementation\nconsole.log('üß™ Basic qtests Test Runner (ES Module)');\nconsole.log('Run tests with: npm test');\n`;\n  }\n\n  /**\n   * Generate CommonJS template  \n   */\n  generateCommonJSTemplate() {\n    return `// qtests Test Runner - Auto-generated by qtests\n// This file discovers and runs all tests in your project\n\nconst fs = require('fs');\nconst path = require('path');\nconst { spawn } = require('child_process');\nconst os = require('os');\n\n// Basic CommonJS test runner implementation\nconsole.log('üß™ Basic qtests Test Runner');\nconsole.log('Run tests with: npm test');\n`;\n  }\n\n  /**\n   * Update package.json test script to use qtests-runner.cjs (ES module compatible)\n   */\n  updatePackageJsonTestScript() {\n    try {\n      const packagePath = path.join(process.cwd(), 'package.json');\n      if (!fs.existsSync(packagePath)) {\n        console.log('‚ö†Ô∏è  package.json not found, skipping test script update');\n        return false;\n      }\n\n      const packageJson = JSON.parse(fs.readFileSync(packagePath, 'utf8'));\n      \n      // Update test script - use .cjs extension for ES module compatibility\n      if (!packageJson.scripts) {\n        packageJson.scripts = {};\n      }\n      packageJson.scripts.test = 'node qtests-runner.js';\n      \n      fs.writeFileSync(packagePath, JSON.stringify(packageJson, null, 2), 'utf8');\n      console.log('‚úÖ Updated package.json test script to use qtests-runner.js');\n      return true;\n    } catch (error) {\n      console.log('‚ö†Ô∏è  Could not update package.json:', error.message);\n      return false;\n    }\n  }\n\n  /**\n   * Main generator function - comprehensively scans project for test generation\n   */\n  generate() {\n    console.log(`Scanning project for test generation...`);\n    \n    // Walk entire project to discover all source files and existing tests\n    const projectFiles = this.walkProject();\n    const { sourceFiles, existingTests } = this.categorizeFiles(projectFiles);\n    \n    console.log(`Found ${sourceFiles.length} source files and ${existingTests.length} existing tests`);\n    \n    // Analyze each source file for test generation\n    sourceFiles.forEach(file => this.analyze(file));\n    \n    this.scaffoldJestSetup();\n\n    if (this.scanned.length === 0) {\n      console.log('‚úÖ All tests already exist. Nothing to generate.');\n    } else {\n      console.log(`‚úÖ Generated ${this.scanned.length} new test files:`);\n      this.scanned.forEach(({ type, file }) => {\n        const label = type === 'unit' ? 'üì¶ Unit' : 'üåê API';\n        console.log(`  ${label} ‚Üí ${file}`);\n      });\n    }\n\n    return this.scanned;\n  }\n\n  /**\n   * Get generation results\n   */\n  getResults() {\n    return this.scanned;\n  }\n}\n\nmodule.exports = { TestGenerator, DEFAULT_CONFIG, PATTERNS };"],"mappings":"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","ignoreList":[]}