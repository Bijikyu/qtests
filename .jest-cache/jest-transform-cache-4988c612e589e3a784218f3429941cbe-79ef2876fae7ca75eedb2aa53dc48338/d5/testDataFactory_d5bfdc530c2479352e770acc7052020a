aed30261e518ddef17555cb1127b3c9d
/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class focuses solely on test data creation and management.
 * It eliminates duplicate test data creation across test files.
 */

const {
  logStart,
  logReturn
} = require('../../lib/logUtils');

/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class eliminates duplicate test data creation across test files
 * by providing standardized factory methods for common test entities.
 * 
 * PARALLEL TEST SAFETY:
 * - Uses process.hrtime.bigint() for unique IDs to avoid race conditions
 * - No shared static state between parallel test executions
 * - Each test gets unique data that won't conflict with other tests
 */
class TestDataFactory {
  static counter = 0;

  /**
   * Gets next unique ID for test data (parallel-safe when needed)
   * 
   * @returns {string|number} Unique identifier - simple counter for normal tests, complex for parallel
   */
  static nextId() {
    // Check if we're in a parallel test environment that needs complex IDs
    const needsComplexId = process.env.JEST_WORKER_ID || process.env.NODE_ENV === 'parallel-test' || process.argv.includes('--maxWorkers') && process.argv.includes('--parallel');
    if (!needsComplexId) {
      // Normal testing - use simple counter for expected format
      return ++this.counter;
    }

    // Parallel testing - use complex unique identifier
    const hrTime = process.hrtime.bigint();
    const random = Math.random().toString(36).substr(2, 9);
    return `${hrTime}-${random}`;
  }

  /**
   * Creates a test user with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test user object
   */
  static createUser(overrides = {}) {
    logStart('TestDataFactory.createUser', overrides);
    const id = this.nextId();
    const user = {
      id: `user-${id}`,
      username: `testuser${id}`,
      email: `test${id}@example.com`,
      password: `hashedpassword${id}`,
      firstName: 'Test',
      lastName: `User${id}`,
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createUser', user);
    return user;
  }

  /**
   * Creates a test API key with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test API key object
   */
  static createApiKey(overrides = {}) {
    logStart('TestDataFactory.createApiKey', overrides);
    const id = this.nextId();
    const apiKey = {
      id: `key-${id}`,
      key: `test-api-key-${id}-${Math.random().toString(36).substr(2, 9)}`,
      name: `Test API Key ${id}`,
      userId: `user-${id}`,
      isActive: true,
      permissions: ['read', 'write'],
      createdAt: new Date(),
      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
      // 30 days
      ...overrides
    };
    logReturn('TestDataFactory.createApiKey', apiKey);
    return apiKey;
  }

  /**
   * Creates a test log entry with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test log entry object
   */
  static createLogEntry(overrides = {}) {
    logStart('TestDataFactory.createLogEntry', overrides);
    const id = this.nextId();
    const logEntry = {
      id: `log-${id}`,
      message: `Test log message ${id}`,
      level: 'info',
      timestamp: new Date(),
      userId: `user-${id}`,
      source: 'test-application',
      metadata: {
        testId: id,
        environment: 'test'
      },
      ...overrides
    };
    logReturn('TestDataFactory.createLogEntry', logEntry);
    return logEntry;
  }

  /**
   * Creates a test configuration object with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test configuration object
   */
  static createConfig(overrides = {}) {
    logStart('TestDataFactory.createConfig', overrides);
    const id = this.nextId();
    const config = {
      id: `config-${id}`,
      name: `Test Configuration ${id}`,
      value: `test-value-${id}`,
      environment: 'test',
      type: 'string',
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createConfig', config);
    return config;
  }

  /**
   * Creates multiple test entities using a factory function
   * 
   * @param {Function} factoryFn - Factory function to create single entities
   * @param {number} count - Number of entities to create
   * @param {Object} baseOverrides - Base overrides applied to all entities
   * @returns {Array} Array of created test entities
   */
  static createMultiple(factoryFn, count = 10, baseOverrides = {}) {
    logStart('TestDataFactory.createMultiple', {
      count,
      baseOverrides
    });
    const entities = [];
    for (let i = 0; i < count; i++) {
      const entityOverrides = {
        ...baseOverrides
      };
      entities.push(factoryFn.call(this, entityOverrides));
    }
    logReturn('TestDataFactory.createMultiple', `${entities.length} entities`);
    return entities;
  }

  // Instance method wrappers for compatibility with TestSuiteBuilder
  createUser(overrides) {
    return TestDataFactory.createUser(overrides);
  }
  createApiKey(overrides) {
    return TestDataFactory.createApiKey(overrides);
  }
  createLogEntry(overrides) {
    return TestDataFactory.createLogEntry(overrides);
  }
  createConfig(overrides) {
    return TestDataFactory.createConfig(overrides);
  }
  createMultiple(factoryFn, count, baseOverrides) {
    return TestDataFactory.createMultiple(factoryFn.bind(this), count, baseOverrides);
  }

  // Static method for resetting counter
  static reset() {
    this.counter = 0;
  }

  /**
   * Creates related entities with relationships
   * 
   * @param {Object} config - Configuration for creating related entities
   * @returns {Object} Object with created entities and relationships
   */
  static createRelatedEntities(config) {
    logStart('TestDataFactory.createRelatedEntities', config);
    try {
      const {
        userCount = 1,
        apiKeysPerUser = 1,
        logsPerUser = 1
      } = config;
      const users = [];
      const apiKeys = [];
      const logs = [];

      // Create users first
      for (let i = 0; i < userCount; i++) {
        users.push(this.createUser());
      }

      // Create API keys for each user
      users.forEach(user => {
        for (let i = 0; i < apiKeysPerUser; i++) {
          apiKeys.push(this.createApiKey({
            userId: user.id,
            key: `${user.username}-key-${i + 1}`
          }));
        }
      });

      // Create logs for each user
      users.forEach(user => {
        for (let i = 0; i < logsPerUser; i++) {
          logs.push(this.createLogEntry({
            userId: user.id,
            endpoint: `/api/users/${user.id}/data-${i + 1}`
          }));
        }
      });
      const result = {
        users,
        apiKeys,
        logs,
        relationships: {
          userToApiKeys: users.reduce((acc, user) => {
            acc[user.id] = apiKeys.filter(key => key.userId === user.id);
            return acc;
          }, {}),
          userToLogs: users.reduce((acc, user) => {
            acc[user.id] = logs.filter(log => log.userId === user.id);
            return acc;
          }, {})
        }
      };
      logReturn('TestDataFactory.createRelatedEntities', `created ${users.length} users, ${apiKeys.length} API keys, ${logs.length} logs`);
      return result;
    } catch (error) {
      logReturn('TestDataFactory.createRelatedEntities', `error: ${error.message}`);
      throw error;
    }
  }
}
module.exports = {
  TestDataFactory
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dTdGFydCIsImxvZ1JldHVybiIsInJlcXVpcmUiLCJUZXN0RGF0YUZhY3RvcnkiLCJjb3VudGVyIiwibmV4dElkIiwibmVlZHNDb21wbGV4SWQiLCJwcm9jZXNzIiwiZW52IiwiSkVTVF9XT1JLRVJfSUQiLCJOT0RFX0VOViIsImFyZ3YiLCJpbmNsdWRlcyIsImhyVGltZSIsImhydGltZSIsImJpZ2ludCIsInJhbmRvbSIsIk1hdGgiLCJ0b1N0cmluZyIsInN1YnN0ciIsImNyZWF0ZVVzZXIiLCJvdmVycmlkZXMiLCJpZCIsInVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImlzQWN0aXZlIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImNyZWF0ZUFwaUtleSIsImFwaUtleSIsImtleSIsIm5hbWUiLCJ1c2VySWQiLCJwZXJtaXNzaW9ucyIsImV4cGlyZXNBdCIsIm5vdyIsImNyZWF0ZUxvZ0VudHJ5IiwibG9nRW50cnkiLCJtZXNzYWdlIiwibGV2ZWwiLCJ0aW1lc3RhbXAiLCJzb3VyY2UiLCJtZXRhZGF0YSIsInRlc3RJZCIsImVudmlyb25tZW50IiwiY3JlYXRlQ29uZmlnIiwiY29uZmlnIiwidmFsdWUiLCJ0eXBlIiwiY3JlYXRlTXVsdGlwbGUiLCJmYWN0b3J5Rm4iLCJjb3VudCIsImJhc2VPdmVycmlkZXMiLCJlbnRpdGllcyIsImkiLCJlbnRpdHlPdmVycmlkZXMiLCJwdXNoIiwiY2FsbCIsImxlbmd0aCIsImJpbmQiLCJyZXNldCIsImNyZWF0ZVJlbGF0ZWRFbnRpdGllcyIsInVzZXJDb3VudCIsImFwaUtleXNQZXJVc2VyIiwibG9nc1BlclVzZXIiLCJ1c2VycyIsImFwaUtleXMiLCJsb2dzIiwiZm9yRWFjaCIsImVuZHBvaW50IiwicmVzdWx0IiwicmVsYXRpb25zaGlwcyIsInVzZXJUb0FwaUtleXMiLCJyZWR1Y2UiLCJhY2MiLCJmaWx0ZXIiLCJ1c2VyVG9Mb2dzIiwibG9nIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidGVzdERhdGFGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBEYXRhIEZhY3RvcnkgZm9yIENyZWF0aW5nIFJlYWxpc3RpYyBUZXN0IEVudGl0aWVzXG4gKiBcbiAqIFRoaXMgY2xhc3MgZm9jdXNlcyBzb2xlbHkgb24gdGVzdCBkYXRhIGNyZWF0aW9uIGFuZCBtYW5hZ2VtZW50LlxuICogSXQgZWxpbWluYXRlcyBkdXBsaWNhdGUgdGVzdCBkYXRhIGNyZWF0aW9uIGFjcm9zcyB0ZXN0IGZpbGVzLlxuICovXG5cbmNvbnN0IHsgbG9nU3RhcnQsIGxvZ1JldHVybiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2xvZ1V0aWxzJyk7XG5cbi8qKlxuICogVGVzdCBEYXRhIEZhY3RvcnkgZm9yIENyZWF0aW5nIFJlYWxpc3RpYyBUZXN0IEVudGl0aWVzXG4gKiBcbiAqIFRoaXMgY2xhc3MgZWxpbWluYXRlcyBkdXBsaWNhdGUgdGVzdCBkYXRhIGNyZWF0aW9uIGFjcm9zcyB0ZXN0IGZpbGVzXG4gKiBieSBwcm92aWRpbmcgc3RhbmRhcmRpemVkIGZhY3RvcnkgbWV0aG9kcyBmb3IgY29tbW9uIHRlc3QgZW50aXRpZXMuXG4gKiBcbiAqIFBBUkFMTEVMIFRFU1QgU0FGRVRZOlxuICogLSBVc2VzIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpIGZvciB1bmlxdWUgSURzIHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICogLSBObyBzaGFyZWQgc3RhdGljIHN0YXRlIGJldHdlZW4gcGFyYWxsZWwgdGVzdCBleGVjdXRpb25zXG4gKiAtIEVhY2ggdGVzdCBnZXRzIHVuaXF1ZSBkYXRhIHRoYXQgd29uJ3QgY29uZmxpY3Qgd2l0aCBvdGhlciB0ZXN0c1xuICovXG5jbGFzcyBUZXN0RGF0YUZhY3Rvcnkge1xuICBzdGF0aWMgY291bnRlciA9IDA7XG5cbiAgLyoqXG4gICAqIEdldHMgbmV4dCB1bmlxdWUgSUQgZm9yIHRlc3QgZGF0YSAocGFyYWxsZWwtc2FmZSB3aGVuIG5lZWRlZClcbiAgICogXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8bnVtYmVyfSBVbmlxdWUgaWRlbnRpZmllciAtIHNpbXBsZSBjb3VudGVyIGZvciBub3JtYWwgdGVzdHMsIGNvbXBsZXggZm9yIHBhcmFsbGVsXG4gICAqL1xuICBzdGF0aWMgbmV4dElkKCkge1xuICAgIC8vIENoZWNrIGlmIHdlJ3JlIGluIGEgcGFyYWxsZWwgdGVzdCBlbnZpcm9ubWVudCB0aGF0IG5lZWRzIGNvbXBsZXggSURzXG4gICAgY29uc3QgbmVlZHNDb21wbGV4SWQgPSBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwYXJhbGxlbC10ZXN0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAocHJvY2Vzcy5hcmd2LmluY2x1ZGVzKCctLW1heFdvcmtlcnMnKSAmJiBwcm9jZXNzLmFyZ3YuaW5jbHVkZXMoJy0tcGFyYWxsZWwnKSk7XG4gICAgXG4gICAgaWYgKCFuZWVkc0NvbXBsZXhJZCkge1xuICAgICAgLy8gTm9ybWFsIHRlc3RpbmcgLSB1c2Ugc2ltcGxlIGNvdW50ZXIgZm9yIGV4cGVjdGVkIGZvcm1hdFxuICAgICAgcmV0dXJuICsrdGhpcy5jb3VudGVyO1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJhbGxlbCB0ZXN0aW5nIC0gdXNlIGNvbXBsZXggdW5pcXVlIGlkZW50aWZpZXJcbiAgICBjb25zdCBoclRpbWUgPSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcbiAgICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgcmV0dXJuIGAke2hyVGltZX0tJHtyYW5kb219YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCB1c2VyIHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgdXNlciBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVVc2VyKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVVc2VyJywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgdXNlciA9IHtcbiAgICAgIGlkOiBgdXNlci0ke2lkfWAsXG4gICAgICB1c2VybmFtZTogYHRlc3R1c2VyJHtpZH1gLFxuICAgICAgZW1haWw6IGB0ZXN0JHtpZH1AZXhhbXBsZS5jb21gLFxuICAgICAgcGFzc3dvcmQ6IGBoYXNoZWRwYXNzd29yZCR7aWR9YCxcbiAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgbGFzdE5hbWU6IGBVc2VyJHtpZH1gLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVVzZXInLCB1c2VyKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCBBUEkga2V5IHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgQVBJIGtleSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVBcGlLZXkob3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUFwaUtleScsIG92ZXJyaWRlcyk7XG4gICAgXG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRJZCgpO1xuICAgIGNvbnN0IGFwaUtleSA9IHtcbiAgICAgIGlkOiBga2V5LSR7aWR9YCxcbiAgICAgIGtleTogYHRlc3QtYXBpLWtleS0ke2lkfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgbmFtZTogYFRlc3QgQVBJIEtleSAke2lkfWAsXG4gICAgICB1c2VySWQ6IGB1c2VyLSR7aWR9YCxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgcGVybWlzc2lvbnM6IFsncmVhZCcsICd3cml0ZSddLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMzAgZGF5c1xuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfTtcbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVBcGlLZXknLCBhcGlLZXkpO1xuICAgIHJldHVybiBhcGlLZXk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlc3QgbG9nIGVudHJ5IHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgbG9nIGVudHJ5IG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUxvZ0VudHJ5KG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVMb2dFbnRyeScsIG92ZXJyaWRlcyk7XG4gICAgXG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRJZCgpO1xuICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgaWQ6IGBsb2ctJHtpZH1gLFxuICAgICAgbWVzc2FnZTogYFRlc3QgbG9nIG1lc3NhZ2UgJHtpZH1gLFxuICAgICAgbGV2ZWw6ICdpbmZvJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHVzZXJJZDogYHVzZXItJHtpZH1gLFxuICAgICAgc291cmNlOiAndGVzdC1hcHBsaWNhdGlvbicsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0ZXN0SWQ6IGlkLFxuICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnXG4gICAgICB9LFxuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfTtcbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVMb2dFbnRyeScsIGxvZ0VudHJ5KTtcbiAgICByZXR1cm4gbG9nRW50cnk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlc3QgY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCByZWFsaXN0aWMgcHJvcGVydGllc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyAtIFByb3BlcnRpZXMgdG8gb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICogQHJldHVybnMge09iamVjdH0gVGVzdCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUNvbmZpZyhvdmVycmlkZXMgPSB7fSkge1xuICAgIGxvZ1N0YXJ0KCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQ29uZmlnJywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgaWQ6IGBjb25maWctJHtpZH1gLFxuICAgICAgbmFtZTogYFRlc3QgQ29uZmlndXJhdGlvbiAke2lkfWAsXG4gICAgICB2YWx1ZTogYHRlc3QtdmFsdWUtJHtpZH1gLFxuICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUNvbmZpZycsIGNvbmZpZyk7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG11bHRpcGxlIHRlc3QgZW50aXRpZXMgdXNpbmcgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmYWN0b3J5Rm4gLSBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBzaW5nbGUgZW50aXRpZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IC0gTnVtYmVyIG9mIGVudGl0aWVzIHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gYmFzZU92ZXJyaWRlcyAtIEJhc2Ugb3ZlcnJpZGVzIGFwcGxpZWQgdG8gYWxsIGVudGl0aWVzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgY3JlYXRlZCB0ZXN0IGVudGl0aWVzXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLCBjb3VudCA9IDEwLCBiYXNlT3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZU11bHRpcGxlJywgeyBjb3VudCwgYmFzZU92ZXJyaWRlcyB9KTtcbiAgICBcbiAgICBjb25zdCBlbnRpdGllcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgZW50aXR5T3ZlcnJpZGVzID0geyAuLi5iYXNlT3ZlcnJpZGVzIH07XG4gICAgICBlbnRpdGllcy5wdXNoKGZhY3RvcnlGbi5jYWxsKHRoaXMsIGVudGl0eU92ZXJyaWRlcykpO1xuICAgIH1cbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVNdWx0aXBsZScsIGAke2VudGl0aWVzLmxlbmd0aH0gZW50aXRpZXNgKTtcbiAgICByZXR1cm4gZW50aXRpZXM7XG4gIH1cblxuICAvLyBJbnN0YW5jZSBtZXRob2Qgd3JhcHBlcnMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBUZXN0U3VpdGVCdWlsZGVyXG4gIGNyZWF0ZVVzZXIob3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVVc2VyKG92ZXJyaWRlcyk7XG4gIH1cblxuICBjcmVhdGVBcGlLZXkob3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVBcGlLZXkob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIGNyZWF0ZUxvZ0VudHJ5KG92ZXJyaWRlcykge1xuICAgIHJldHVybiBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlTG9nRW50cnkob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIGNyZWF0ZUNvbmZpZyhvdmVycmlkZXMpIHtcbiAgICByZXR1cm4gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUNvbmZpZyhvdmVycmlkZXMpO1xuICB9XG5cbiAgY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLCBjb3VudCwgYmFzZU92ZXJyaWRlcykge1xuICAgIHJldHVybiBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLmJpbmQodGhpcyksIGNvdW50LCBiYXNlT3ZlcnJpZGVzKTtcbiAgfVxuXG4gIC8vIFN0YXRpYyBtZXRob2QgZm9yIHJlc2V0dGluZyBjb3VudGVyXG4gIHN0YXRpYyByZXNldCgpIHtcbiAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgcmVsYXRlZCBlbnRpdGllcyB3aXRoIHJlbGF0aW9uc2hpcHNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBDb25maWd1cmF0aW9uIGZvciBjcmVhdGluZyByZWxhdGVkIGVudGl0aWVzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCB3aXRoIGNyZWF0ZWQgZW50aXRpZXMgYW5kIHJlbGF0aW9uc2hpcHNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVSZWxhdGVkRW50aXRpZXMoY29uZmlnKSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBjb25maWcpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHVzZXJDb3VudCA9IDEsXG4gICAgICAgIGFwaUtleXNQZXJVc2VyID0gMSxcbiAgICAgICAgbG9nc1BlclVzZXIgPSAxXG4gICAgICB9ID0gY29uZmlnO1xuICAgICAgXG4gICAgICBjb25zdCB1c2VycyA9IFtdO1xuICAgICAgY29uc3QgYXBpS2V5cyA9IFtdO1xuICAgICAgY29uc3QgbG9ncyA9IFtdO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgdXNlcnMgZmlyc3RcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlckNvdW50OyBpKyspIHtcbiAgICAgICAgdXNlcnMucHVzaCh0aGlzLmNyZWF0ZVVzZXIoKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBBUEkga2V5cyBmb3IgZWFjaCB1c2VyXG4gICAgICB1c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFwaUtleXNQZXJVc2VyOyBpKyspIHtcbiAgICAgICAgICBhcGlLZXlzLnB1c2godGhpcy5jcmVhdGVBcGlLZXkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAga2V5OiBgJHt1c2VyLnVzZXJuYW1lfS1rZXktJHtpICsgMX1gXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGxvZ3MgZm9yIGVhY2ggdXNlclxuICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2dzUGVyVXNlcjsgaSsrKSB7XG4gICAgICAgICAgbG9ncy5wdXNoKHRoaXMuY3JlYXRlTG9nRW50cnkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3VzZXJzLyR7dXNlci5pZH0vZGF0YS0ke2kgKyAxfWBcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHVzZXJzLFxuICAgICAgICBhcGlLZXlzLFxuICAgICAgICBsb2dzLFxuICAgICAgICByZWxhdGlvbnNoaXBzOiB7XG4gICAgICAgICAgdXNlclRvQXBpS2V5czogdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICAgICAgICAgIGFjY1t1c2VyLmlkXSA9IGFwaUtleXMuZmlsdGVyKGtleSA9PiBrZXkudXNlcklkID09PSB1c2VyLmlkKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHVzZXJUb0xvZ3M6IHVzZXJzLnJlZHVjZSgoYWNjLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICBhY2NbdXNlci5pZF0gPSBsb2dzLmZpbHRlcihsb2cgPT4gbG9nLnVzZXJJZCA9PT0gdXNlci5pZCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sIHt9KVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgY3JlYXRlZCAke3VzZXJzLmxlbmd0aH0gdXNlcnMsICR7YXBpS2V5cy5sZW5ndGh9IEFQSSBrZXlzLCAke2xvZ3MubGVuZ3RofSBsb2dzYCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVGVzdERhdGFGYWN0b3J5XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07RUFBRUEsUUFBUTtFQUFFQztBQUFVLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsZUFBZSxDQUFDO0VBQ3BCLE9BQU9DLE9BQU8sR0FBRyxDQUFDOztFQUVsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0MsTUFBTUEsQ0FBQSxFQUFHO0lBQ2Q7SUFDQSxNQUFNQyxjQUFjLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLElBQzNCRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0UsUUFBUSxLQUFLLGVBQWUsSUFDdkNILE9BQU8sQ0FBQ0ksSUFBSSxDQUFDQyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUlMLE9BQU8sQ0FBQ0ksSUFBSSxDQUFDQyxRQUFRLENBQUMsWUFBWSxDQUFFO0lBRXBHLElBQUksQ0FBQ04sY0FBYyxFQUFFO01BQ25CO01BQ0EsT0FBTyxFQUFFLElBQUksQ0FBQ0YsT0FBTztJQUN2Qjs7SUFFQTtJQUNBLE1BQU1TLE1BQU0sR0FBR04sT0FBTyxDQUFDTyxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLE1BQU1DLE1BQU0sR0FBR0MsSUFBSSxDQUFDRCxNQUFNLENBQUMsQ0FBQyxDQUFDRSxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUNDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELE9BQU8sR0FBR04s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