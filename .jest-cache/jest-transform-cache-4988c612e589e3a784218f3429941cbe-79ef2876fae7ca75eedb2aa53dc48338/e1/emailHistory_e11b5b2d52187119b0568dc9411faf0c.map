{"version":3,"names":["logStart","logReturn","require","emailHistory","clearEmailHistory","cleared","length","getEmailHistory","history","addToHistory","emailData","push","module","exports"],"sources":["emailHistory.js"],"sourcesContent":["/**\n * Email History Management Utility\n * \n * This module manages email history for testing and verification purposes.\n * It provides a clean separation of history management from email sending logic.\n */\n\nconst { logStart, logReturn } = require('../../lib/logUtils');\n\n// In-memory storage for email history during testing\nconst emailHistory = [];\n\n/**\n * Clear email history for test isolation\n * \n * This function provides a clean slate for each test by removing all previously\n * mocked email records. Essential for test isolation and preventing test\n * interference when running multiple email-related test suites.\n * \n * @returns {number} Number of emails cleared from history\n */\nfunction clearEmailHistory() {\n  logStart('clearEmailHistory');\n  const cleared = emailHistory.length;\n  emailHistory.length = 0;\n  logReturn('clearEmailHistory', cleared);\n  return cleared;\n}\n\n/**\n * Get email history for test verification\n * \n * This function provides access to all emails that have been \"sent\" through\n * the sendEmail function. Returns a copy to prevent accidental modification.\n * \n * @returns {Array} Copy of all emails in chronological order\n */\nfunction getEmailHistory() {\n  logStart('getEmailHistory');\n  const history = [...emailHistory];\n  logReturn('getEmailHistory', `${history.length} emails`);\n  return history;\n}\n\n/**\n * Add email to history\n * \n * Internal function to add an email to the history tracking.\n * \n * @param {Object} emailData - Email data to add to history\n */\nfunction addToHistory(emailData) {\n  emailHistory.push(emailData);\n}\n\nmodule.exports = {\n  clearEmailHistory,\n  getEmailHistory,\n  addToHistory,\n  emailHistory // Export for direct access in advanced testing scenarios\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA,QAAQ;EAAEC;AAAU,CAAC,GAAGC,OAAO,CAAC,oBAAoB,CAAC;;AAE7D;AACA,MAAMC,YAAY,GAAG,EAAE;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,iBAAiBA,CAAA,EAAG;EAC3BJ,QAAQ,CAAC,mBAAmB,CAAC;EAC7B,MAAMK,OAAO,GAAGF,YAAY,CAACG,MAAM;EACnCH,YAAY,CAACG,MAAM,GAAG,CAAC;EACvBL,SAAS,CAAC,mBAAmB,EAAEI,OAAO,CAAC;EACvC,OAAOA,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASE,eAAeA,CAAA,EAAG;EACzBP,QAAQ,CAAC,iBAAiB,CAAC;EAC3B,MAAMQ,OAAO,GAAG,CAAC,GAAGL,YAAY,CAAC;EACjCF,SAAS,CAAC,iBAAiB,EAAE,GAAGO,OAAO,CAACF,MAAM,SAAS,CAAC;EACxD,OAAOE,OAAO;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,YAAYA,CAACC,SAAS,EAAE;EAC/BP,YAAY,CAACQ,IAAI,CAACD,SAAS,CAAC;AAC9B;AAEAE,MAAM,CAACC,OAAO,GAAG;EACfT,iBAAiB;EACjBG,eAAe;EACfE,YAAY;EACZN,YAAY,CAAC;AACf,CAAC","ignoreList":[]}