{"version":3,"names":["BaseMockModel","require","mockLogs","ApiLog","constructor","data","timestamp","Date","level","getCollection","find","query","console","log","JSON","stringify","filtered","allowedApi","filter","l","chain","sort","skip","limit","lean","length","Promise","resolve","module","exports"],"sources":["apiLogModel.js"],"sourcesContent":["/**\n * API Log Model\n * \n * This class focuses solely on API log model functionality and behavior.\n * It extends BaseMockModel with logging-specific methods and properties.\n */\n\nconst { BaseMockModel } = require('./baseMockModel');\n\n// Legacy array for backwards compatibility\nconst mockLogs = [];\n\n/**\n * API Log Model Class\n * \n * Provides Mongoose-compatible API log model for testing scenarios.\n * Includes logging-specific validation and query methods.\n */\nclass ApiLog extends BaseMockModel {\n  constructor(data) {\n    super(data);\n    // Set default values specific to ApiLog\n    if (!this.timestamp) this.timestamp = new Date();\n    if (!this.level) this.level = 'info';\n  }\n  \n  // Override getCollection to use legacy array for backwards compatibility\n  static getCollection() {\n    return mockLogs;\n  }\n  \n  // Legacy methods for backward compatibility\n  static find(query = {}) {\n    console.log(`ApiLog.find is running with ${JSON.stringify(query)}`);\n    const filtered = query.allowedApi \n      ? mockLogs.filter(l => l.allowedApi === query.allowedApi) \n      : mockLogs;\n    \n    const chain = { data: filtered };\n    chain.sort = () => chain;\n    chain.skip = () => chain;\n    chain.limit = () => chain;\n    chain.lean = () => {\n      console.log(`ApiLog.find.lean is returning ${chain.data.length} logs`);\n      return Promise.resolve(chain.data);\n    };\n    return chain;\n  }\n}\n\nmodule.exports = {\n  ApiLog,\n  mockLogs\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAc,CAAC,GAAGC,OAAO,CAAC,iBAAiB,CAAC;;AAEpD;AACA,MAAMC,QAAQ,GAAG,EAAE;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,MAAM,SAASH,aAAa,CAAC;EACjCI,WAAWA,CAACC,IAAI,EAAE;IAChB,KAAK,CAACA,IAAI,CAAC;IACX;IACA,IAAI,CAAC,IAAI,CAACC,SAAS,EAAE,IAAI,CAACA,SAAS,GAAG,IAAIC,IAAI,CAAC,CAAC;IAChD,IAAI,CAAC,IAAI,CAACC,KAAK,EAAE,IAAI,CAACA,KAAK,GAAG,MAAM;EACtC;;EAEA;EACA,OAAOC,aAAaA,CAAA,EAAG;IACrB,OAAOP,QAAQ;EACjB;;EAEA;EACA,OAAOQ,IAAIA,CAACC,KAAK,GAAG,CAAC,CAAC,EAAE;IACtBC,OAAO,CAACC,GAAG,CAAC,+BAA+BC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAAC,EAAE,CAAC;IACnE,MAAMK,QAAQ,GAAGL,KAAK,CAACM,UAAU,GAC7Bf,QAAQ,CAACgB,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACF,UAAU,KAAKN,KAAK,CAACM,UAAU,CAAC,GACvDf,QAAQ;IAEZ,MAAMkB,KAAK,GAAG;MAAEf,IAAI,EAAEW;IAAS,CAAC;IAChCI,KAAK,CAACC,IAAI,GAAG,MAAMD,KAAK;IACxBA,KAAK,CAACE,IAAI,GAAG,MAAMF,KAAK;IACxBA,KAAK,CAACG,KAAK,GAAG,MAAMH,KAAK;IACzBA,KAAK,CAACI,IAAI,GAAG,MAAM;MACjBZ,OAAO,CAACC,GAAG,CAAC,iCAAiCO,KAAK,CAACf,IAAI,CAACoB,MAAM,OAAO,CAAC;MACtE,OAAOC,OAAO,CAACC,OAAO,CAACP,KAAK,CAACf,IAAI,CAAC;IACpC,CAAC;IACD,OAAOe,KAAK;EACd;AACF;AAEAQ,MAAM,CAACC,OAAO,GAAG;EACf1B,MAAM;EACND;AACF,CAAC","ignoreList":[]}