9fa40a73d490f172b49767cba71dc9c2
/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class focuses solely on test data creation and management.
 * It eliminates duplicate test data creation across test files.
 */

const {
  logStart,
  logReturn
} = require('../../lib/logUtils');

/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class eliminates duplicate test data creation across test files
 * by providing standardized factory methods for common test entities.
 * 
 * PARALLEL TEST SAFETY:
 * - Uses process.hrtime.bigint() for unique IDs to avoid race conditions
 * - No shared static state between parallel test executions
 * - Each test gets unique data that won't conflict with other tests
 */
class TestDataFactory {
  static counter = 0;

  /**
   * Gets next unique ID for test data (parallel-safe when needed)
   * 
   * @returns {string|number} Unique identifier - simple counter for normal tests, complex for parallel
   */
  static nextId() {
    // Only use complex IDs in very specific parallel execution scenarios
    const isJestParallel = process.env.JEST_WORKER_ID && process.env.JEST_WORKER_ID !== '1';
    const isExplicitParallel = process.env.QTESTS_PARALLEL_MODE === 'true';
    if (!isJestParallel && !isExplicitParallel) {
      // Normal testing - use simple counter for expected format
      return ++this.counter;
    }

    // Parallel testing - use complex unique identifier
    const hrTime = process.hrtime.bigint();
    const random = Math.random().toString(36).substr(2, 9);
    return `${hrTime}-${random}`;
  }

  /**
   * Creates a test user with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test user object
   */
  static createUser(overrides = {}) {
    logStart('TestDataFactory.createUser', overrides);
    const id = this.nextId();
    const user = {
      id: `user-${id}`,
      username: `testuser${id}`,
      email: `test${id}@example.com`,
      password: `hashedpassword${id}`,
      firstName: 'Test',
      lastName: `User${id}`,
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createUser', user);
    return user;
  }

  /**
   * Creates a test API key with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test API key object
   */
  static createApiKey(overrides = {}) {
    logStart('TestDataFactory.createApiKey', overrides);
    const id = this.nextId();
    const apiKey = {
      id: `key-${id}`,
      key: `test-api-key-${id}-${Math.random().toString(36).substr(2, 9)}`,
      name: `Test API Key ${id}`,
      userId: `user-${id}`,
      isActive: true,
      permissions: ['read', 'write'],
      createdAt: new Date(),
      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
      // 30 days
      ...overrides
    };
    logReturn('TestDataFactory.createApiKey', apiKey);
    return apiKey;
  }

  /**
   * Creates a test log entry with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test log entry object
   */
  static createLogEntry(overrides = {}) {
    logStart('TestDataFactory.createLogEntry', overrides);
    const id = this.nextId();
    const logEntry = {
      id: `log-${id}`,
      message: `Test log message ${id}`,
      level: 'info',
      timestamp: new Date(),
      userId: `user-${id}`,
      source: 'test-application',
      metadata: {
        testId: id,
        environment: 'test'
      },
      ...overrides
    };
    logReturn('TestDataFactory.createLogEntry', logEntry);
    return logEntry;
  }

  /**
   * Creates a test configuration object with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test configuration object
   */
  static createConfig(overrides = {}) {
    logStart('TestDataFactory.createConfig', overrides);
    const id = this.nextId();
    const config = {
      id: `config-${id}`,
      name: `Test Configuration ${id}`,
      value: `test-value-${id}`,
      environment: 'test',
      type: 'string',
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createConfig', config);
    return config;
  }

  /**
   * Creates multiple test entities using a factory function
   * 
   * @param {Function} factoryFn - Factory function to create single entities
   * @param {number} count - Number of entities to create
   * @param {Object} baseOverrides - Base overrides applied to all entities
   * @returns {Array} Array of created test entities
   */
  static createMultiple(factoryFn, count = 10, baseOverrides = {}) {
    logStart('TestDataFactory.createMultiple', {
      count,
      baseOverrides
    });
    const entities = [];
    for (let i = 0; i < count; i++) {
      const entityOverrides = {
        ...baseOverrides
      };
      entities.push(factoryFn.call(this, entityOverrides));
    }
    logReturn('TestDataFactory.createMultiple', `${entities.length} entities`);
    return entities;
  }

  // Instance method wrappers for compatibility with TestSuiteBuilder
  createUser(overrides) {
    return TestDataFactory.createUser(overrides);
  }
  createApiKey(overrides) {
    return TestDataFactory.createApiKey(overrides);
  }
  createLogEntry(overrides) {
    return TestDataFactory.createLogEntry(overrides);
  }
  createConfig(overrides) {
    return TestDataFactory.createConfig(overrides);
  }
  createMultiple(factoryFn, count, baseOverrides) {
    return TestDataFactory.createMultiple(factoryFn.bind(this), count, baseOverrides);
  }

  // Static method for resetting counter
  static reset() {
    this.counter = 0;
  }

  /**
   * Creates related entities with relationships
   * 
   * @param {Object} config - Configuration for creating related entities
   * @returns {Object} Object with created entities and relationships
   */
  static createRelatedEntities(config) {
    logStart('TestDataFactory.createRelatedEntities', config);
    try {
      const {
        userCount = 1,
        apiKeysPerUser = 1,
        logsPerUser = 1
      } = config;
      const users = [];
      const apiKeys = [];
      const logs = [];

      // Create users first
      for (let i = 0; i < userCount; i++) {
        users.push(this.createUser());
      }

      // Create API keys for each user
      users.forEach(user => {
        for (let i = 0; i < apiKeysPerUser; i++) {
          apiKeys.push(this.createApiKey({
            userId: user.id,
            key: `${user.username}-key-${i + 1}`
          }));
        }
      });

      // Create logs for each user
      users.forEach(user => {
        for (let i = 0; i < logsPerUser; i++) {
          logs.push(this.createLogEntry({
            userId: user.id,
            endpoint: `/api/users/${user.id}/data-${i + 1}`
          }));
        }
      });
      const result = {
        users,
        apiKeys,
        logs,
        relationships: {
          userToApiKeys: users.reduce((acc, user) => {
            acc[user.id] = apiKeys.filter(key => key.userId === user.id);
            return acc;
          }, {}),
          userToLogs: users.reduce((acc, user) => {
            acc[user.id] = logs.filter(log => log.userId === user.id);
            return acc;
          }, {})
        }
      };
      logReturn('TestDataFactory.createRelatedEntities', `created ${users.length} users, ${apiKeys.length} API keys, ${logs.length} logs`);
      return result;
    } catch (error) {
      logReturn('TestDataFactory.createRelatedEntities', `error: ${error.message}`);
      throw error;
    }
  }
}
module.exports = {
  TestDataFactory
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dTdGFydCIsImxvZ1JldHVybiIsInJlcXVpcmUiLCJUZXN0RGF0YUZhY3RvcnkiLCJjb3VudGVyIiwibmV4dElkIiwiaXNKZXN0UGFyYWxsZWwiLCJwcm9jZXNzIiwiZW52IiwiSkVTVF9XT1JLRVJfSUQiLCJpc0V4cGxpY2l0UGFyYWxsZWwiLCJRVEVTVFNfUEFSQUxMRUxfTU9ERSIsImhyVGltZSIsImhydGltZSIsImJpZ2ludCIsInJhbmRvbSIsIk1hdGgiLCJ0b1N0cmluZyIsInN1YnN0ciIsImNyZWF0ZVVzZXIiLCJvdmVycmlkZXMiLCJpZCIsInVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImlzQWN0aXZlIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImNyZWF0ZUFwaUtleSIsImFwaUtleSIsImtleSIsIm5hbWUiLCJ1c2VySWQiLCJwZXJtaXNzaW9ucyIsImV4cGlyZXNBdCIsIm5vdyIsImNyZWF0ZUxvZ0VudHJ5IiwibG9nRW50cnkiLCJtZXNzYWdlIiwibGV2ZWwiLCJ0aW1lc3RhbXAiLCJzb3VyY2UiLCJtZXRhZGF0YSIsInRlc3RJZCIsImVudmlyb25tZW50IiwiY3JlYXRlQ29uZmlnIiwiY29uZmlnIiwidmFsdWUiLCJ0eXBlIiwiY3JlYXRlTXVsdGlwbGUiLCJmYWN0b3J5Rm4iLCJjb3VudCIsImJhc2VPdmVycmlkZXMiLCJlbnRpdGllcyIsImkiLCJlbnRpdHlPdmVycmlkZXMiLCJwdXNoIiwiY2FsbCIsImxlbmd0aCIsImJpbmQiLCJyZXNldCIsImNyZWF0ZVJlbGF0ZWRFbnRpdGllcyIsInVzZXJDb3VudCIsImFwaUtleXNQZXJVc2VyIiwibG9nc1BlclVzZXIiLCJ1c2VycyIsImFwaUtleXMiLCJsb2dzIiwiZm9yRWFjaCIsImVuZHBvaW50IiwicmVzdWx0IiwicmVsYXRpb25zaGlwcyIsInVzZXJUb0FwaUtleXMiLCJyZWR1Y2UiLCJhY2MiLCJmaWx0ZXIiLCJ1c2VyVG9Mb2dzIiwibG9nIiwiZXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidGVzdERhdGFGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdCBEYXRhIEZhY3RvcnkgZm9yIENyZWF0aW5nIFJlYWxpc3RpYyBUZXN0IEVudGl0aWVzXG4gKiBcbiAqIFRoaXMgY2xhc3MgZm9jdXNlcyBzb2xlbHkgb24gdGVzdCBkYXRhIGNyZWF0aW9uIGFuZCBtYW5hZ2VtZW50LlxuICogSXQgZWxpbWluYXRlcyBkdXBsaWNhdGUgdGVzdCBkYXRhIGNyZWF0aW9uIGFjcm9zcyB0ZXN0IGZpbGVzLlxuICovXG5cbmNvbnN0IHsgbG9nU3RhcnQsIGxvZ1JldHVybiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2xvZ1V0aWxzJyk7XG5cbi8qKlxuICogVGVzdCBEYXRhIEZhY3RvcnkgZm9yIENyZWF0aW5nIFJlYWxpc3RpYyBUZXN0IEVudGl0aWVzXG4gKiBcbiAqIFRoaXMgY2xhc3MgZWxpbWluYXRlcyBkdXBsaWNhdGUgdGVzdCBkYXRhIGNyZWF0aW9uIGFjcm9zcyB0ZXN0IGZpbGVzXG4gKiBieSBwcm92aWRpbmcgc3RhbmRhcmRpemVkIGZhY3RvcnkgbWV0aG9kcyBmb3IgY29tbW9uIHRlc3QgZW50aXRpZXMuXG4gKiBcbiAqIFBBUkFMTEVMIFRFU1QgU0FGRVRZOlxuICogLSBVc2VzIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpIGZvciB1bmlxdWUgSURzIHRvIGF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICogLSBObyBzaGFyZWQgc3RhdGljIHN0YXRlIGJldHdlZW4gcGFyYWxsZWwgdGVzdCBleGVjdXRpb25zXG4gKiAtIEVhY2ggdGVzdCBnZXRzIHVuaXF1ZSBkYXRhIHRoYXQgd29uJ3QgY29uZmxpY3Qgd2l0aCBvdGhlciB0ZXN0c1xuICovXG5jbGFzcyBUZXN0RGF0YUZhY3Rvcnkge1xuICBzdGF0aWMgY291bnRlciA9IDA7XG5cbiAgLyoqXG4gICAqIEdldHMgbmV4dCB1bmlxdWUgSUQgZm9yIHRlc3QgZGF0YSAocGFyYWxsZWwtc2FmZSB3aGVuIG5lZWRlZClcbiAgICogXG4gICAqIEByZXR1cm5zIHtzdHJpbmd8bnVtYmVyfSBVbmlxdWUgaWRlbnRpZmllciAtIHNpbXBsZSBjb3VudGVyIGZvciBub3JtYWwgdGVzdHMsIGNvbXBsZXggZm9yIHBhcmFsbGVsXG4gICAqL1xuICBzdGF0aWMgbmV4dElkKCkge1xuICAgIC8vIE9ubHkgdXNlIGNvbXBsZXggSURzIGluIHZlcnkgc3BlY2lmaWMgcGFyYWxsZWwgZXhlY3V0aW9uIHNjZW5hcmlvc1xuICAgIGNvbnN0IGlzSmVzdFBhcmFsbGVsID0gcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQgJiYgcHJvY2Vzcy5lbnYuSkVTVF9XT1JLRVJfSUQgIT09ICcxJztcbiAgICBjb25zdCBpc0V4cGxpY2l0UGFyYWxsZWwgPSBwcm9jZXNzLmVudi5RVEVTVFNfUEFSQUxMRUxfTU9ERSA9PT0gJ3RydWUnO1xuICAgIFxuICAgIGlmICghaXNKZXN0UGFyYWxsZWwgJiYgIWlzRXhwbGljaXRQYXJhbGxlbCkge1xuICAgICAgLy8gTm9ybWFsIHRlc3RpbmcgLSB1c2Ugc2ltcGxlIGNvdW50ZXIgZm9yIGV4cGVjdGVkIGZvcm1hdFxuICAgICAgcmV0dXJuICsrdGhpcy5jb3VudGVyO1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJhbGxlbCB0ZXN0aW5nIC0gdXNlIGNvbXBsZXggdW5pcXVlIGlkZW50aWZpZXJcbiAgICBjb25zdCBoclRpbWUgPSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcbiAgICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSk7XG4gICAgcmV0dXJuIGAke2hyVGltZX0tJHtyYW5kb219YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCB1c2VyIHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgdXNlciBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVVc2VyKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVVc2VyJywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgdXNlciA9IHtcbiAgICAgIGlkOiBgdXNlci0ke2lkfWAsXG4gICAgICB1c2VybmFtZTogYHRlc3R1c2VyJHtpZH1gLFxuICAgICAgZW1haWw6IGB0ZXN0JHtpZH1AZXhhbXBsZS5jb21gLFxuICAgICAgcGFzc3dvcmQ6IGBoYXNoZWRwYXNzd29yZCR7aWR9YCxcbiAgICAgIGZpcnN0TmFtZTogJ1Rlc3QnLFxuICAgICAgbGFzdE5hbWU6IGBVc2VyJHtpZH1gLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVVzZXInLCB1c2VyKTtcbiAgICByZXR1cm4gdXNlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCBBUEkga2V5IHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgQVBJIGtleSBvYmplY3RcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVBcGlLZXkob3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUFwaUtleScsIG92ZXJyaWRlcyk7XG4gICAgXG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRJZCgpO1xuICAgIGNvbnN0IGFwaUtleSA9IHtcbiAgICAgIGlkOiBga2V5LSR7aWR9YCxcbiAgICAgIGtleTogYHRlc3QtYXBpLWtleS0ke2lkfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgbmFtZTogYFRlc3QgQVBJIEtleSAke2lkfWAsXG4gICAgICB1c2VySWQ6IGB1c2VyLSR7aWR9YCxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgcGVybWlzc2lvbnM6IFsncmVhZCcsICd3cml0ZSddLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgZXhwaXJlc0F0OiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSwgLy8gMzAgZGF5c1xuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfTtcbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVBcGlLZXknLCBhcGlLZXkpO1xuICAgIHJldHVybiBhcGlLZXk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlc3QgbG9nIGVudHJ5IHdpdGggcmVhbGlzdGljIHByb3BlcnRpZXNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvdmVycmlkZXMgLSBQcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHRzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRlc3QgbG9nIGVudHJ5IG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUxvZ0VudHJ5KG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVMb2dFbnRyeScsIG92ZXJyaWRlcyk7XG4gICAgXG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRJZCgpO1xuICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgaWQ6IGBsb2ctJHtpZH1gLFxuICAgICAgbWVzc2FnZTogYFRlc3QgbG9nIG1lc3NhZ2UgJHtpZH1gLFxuICAgICAgbGV2ZWw6ICdpbmZvJyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIHVzZXJJZDogYHVzZXItJHtpZH1gLFxuICAgICAgc291cmNlOiAndGVzdC1hcHBsaWNhdGlvbicsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICB0ZXN0SWQ6IGlkLFxuICAgICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnXG4gICAgICB9LFxuICAgICAgLi4ub3ZlcnJpZGVzXG4gICAgfTtcbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVMb2dFbnRyeScsIGxvZ0VudHJ5KTtcbiAgICByZXR1cm4gbG9nRW50cnk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRlc3QgY29uZmlndXJhdGlvbiBvYmplY3Qgd2l0aCByZWFsaXN0aWMgcHJvcGVydGllc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyAtIFByb3BlcnRpZXMgdG8gb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICogQHJldHVybnMge09iamVjdH0gVGVzdCBjb25maWd1cmF0aW9uIG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUNvbmZpZyhvdmVycmlkZXMgPSB7fSkge1xuICAgIGxvZ1N0YXJ0KCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQ29uZmlnJywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgaWQ6IGBjb25maWctJHtpZH1gLFxuICAgICAgbmFtZTogYFRlc3QgQ29uZmlndXJhdGlvbiAke2lkfWAsXG4gICAgICB2YWx1ZTogYHRlc3QtdmFsdWUtJHtpZH1gLFxuICAgICAgZW52aXJvbm1lbnQ6ICd0ZXN0JyxcbiAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUNvbmZpZycsIGNvbmZpZyk7XG4gICAgcmV0dXJuIGNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG11bHRpcGxlIHRlc3QgZW50aXRpZXMgdXNpbmcgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAqIFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmYWN0b3J5Rm4gLSBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSBzaW5nbGUgZW50aXRpZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IC0gTnVtYmVyIG9mIGVudGl0aWVzIHRvIGNyZWF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gYmFzZU92ZXJyaWRlcyAtIEJhc2Ugb3ZlcnJpZGVzIGFwcGxpZWQgdG8gYWxsIGVudGl0aWVzXG4gICAqIEByZXR1cm5zIHtBcnJheX0gQXJyYXkgb2YgY3JlYXRlZCB0ZXN0IGVudGl0aWVzXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLCBjb3VudCA9IDEwLCBiYXNlT3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZU11bHRpcGxlJywgeyBjb3VudCwgYmFzZU92ZXJyaWRlcyB9KTtcbiAgICBcbiAgICBjb25zdCBlbnRpdGllcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgY29uc3QgZW50aXR5T3ZlcnJpZGVzID0geyAuLi5iYXNlT3ZlcnJpZGVzIH07XG4gICAgICBlbnRpdGllcy5wdXNoKGZhY3RvcnlGbi5jYWxsKHRoaXMsIGVudGl0eU92ZXJyaWRlcykpO1xuICAgIH1cbiAgICBcbiAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVNdWx0aXBsZScsIGAke2VudGl0aWVzLmxlbmd0aH0gZW50aXRpZXNgKTtcbiAgICByZXR1cm4gZW50aXRpZXM7XG4gIH1cblxuICAvLyBJbnN0YW5jZSBtZXRob2Qgd3JhcHBlcnMgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBUZXN0U3VpdGVCdWlsZGVyXG4gIGNyZWF0ZVVzZXIob3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVVc2VyKG92ZXJyaWRlcyk7XG4gIH1cblxuICBjcmVhdGVBcGlLZXkob3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVBcGlLZXkob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIGNyZWF0ZUxvZ0VudHJ5KG92ZXJyaWRlcykge1xuICAgIHJldHVybiBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlTG9nRW50cnkob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIGNyZWF0ZUNvbmZpZyhvdmVycmlkZXMpIHtcbiAgICByZXR1cm4gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUNvbmZpZyhvdmVycmlkZXMpO1xuICB9XG5cbiAgY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLCBjb3VudCwgYmFzZU92ZXJyaWRlcykge1xuICAgIHJldHVybiBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlTXVsdGlwbGUoZmFjdG9yeUZuLmJpbmQodGhpcyksIGNvdW50LCBiYXNlT3ZlcnJpZGVzKTtcbiAgfVxuXG4gIC8vIFN0YXRpYyBtZXRob2QgZm9yIHJlc2V0dGluZyBjb3VudGVyXG4gIHN0YXRpYyByZXNldCgpIHtcbiAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgcmVsYXRlZCBlbnRpdGllcyB3aXRoIHJlbGF0aW9uc2hpcHNcbiAgICogXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBDb25maWd1cmF0aW9uIGZvciBjcmVhdGluZyByZWxhdGVkIGVudGl0aWVzXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCB3aXRoIGNyZWF0ZWQgZW50aXRpZXMgYW5kIHJlbGF0aW9uc2hpcHNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVSZWxhdGVkRW50aXRpZXMoY29uZmlnKSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBjb25maWcpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHVzZXJDb3VudCA9IDEsXG4gICAgICAgIGFwaUtleXNQZXJVc2VyID0gMSxcbiAgICAgICAgbG9nc1BlclVzZXIgPSAxXG4gICAgICB9ID0gY29uZmlnO1xuICAgICAgXG4gICAgICBjb25zdCB1c2VycyA9IFtdO1xuICAgICAgY29uc3QgYXBpS2V5cyA9IFtdO1xuICAgICAgY29uc3QgbG9ncyA9IFtdO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgdXNlcnMgZmlyc3RcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlckNvdW50OyBpKyspIHtcbiAgICAgICAgdXNlcnMucHVzaCh0aGlzLmNyZWF0ZVVzZXIoKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBBUEkga2V5cyBmb3IgZWFjaCB1c2VyXG4gICAgICB1c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFwaUtleXNQZXJVc2VyOyBpKyspIHtcbiAgICAgICAgICBhcGlLZXlzLnB1c2godGhpcy5jcmVhdGVBcGlLZXkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAga2V5OiBgJHt1c2VyLnVzZXJuYW1lfS1rZXktJHtpICsgMX1gXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGxvZ3MgZm9yIGVhY2ggdXNlclxuICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2dzUGVyVXNlcjsgaSsrKSB7XG4gICAgICAgICAgbG9ncy5wdXNoKHRoaXMuY3JlYXRlTG9nRW50cnkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3VzZXJzLyR7dXNlci5pZH0vZGF0YS0ke2kgKyAxfWBcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHVzZXJzLFxuICAgICAgICBhcGlLZXlzLFxuICAgICAgICBsb2dzLFxuICAgICAgICByZWxhdGlvbnNoaXBzOiB7XG4gICAgICAgICAgdXNlclRvQXBpS2V5czogdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICAgICAgICAgIGFjY1t1c2VyLmlkXSA9IGFwaUtleXMuZmlsdGVyKGtleSA9PiBrZXkudXNlcklkID09PSB1c2VyLmlkKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHVzZXJUb0xvZ3M6IHVzZXJzLnJlZHVjZSgoYWNjLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICBhY2NbdXNlci5pZF0gPSBsb2dzLmZpbHRlcihsb2cgPT4gbG9nLnVzZXJJZCA9PT0gdXNlci5pZCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sIHt9KVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgY3JlYXRlZCAke3VzZXJzLmxlbmd0aH0gdXNlcnMsICR7YXBpS2V5cy5sZW5ndGh9IEFQSSBrZXlzLCAke2xvZ3MubGVuZ3RofSBsb2dzYCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVGVzdERhdGFGYWN0b3J5XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07RUFBRUEsUUFBUTtFQUFFQztBQUFVLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsZUFBZSxDQUFDO0VBQ3BCLE9BQU9DLE9BQU8sR0FBRyxDQUFDOztFQUVsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0MsTUFBTUEsQ0FBQSxFQUFHO0lBQ2Q7SUFDQSxNQUFNQyxjQUFjLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLElBQUlGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxjQUFjLEtBQUssR0FBRztJQUN2RixNQUFNQyxrQkFBa0IsR0FBR0gsT0FBTyxDQUFDQyxHQUFHLENBQUNHLG9CQUFvQixLQUFLLE1BQU07SUFFdEUsSUFBSSxDQUFDTCxjQUFjLElBQUksQ0FBQ0ksa0JBQWtCLEVBQUU7TUFDMUM7TUFDQSxPQUFPLEVBQUUsSUFBSSxDQUFDTixPQUFPO0lBQ3ZCOztJQUVBO0lBQ0EsTUFBTVEsTUFBTSxHQUFHTCxPQUFPLENBQUNNLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7SUFDdEMsTUFBTUMsTUFBTSxHQUFHQyxJQUFJLENBQUNELE1BQU0sQ0FBQyxDQUFDLENBQUNFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdEQsT0FBTyxHQUFHTixNQUFNLElBQUlHLE1BQU0sRUFBRTtFQUM5Qjs7RUFFQTtBQUNGO0FBQ0E7QUFD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