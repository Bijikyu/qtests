811c0c2a61db23ec484f6039672d873f
/**
 * Mock Models for Testing - TypeScript Implementation
 */
// Collections storage
const collections = new Map();
/**
 * Base Mock Model class
 */
class BaseMockModel {
    constructor(data = {}) {
        this._id = data._id || `mock_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        Object.assign(this, data);
    }
    async save() {
        const collectionName = this.constructor.modelName || 'default';
        if (!collections.has(collectionName)) {
            collections.set(collectionName, []);
        }
        const collection = collections.get(collectionName);
        const existingIndex = collection.findIndex(item => item._id === this._id);
        if (existingIndex >= 0) {
            collection[existingIndex] = this;
        }
        else {
            collection.push(this);
        }
        return this;
    }
    static getCollection() {
        const collectionName = this.modelName || 'default';
        return collections.get(collectionName) || [];
    }
    static find(query = {}) {
        const collection = this.getCollection();
        if (Object.keys(query).length === 0) {
            return [...collection]; // Return copy
        }
        return collection.filter(item => {
            return Object.keys(query).every(key => item[key] === query[key]);
        });
    }
}
/**
 * Create mock model class
 */
function createMockModel(modelName) {
    class MockModel extends BaseMockModel {
    }
    MockModel.modelName = modelName;
    MockModel.modelName = modelName;
    return MockModel;
}
/**
 * Pre-built API Key model
 */
class ApiKey extends BaseMockModel {
    constructor(data = {}) {
        super(data);
        this.key = data.key || '';
        this.name = data.name || '';
        this.permissions = data.permissions || [];
        this.createdAt = data.createdAt || new Date();
    }
}
ApiKey.modelName = 'ApiKey';
/**
 * Pre-built API Log model
 */
class ApiLog extends BaseMockModel {
    constructor(data = {}) {
        super(data);
        this.endpoint = data.endpoint || '';
        this.method = data.method || 'GET';
        this.statusCode = data.statusCode || 200;
        this.timestamp = data.timestamp || new Date();
    }
}
ApiLog.modelName = 'ApiLog';
/**
 * Reset all collections
 */
function resetAllCollections() {
    collections.clear();
}
// Export mock model utilities using ES module syntax
export { BaseMockModel, ApiKey, ApiLog, createMockModel, resetAllCollections };
// Default export for main functionality
const mockModels = {
    BaseMockModel,
    ApiKey,
    ApiLog,
    createMockModel,
    resetAllCollections,
    // Legacy exports for compatibility
    mockApiKeys: () => ApiKey.getCollection(),
    mockLogs: () => ApiLog.getCollection()
};
export default mockModels;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRTtDQUN2QyxDQUFDO0FBRUYsZUFBZSxVQUFVLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS91dGlscy9tb2NrTW9kZWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTW9jayBNb2RlbHMgZm9yIFRlc3RpbmcgLSBUeXBlU2NyaXB0IEltcGxlbWVudGF0aW9uXG4gKi9cblxuLy8gQ29sbGVjdGlvbnMgc3RvcmFnZVxuY29uc3QgY29sbGVjdGlvbnMgPSBuZXcgTWFwPHN0cmluZywgYW55W10+KCk7XG5cbi8qKlxuICogQmFzZSBNb2NrIE1vZGVsIGNsYXNzXG4gKi9cbmNsYXNzIEJhc2VNb2NrTW9kZWwge1xuICBfaWQ6IHN0cmluZztcbiAgW2tleTogc3RyaW5nXTogYW55O1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSkge1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQgfHwgYG1vY2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgZGF0YSk7XG4gIH1cbiAgXG4gIGFzeW5jIHNhdmUoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgY29uc3QgY29sbGVjdGlvbk5hbWUgPSAodGhpcy5jb25zdHJ1Y3RvciBhcyBhbnkpLm1vZGVsTmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgaWYgKCFjb2xsZWN0aW9ucy5oYXMoY29sbGVjdGlvbk5hbWUpKSB7XG4gICAgICBjb2xsZWN0aW9ucy5zZXQoY29sbGVjdGlvbk5hbWUsIFtdKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb25zLmdldChjb2xsZWN0aW9uTmFtZSkhO1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBjb2xsZWN0aW9uLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uX2lkID09PSB0aGlzLl9pZCk7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nSW5kZXggPj0gMCkge1xuICAgICAgY29sbGVjdGlvbltleGlzdGluZ0luZGV4XSA9IHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbGxlY3Rpb24ucHVzaCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHN0YXRpYyBnZXRDb2xsZWN0aW9uKCk6IGFueVtdIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uTmFtZSA9ICh0aGlzIGFzIGFueSkubW9kZWxOYW1lIHx8ICdkZWZhdWx0JztcbiAgICByZXR1cm4gY29sbGVjdGlvbnMuZ2V0KGNvbGxlY3Rpb25OYW1lKSB8fCBbXTtcbiAgfVxuICBcbiAgc3RhdGljIGZpbmQocXVlcnk6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fSk6IGFueVtdIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5nZXRDb2xsZWN0aW9uKCk7XG4gICAgaWYgKE9iamVjdC5rZXlzKHF1ZXJ5KS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbLi4uY29sbGVjdGlvbl07IC8vIFJldHVybiBjb3B5XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcihpdGVtID0+IHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhxdWVyeSkuZXZlcnkoa2V5ID0+IGl0ZW1ba2V5XSA9PT0gcXVlcnlba2V5XSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgbW9jayBtb2RlbCBjbGFzc1xuICovXG5mdW5jdGlvbiBjcmVhdGVNb2NrTW9kZWwobW9kZWxOYW1lOiBzdHJpbmcpIHtcbiAgY2xhc3MgTW9ja01vZGVsIGV4dGVuZHMgQmFzZU1vY2tNb2RlbCB7XG4gICAgc3RhdGljIG1vZGVsTmFtZSA9IG1vZGVsTmFtZTtcbiAgfVxuICBNb2NrTW9kZWwubW9kZWxOYW1lID0gbW9kZWxOYW1lO1xuICByZXR1cm4gTW9ja01vZGVsO1xufVxuXG4vKipcbiAqIFByZS1idWlsdCBBUEkgS2V5IG1vZGVsXG4gKi9cbmNsYXNzIEFwaUtleSBleHRlbmRzIEJhc2VNb2NrTW9kZWwge1xuICBzdGF0aWMgbW9kZWxOYW1lID0gJ0FwaUtleSc7XG4gIGtleTogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIHBlcm1pc3Npb25zOiBzdHJpbmdbXTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICBcbiAgY29uc3RydWN0b3IoZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9KSB7XG4gICAgc3VwZXIoZGF0YSk7XG4gICAgdGhpcy5rZXkgPSBkYXRhLmtleSB8fCAnJztcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWUgfHwgJyc7XG4gICAgdGhpcy5wZXJtaXNzaW9ucyA9IGRhdGEucGVybWlzc2lvbnMgfHwgW107XG4gICAgdGhpcy5jcmVhdGVkQXQgPSBkYXRhLmNyZWF0ZWRBdCB8fCBuZXcgRGF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogUHJlLWJ1aWx0IEFQSSBMb2cgbW9kZWwgIFxuICovXG5jbGFzcyBBcGlMb2cgZXh0ZW5kcyBCYXNlTW9ja01vZGVsIHtcbiAgc3RhdGljIG1vZGVsTmFtZSA9ICdBcGlMb2cnO1xuICBlbmRwb2ludDogc3RyaW5nO1xuICBtZXRob2Q6IHN0cmluZztcbiAgc3RhdHVzQ29kZTogbnVtYmVyO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIFxuICBjb25zdHJ1Y3RvcihkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30pIHtcbiAgICBzdXBlcihkYXRhKTtcbiAgICB0aGlzLmVuZHBvaW50ID0gZGF0YS5lbmRwb2ludCB8fCAnJztcbiAgICB0aGlzLm1ldGhvZCA9IGRhdGEubWV0aG9kIHx8ICdHRVQnO1xuICAgIHRoaXMuc3RhdHVzQ29kZSA9IGRhdGEuc3RhdHVzQ29kZSB8fCAyMDA7XG4gICAgdGhpcy50aW1lc3RhbXAgPSBkYXRhLnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogUmVzZXQgYWxsIGNvbGxlY3Rpb25zXG4gKi9cbmZ1bmN0aW9uIHJlc2V0QWxsQ29sbGVjdGlvbnMoKTogdm9pZCB7XG4gIGNvbGxlY3Rpb25zLmNsZWFyKCk7XG59XG5cbi8vIEV4cG9ydCBtb2NrIG1vZGVsIHV0aWxpdGllcyB1c2luZyBFUyBtb2R1bGUgc3ludGF4XG5leHBvcnQge1xuICBCYXNlTW9ja01vZGVsLFxuICBBcGlLZXksXG4gIEFwaUxvZyxcbiAgY3JlYXRlTW9ja01vZGVsLFxuICByZXNldEFsbENvbGxlY3Rpb25zXG59O1xuXG4vLyBEZWZhdWx0IGV4cG9ydCBmb3IgbWFpbiBmdW5jdGlvbmFsaXR5XG5jb25zdCBtb2NrTW9kZWxzID0ge1xuICBCYXNlTW9ja01vZGVsLFxuICBBcGlLZXksXG4gIEFwaUxvZyxcbiAgY3JlYXRlTW9ja01vZGVsLFxuICByZXNldEFsbENvbGxlY3Rpb25zLFxuICAvLyBMZWdhY3kgZXhwb3J0cyBmb3IgY29tcGF0aWJpbGl0eVxuICBtb2NrQXBpS2V5czogKCkgPT4gQXBpS2V5LmdldENvbGxlY3Rpb24oKSxcbiAgbW9ja0xvZ3M6ICgpID0+IEFwaUxvZy5nZXRDb2xsZWN0aW9uKClcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1vY2tNb2RlbHM7Il0sInZlcnNpb24iOjN9