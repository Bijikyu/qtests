{"version":3,"names":["BaseMockModel","require","mockApiKeys","ApiKey","constructor","data","createdAt","Date","isActive","getCollection","findOne","query","console","log","JSON","stringify","result","find","k","key","Promise","resolve","findOneAndDelete","idx","findIndex","deleted","splice","findOneAndUpdate","update","Object","assign","chain","sort","lean","length","exec","module","exports"],"sources":["apiKeyModel.js"],"sourcesContent":["/**\n * API Key Model\n * \n * This class focuses solely on API key model functionality and behavior.\n * It extends BaseMockModel with API key-specific methods and properties.\n */\n\nconst { BaseMockModel } = require('./baseMockModel');\n\n// Legacy array for backwards compatibility\nconst mockApiKeys = [];\n\n/**\n * API Key Model Class\n * \n * Provides Mongoose-compatible API key model for testing scenarios.\n * Includes API key-specific validation and methods.\n */\nclass ApiKey extends BaseMockModel {\n  constructor(data) {\n    super(data);\n    // Set default values specific to ApiKey\n    if (!this.createdAt) this.createdAt = new Date();\n    if (!this.isActive) this.isActive = true;\n  }\n  \n  // Override getCollection to use legacy array for backwards compatibility\n  static getCollection() {\n    return mockApiKeys;\n  }\n  \n  // Legacy methods for backward compatibility with existing code\n  static findOne(query) {\n    console.log(`ApiKey.findOne is running with ${JSON.stringify(query)}`);\n    const result = mockApiKeys.find(k => k.key === query.key) || null;\n    console.log(`ApiKey.findOne is returning ${result ? 'key' : 'null'}`);\n    return Promise.resolve(result);\n  }\n  \n  static findOneAndDelete(query) {\n    console.log(`ApiKey.findOneAndDelete is running with ${JSON.stringify(query)}`);\n    const idx = mockApiKeys.findIndex(k => k.key === query.key);\n    if (idx === -1) {\n      console.log(`ApiKey.findOneAndDelete is returning null`);\n      return Promise.resolve(null);\n    }\n    const deleted = mockApiKeys.splice(idx, 1)[0];\n    console.log(`ApiKey.findOneAndDelete is returning deleted key`);\n    return Promise.resolve(deleted);\n  }\n  \n  static findOneAndUpdate(query, update) {\n    console.log(`ApiKey.findOneAndUpdate is running with query and update`);\n    const key = mockApiKeys.find(k => k.key === query.key);\n    if (!key) {\n      console.log(`ApiKey.findOneAndUpdate is returning null`);\n      return Promise.resolve(null);\n    }\n    Object.assign(key, update);\n    console.log(`ApiKey.findOneAndUpdate is returning updated key`);\n    return Promise.resolve(key);\n  }\n  \n  static find() {\n    console.log(`ApiKey.find is running with none`);\n    const chain = { data: mockApiKeys };\n    chain.sort = () => chain;\n    chain.lean = () => {\n      console.log(`ApiKey.find.lean is returning ${chain.data.length} keys`);\n      return Promise.resolve(chain.data);\n    };\n    chain.exec = () => {\n      console.log(`ApiKey.find.exec is returning ${chain.data.length} keys`);\n      return Promise.resolve(chain.data);\n    };\n    return chain;\n  }\n}\n\nmodule.exports = {\n  ApiKey,\n  mockApiKeys\n};"],"mappings":"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","ignoreList":[]}