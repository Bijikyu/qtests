{"file":"/home/runner/workspace/lib/setup.ts","mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA6BG;AAEH;;;;;;;;;;;;;;;;;;;;;GAqBG;AACH,KAAK,UAAU,KAAK;IAClB,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC,CAAC,0CAA0C;IAErF,IAAI,CAAC;QACH,MAAM,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,4CAA4C;QACzE,OAAO,CAAC,GAAG,CAAC,2DAA2D,CAAC,CAAC,CAAC,sCAAsC;IAClH,CAAC;IAAC,OAAO,KAAU,EAAE,CAAC;QACpB,OAAO,CAAC,GAAG,CAAC,gBAAgB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,iCAAiC;QAC/E,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC;AAED,gDAAgD;AAChD,OAAO,EACL,KAAK,CAAC,2CAA2C;EAClD,CAAC","names":[],"sources":["/home/runner/workspace/lib/setup.ts"],"sourcesContent":["/**\n * Setup and Initialization Utilities - TypeScript ES Module Implementation\n * \n * This module provides setup functionality for the qtests framework.\n * The setup function modifies global Node.js behavior to enable automatic\n * stub resolution, which is essential for seamless testing.\n * \n * Design philosophy:\n * - Explicit setup to avoid unintended side effects\n * - Clear separation of setup from other utilities\n * - Comprehensive error handling and logging\n * - Safe to call multiple times\n * \n * Why explicit setup is necessary:\n * 1. Modifying Node.js module resolution is a global side effect\n * 2. Users should explicitly opt-in to this behavior modification\n * 3. Setup timing is critical - must happen before module requires\n * 4. Clear separation makes it obvious when global behavior is being changed\n * \n * Alternative approaches considered:\n * - Automatic setup on require: Rejected due to hidden side effects\n * - Setup in individual utilities: Rejected due to timing complexity\n * - Multiple setup functions: Rejected for simplicity\n * \n * Current approach benefits:\n * - Clear, explicit user intent required\n * - Single point of global behavior modification\n * - Easy to understand and debug\n * - Follows principle of least surprise\n */\n\n/**\n * Initialize qtests framework with automatic stub resolution\n * \n * This function modifies Node.js module resolution to automatically\n * substitute stub implementations for real modules during testing.\n * \n * Implementation rationale:\n * 1. Function wrapper provides explicit call syntax for users\n * 2. Lazy loading of setup module prevents accidental side effects\n * 3. Error handling ensures setup failures are clearly reported\n * 4. Logging provides visibility into setup process for debugging\n * \n * Why a function wrapper instead of direct require:\n * - Makes setup intention explicit in user code\n * - Allows error handling and logging at the API level\n * - Provides a clear point for future enhancement (parameters, options)\n * - Follows common Node.js patterns for initialization functions\n * \n * Critical timing requirement:\n * This function MUST be called before requiring any modules that need stubbing.\n * If axios or winston are required before setup(), they will be the real modules.\n */\nasync function setup(): Promise<void> {\n  console.log(`setup is running with none`); // logging function start per requirements\n  \n  try {\n    await import('../setup.js'); // load setup implementation with ES modules\n    console.log(`setup has run resulting in module resolution modification`); // logging completion per requirements\n  } catch (error: any) {\n    console.log(`setup error: ${error.message}`); // error logging per requirements\n    throw error;\n  }\n}\n\n// export setup utilities using ES module syntax\nexport {\n  setup // call this to activate stubs when desired\n};"],"version":3}