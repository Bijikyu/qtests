{"version":3,"names":["stubMethod","obj","methodName","stubFn","console","log","Error","originalMethod","hadOwn","Object","prototype","hasOwnProperty","call","restoreFunction","restore","error","message","module","exports"],"sources":["stubMethod.js"],"sourcesContent":["\n/**\n * Method Stubbing Utility\n * \n * This module provides the fundamental method replacement functionality\n * that enables isolated unit testing by replacing method implementations\n * with controlled test doubles.\n * \n * Core concept:\n * Stubbing temporarily replaces a method on an object with a test implementation,\n * allowing tests to control the behavior of dependencies and verify interactions\n * without executing the real method code.\n * \n * Design philosophy:\n * - Simple, predictable API that follows common stubbing patterns\n * - Automatic restoration to prevent test pollution\n * - Flexible replacement function support\n * - Framework-agnostic implementation\n * \n * Why manual stubbing vs mocking libraries:\n * 1. Zero dependencies - works in any Node.js environment\n * 2. Simple implementation is easy to understand and debug\n * 3. Predictable behavior without complex library-specific semantics\n * 4. Minimal API surface reduces learning curve\n * 5. Complete control over restoration behavior\n */\n\n/**\n * Replace a method on an object with a test implementation\n * \n * This function temporarily replaces a method with a stub implementation,\n * providing a restoration function to return the object to its original state.\n * \n * Implementation strategy:\n * 1. Store original method reference before replacement\n * 2. Replace method with provided stub function  \n * 3. Return restoration function that reinstates original method\n * 4. Use closure to maintain access to original method and object\n * \n * Why this approach:\n * - Closure pattern ensures original method is preserved correctly\n * - Restoration function provides clear, explicit cleanup\n * - No global state management required\n * - Works with any object and method combination\n * - Simple implementation is easy to debug when tests fail\n * \n * Alternative approaches considered:\n * - Automatic restoration via setTimeout: Rejected due to unpredictable timing\n * - Stack-based restoration: Rejected due to complexity for minimal benefit\n * - Property descriptor manipulation: Current approach is simpler and sufficient\n * \n * @param {Object} obj - The object containing the method to replace\n * @param {string} methodName - Name of the method to replace\n * @param {Function} stubFn - Function to use as replacement implementation\n * @returns {Function} Restoration function that reinstates the original method\n * \n * @example\n * const restore = stubMethod(fs, 'readFileSync', () => 'mock data');\n * // fs.readFileSync now returns 'mock data'\n * restore();\n * // fs.readFileSync restored to original implementation\n */\nfunction stubMethod(obj, methodName, stubFn) {\n  console.log(`stubMethod is running with ${obj}, ${methodName}, ${stubFn}`); // logging function start per requirements\n\n  try {\n    if (typeof obj !== 'object' || obj === null) { // ensure obj is valid before accessing properties\n      throw new Error(`stubMethod expected object but received ${obj}`); // informative error for invalid obj\n    }\n    if (!(methodName in obj)) { // confirm property exists on target object\n      throw new Error(`stubMethod could not find ${methodName} on provided object`); // error when method missing\n    }\n    if (typeof stubFn !== 'function') { // verify stubFn is callable\n      throw new Error('stubMethod stubFn must be a function'); // error when stubFn invalid\n    }\n    // Store original method reference before replacement\n    // This is critical for restoration - without this reference, the original method is lost forever\n    // We must capture this before any modification to ensure we can restore exact original behavior\n    const originalMethod = obj[methodName]; // capture original reference\n    const hadOwn = Object.prototype.hasOwnProperty.call(obj, methodName); // track if property was own before stubbing\n    \n    // Replace method directly on the object for immediate effect\n    // Direct property assignment chosen over Object.defineProperty for simplicity and performance\n    // This approach works for 99% of use cases and avoids descriptor complexity\n    obj[methodName] = stubFn;\n    \n    // Create restoration function using closure pattern\n    // Closure captures originalMethod and obj references for later restoration\n    // Named function 'restore' provides clear intent and better debugging experience\n    // Returned function pattern allows caller to control when restoration occurs\n    const restoreFunction = function restore() {\n      // Reinstate original method only if it existed as own property, otherwise remove stub\n      if (hadOwn) { // property was originally own so simply reassign\n        obj[methodName] = originalMethod; // restore exact original method\n      } else {\n        delete obj[methodName]; // remove stub so prototype chain resolves original\n      }\n    };\n    \n    console.log(`stubMethod is returning ${restoreFunction}`); // logging return value per requirements\n    return restoreFunction;\n  } catch (error) {\n    // Log error with context for debugging test setup issues\n    // Error logging helps developers identify problems with object access or property assignment\n    // We re-throw to maintain error handling contract while providing debugging information\n    console.log(`stubMethod error: ${error.message}`);\n    throw error;\n  }\n}\n\n// export stubMethod function at bottom per requirements\nmodule.exports = stubMethod;\n"],"mappings":"AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAUA,CAACC,GAAG,EAAEC,UAAU,EAAEC,MAAM,EAAE;EAC3CC,OAAO,CAACC,GAAG,CAAC,8BAA8BJ,GAAG,KAAKC,UAAU,KAAKC,MAAM,EAAE,CAAC,CAAC,CAAC;;EAE5E,IAAI;IACF,IAAI,OAAOF,GAAG,KAAK,QAAQ,IAAIA,GAAG,KAAK,IAAI,EAAE;MAAE;MAC7C,MAAM,IAAIK,KAAK,CAAC,2CAA2CL,GAAG,EAAE,CAAC,CAAC,CAAC;IACrE;IACA,IAAI,EAAEC,UAAU,IAAID,GAAG,CAAC,EAAE;MAAE;MAC1B,MAAM,IAAIK,KAAK,CAAC,6BAA6BJ,UAAU,qBAAqB,CAAC,CAAC,CAAC;IACjF;IACA,IAAI,OAAOC,MAAM,KAAK,UAAU,EAAE;MAAE;MAClC,MAAM,IAAIG,KAAK,CAAC,sCAAsC,CAAC,CAAC,CAAC;IAC3D;IACA;IACA;IACA;IACA,MAAMC,cAAc,GAAGN,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;IACxC,MAAMM,MAAM,GAAGC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACX,GAAG,EAAEC,UAAU,CAAC,CAAC,CAAC;;IAEtE;IACA;IACA;IACAD,GAAG,CAACC,UAAU,CAAC,GAAGC,MAAM;;IAExB;IACA;IACA;IACA;IACA,MAAMU,eAAe,GAAG,SAASC,OAAOA,CAAA,EAAG;MACzC;MACA,IAAIN,MAAM,EAAE;QAAE;QACZP,GAAG,CAACC,UAAU,CAAC,GAAGK,cAAc,CAAC,CAAC;MACpC,CAAC,MAAM;QACL,OAAON,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC;MAC1B;IACF,CAAC;IAEDE,OAAO,CAACC,GAAG,CAAC,2BAA2BQ,eAAe,EAAE,CAAC,CAAC,CAAC;IAC3D,OAAOA,eAAe;EACxB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd;IACA;IACA;IACAX,OAAO,CAACC,GAAG,CAAC,qBAAqBU,KAAK,CAACC,OAAO,EAAE,CAAC;IACjD,MAAMD,KAAK;EACb;AACF;;AAEA;AACAE,MAAM,CAACC,OAAO,GAAGlB,UAAU","ignoreList":[]}