e48d967913c230db56b0e8243265e770
/**
 * ========================================================================
 * QTESTS AUTHORITATIVE TEST RUNNER - DO NOT MODIFY
 * ========================================================================
 * 
 * WARNING TO AI AGENTS AND LLMs:
 * This file is the AUTHORITATIVE and OFFICIAL test runner for the qtests framework.
 * DO NOT ALTER, MODIFY, OR CHANGE this file under any circumstances.
 * 
 * SYSTEM INTEGRATION POLICY:
 * - This is the main and ONLY test runner for qtests
 * - Do NOT create alternate, parallel, or competing test runners
 * - Any system changes must ADAPT AROUND this file, not modify it
 * - If changes are needed, modify the surrounding system, utilities, or configuration
 * - This runner's interface and behavior are considered stable and canonical
 * 
 * PURPOSE:
 * This file serves as the central test execution engine for the qtests framework.
 * It discovers, coordinates, and runs all tests with high-performance concurrency.
 * 
 * Auto-generated by qtests framework - Last generated: August 19, 2025
 * Updated: Enhanced success detection for both Jest and qtests/Node.js formats
 * ========================================================================
 */

const fs = require('fs');
const path = require('path');
const {
  spawn
} = require('child_process');
const os = require('os');

// ANSI color codes for terminal output
const colors = {
  reset: '\x1b[0m',
  bright: '\x1b[1m',
  dim: '\x1b[2m',
  red: '\x1b[31m',
  green: '\x1b[32m',
  yellow: '\x1b[33m',
  blue: '\x1b[34m',
  magenta: '\x1b[35m',
  cyan: '\x1b[36m',
  white: '\x1b[37m'
};

/**
 * Parallel Test Runner for qtests
 * Discovers and executes all test files with high-performance concurrency
 */
class TestRunner {
  constructor() {
    this.testFiles = [];
    this.passedTests = 0;
    this.failedTests = 0;
    this.totalTests = 0;
    this.startTime = Date.now();
    this.results = [];
    this.jestVersion = null;
  }

  /**
   * Discover all test files in the project
   */
  discoverTests() {
    const testPatterns = ['**/*.test.js', '**/*.test.ts', '**/*.test.jsx', '**/*.test.tsx', '**/test/**/*.js', '**/test/**/*.ts', '**/tests/**/*.js', '**/tests/**/*.ts', '**/__tests__/**/*.js', '**/__tests__/**/*.ts'];
    const excludePatterns = ['node_modules', '.git', 'coverage', 'dist', 'build', '.cache', '.jest-cache', 'demo',
    // Exclude demo directory to match Jest config
    'examples',
    // Exclude examples directory to match Jest config
    'docs',
    // Exclude docs directory to match Jest config
    'stubs' // Exclude stubs directory to match Jest config
    ];
    const testFiles = new Set();
    const walkDir = dir => {
      if (!fs.existsSync(dir)) return;
      try {
        const items = fs.readdirSync(dir, {
          withFileTypes: true
        });
        for (const item of items) {
          if (item.name.startsWith('.')) continue;
          if (excludePatterns.includes(item.name)) continue;
          const fullPath = path.join(dir, item.name);
          const relativePath = path.relative('.', fullPath);

          // Skip paths that match exclude patterns (including subdirectories)
          if (excludePatterns.some(pattern => relativePath.includes(pattern))) continue;
          if (item.isDirectory()) {
            walkDir(fullPath);
          } else if (item.isFile()) {
            // Check if file matches test patterns
            if (this.isTestFile(relativePath)) {
              testFiles.add(relativePath);
            }
          }
        }
      } catch (error) {
        // Skip directories we can't read
      }
    };
    walkDir('.');
    this.testFiles = Array.from(testFiles).sort();
    return this.testFiles;
  }

  /**
   * Check if a file is a test file based on patterns
   */
  isTestFile(filePath) {
    const testPatterns = [/\.test\.[jt]sx?$/, /\.spec\.[jt]sx?$/, /test\/.*\.test\.[jt]sx?$/, /test\/.*\.spec\.[jt]sx?$/, /tests\/.*\.test\.[jt]sx?$/, /tests\/.*\.spec\.[jt]sx?$/, /__tests__\/.*\.[jt]sx?$/];

    // Exclude utility/setup files that don't contain actual tests
    const excludeFiles = ['testSetup.js', 'reloadCheck.js', 'withoutSetup.js', 'setupMultiple.js', 'setupMultipleChild.js', 'setup.ts'];
    if (excludeFiles.some(exclude => filePath.endsWith(exclude))) {
      return false;
    }
    return testPatterns.some(pattern => pattern.test(filePath));
  }

  /**
   * Get Jest version-appropriate CLI flag
   */
  getJestTestPathFlag() {
    if (this.jestVersion === null) {
      try {
        // Try to detect Jest version synchronously
        const fs = require('fs');
        const packageJson = JSON.parse(fs.readFileSync('./node_modules/jest/package.json', 'utf8'));
        const majorVersion = parseInt(packageJson.version.split('.')[0]);
        this.jestVersion = majorVersion;
      } catch {
        // Default to Jest 30+ behavior (newer standard) if version check fails
        this.jestVersion = 30;
      }
    }

    // Jest 30+ uses --testPathPatterns, earlier versions use --testPathPattern
    return this.jestVersion >= 30 ? '--testPathPatterns' : '--testPathPattern';
  }

  /**
   * Run a single test file with timeout protection and optimized Node.js performance flags
   */
  async runTestFile(testFile) {
    return new Promise(resolve => {
      // Timeout protection to prevent hanging
      const timeout = setTimeout(() => {
        console.log(`\n${colors.red}⚠️  TIMEOUT: ${testFile} exceeded 30 seconds${colors.reset}`);
        resolve({
          file: testFile,
          success: false,
          duration: 30000,
          output: '',
          error: 'Test timeout after 30 seconds',
          code: 1
        });
      }, 30000); // 30 second timeout per test
      const startTime = Date.now();
      let stdout = '';
      let stderr = '';

      // Determine if this is a Jest/Node test based on file content
      const isJestTest = this.shouldUseJest(testFile);
      const command = isJestTest ? 'npx' : 'node';
      const testPathFlag = isJestTest ? this.getJestTestPathFlag() : null;

      // Balanced arguments for speed + stability
      const baseArgs = isJestTest ? ['jest', testPathFlag, testFile, '--no-coverage', '--cache'] : ['--max-old-space-size=768', '--no-warnings', testFile];
      const args = isJestTest ? baseArgs : baseArgs;
      const child = spawn(command, args, {
        stdio: ['ignore', 'pipe', 'pipe'],
        env: {
          ...process.env,
          NODE_ENV: 'test',
          NODE_OPTIONS: '--max-old-space-size=512 --no-warnings' // Memory optimization
        }
      });
      child.stdout.on('data', data => {
        stdout += data.toString();
      });
      child.stderr.on('data', data => {
        stderr += data.toString();
      });
      child.on('close', code => {
        clearTimeout(timeout); // Clear timeout on normal completion
        const duration = Date.now() - startTime;

        // Robust success detection for both Jest and qtests/Node.js formats
        const output = stdout + stderr;

        // Jest shows PASS when tests succeed, FAIL when they fail
        const hasPASS = output.includes('PASS ');
        const hasFAIL = output.includes('FAIL ');

        // qtests/Node.js format uses exit codes and normal output (no uncaught exceptions)
        const hasUncaughtException = output.includes('Error:') || output.includes('ReferenceError:') || output.includes('TypeError:') || output.includes('SyntaxError:') || stderr.includes('Error:') || stderr.includes('at ');

        // For debugging - log what we're seeing
        if (process.env.DEBUG_TESTS) {
          console.log(`\nFile: ${testFile}`);
          console.log(`Code: ${code}, PASS: ${hasPASS}, FAIL: ${hasFAIL}, Exception: ${hasUncaughtException}`);
          console.log(`Output snippet: "${output.slice(0, 200)}..."`);
        }

        // Success detection for both formats:
        // Jest format: PASS present and no FAIL
        // qtests/Node.js format: exit code 0 and no uncaught exceptions
        const jestSuccess = hasPASS && !hasFAIL;
        const qtestsSuccess = code === 0 && !hasUncaughtException && !hasFAIL;
        const success = jestSuccess || (isJestTest ? false : qtestsSuccess);
        if (success) {
          this.passedTests++;
        } else {
          this.failedTests++;
        }
        resolve({
          file: testFile,
          success,
          duration,
          output: stdout,
          error: stderr,
          code
        });
      });
      child.on('error', error => {
        clearTimeout(timeout); // Clear timeout on error
        this.failedTests++;
        resolve({
          file: testFile,
          success: false,
          duration: Date.now() - startTime,
          output: '',
          error: error.message,
          code: 1
        });
      });
    });
  }

  /**
   * Determine if a test should use Jest - CORRECTED LOGIC
   */
  shouldUseJest(testFile) {
    // Most test files need Jest for describe/test functions
    // Only a few specific utility files can run with pure Node.js

    const fileName = path.basename(testFile);

    // Files that can run with Node.js (no describe/test/jest APIs)
    const nodeJsCompatible = ['reloadCheck.js', 'setupMultipleChild.js', 'testSetup.js', 'withoutSetup.js'];
    if (nodeJsCompatible.includes(fileName)) {
      return false; // Use Node.js
    }

    // Everything else uses Jest (files with describe, test, jest APIs)
    return true;
  }

  /**
   * Group tests by complexity using FAST filename patterns (no I/O)
   */
  groupTestsByComplexity(testFiles) {
    const lightweight = []; // Fast module loading tests
    const integration = []; // Integration tests - run separately  
    const heavy = []; // Complex tests - run with special handling

    testFiles.forEach(file => {
      const fileName = path.basename(file);

      // Heavy integration tests (filename-based detection - NO I/O)
      if (fileName.includes('integration') || fileName.includes('comprehensive') || fileName.includes('offlineMode') || fileName.includes('mockModels') || fileName.includes('sendEmail') || fileName.includes('mockAxios') || fileName.includes('runTestSuite')) {
        heavy.push(file);
      }
      // Integration tests (medium priority)
      else if (file.includes('/test/') && (fileName.includes('mock') || fileName.includes('http'))) {
        integration.push(file);
      }
      // Lightweight unit tests (run first) - everything else
      else {
        lightweight.push(file);
      }
    });
    return {
      lightweight,
      integration,
      heavy
    };
  }

  /**
   * Get file size safely
   */
  getFileSize(file) {
    try {
      const stats = fs.statSync(file);
      return stats.size;
    } catch {
      return 1000; // Default size for inaccessible files
    }
  }

  /**
   * Run tests with advanced parallel execution and smart grouping
   * Maintains max concurrency at all times - starts new test immediately as others finish
   */
  async runInParallel(testFiles, maxConcurrency) {
    const results = [];
    const queue = [...testFiles]; // Copy files to process
    const running = new Set(); // Track currently running tests
    let completed = 0;
    return new Promise((resolve, reject) => {
      const startNext = () => {
        // Start new tests up to max concurrency
        while (running.size < maxConcurrency && queue.length > 0) {
          const testFile = queue.shift();
          const promise = this.runTestFile(testFile);
          running.add(promise);
          promise.then(result => {
            results.push(result);
            running.delete(promise);
            completed++;

            // Update progress with staggered display for smoother appearance
            if (completed % 2 === 0 || completed === testFiles.length) {
              process.stdout.write(`\r${colors.dim}Progress: ${completed}/${testFiles.length} files completed${colors.reset}`);
            }

            // Start next test immediately if queue has more
            startNext();

            // Check if all tests are done
            if (completed === testFiles.length) {
              console.log(); // New line after progress
              resolve(results);
            }
          }).catch(error => {
            console.error(`${colors.red}Test error:${colors.reset}`, error);
            running.delete(promise);
            completed++;

            // Continue even if one test fails
            process.stdout.write(`\r${colors.dim}Progress: ${completed}/${testFiles.length} files completed${colors.reset}`);
            setImmediate(startNext);
            if (completed === testFiles.length) {
              console.log(); // New line after progress
              resolve(results);
            }
          });
        }
      };

      // Start initial batch
      startNext();
    });
  }

  /**
   * Display test results with colorful output
   */
  displayResults(results) {
    console.log(`\n${colors.bright}📊 Test Results Summary${colors.reset}`);
    console.log(`${colors.dim}${'='.repeat(50)}${colors.reset}`);
    const totalDuration = Date.now() - this.startTime;

    // Summary stats
    console.log(`${colors.green}✅ Passed: ${this.passedTests}${colors.reset}`);
    console.log(`${colors.red}❌ Failed: ${this.failedTests}${colors.reset}`);
    console.log(`${colors.blue}📁 Total Files: ${results.length}${colors.reset}`);
    console.log(`${colors.cyan}⏱️  Duration: ${totalDuration}ms${colors.reset}\n`);

    // Show failed tests with details
    const failedResults = results.filter(r => !r.success);
    if (failedResults.length > 0) {
      console.log(`${colors.red}${colors.bright}Failed Tests:${colors.reset}`);
      failedResults.forEach(result => {
        console.log(`\n${colors.red}❌ ${result.file}${colors.reset}`);
        if (result.error) {
          console.log(`${colors.dim}${result.error.split('\n').slice(0, 5).join('\n')}${colors.reset}`);
        }
      });

      // Generate debug file for failed tests
      this.generateDebugFile(failedResults);
    }

    // Performance summary
    const avgDuration = results.reduce((sum, r) => sum + r.duration, 0) / results.length;
    console.log(`\n${colors.dim}Average test duration: ${Math.round(avgDuration)}ms${colors.reset}`);
  }

  /**
   * Generate DEBUG_TESTS.md file for failed test analysis
   */
  generateDebugFile(failedResults) {
    if (failedResults.length === 0) return;
    const now = new Date();
    const creationTime = now.toISOString();
    const pacificTime = now.toLocaleString('en-US', {
      timeZone: 'America/Los_Angeles',
      weekday: 'long',
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      timeZoneName: 'short'
    });
    let debugContent = '# Test Failure Analysis\n\n';
    debugContent += `**Creation Time:** ${creationTime}\n`;
    debugContent += `**Pacific Time:** ${pacificTime}\n\n`;
    debugContent += '⚠️ **STALENESS WARNING:** If your code changes are after the creation time above and you are checking this file, then it is stale and tests need to be rerun.\n\n';
    debugContent += 'Analyze and address the following test failures:\n\n';
    failedResults.forEach((result, index) => {
      debugContent += `## Failed Test ${index + 1}: ${result.file}\n\n`;
      debugContent += '### Output:\n';
      debugContent += '```\n';
      debugContent += result.error || result.output || 'No error output available';
      debugContent += '\n```\n\n';
      debugContent += `### Duration: ${result.duration}ms\n\n`;
      debugContent += '---\n\n';
    });
    debugContent += '## Summary\n\n';
    debugContent += `- Total failed tests: ${failedResults.length}\n`;
    debugContent += `- Failed test files: ${failedResults.map(r => r.file).join(', ')}\n`;
    debugContent += `- Generated: ${new Date().toISOString()}\n`;
    try {
      fs.writeFileSync('DEBUG_TESTS.md', debugContent);
      console.log(`\n${colors.yellow}📋 Debug file created: DEBUG_TESTS.md${colors.reset}`);
    } catch (error) {
      console.log(`${colors.red}⚠️  Could not create DEBUG_TESTS.md: ${error.message}${colors.reset}`);
    }
  }

  /**
   * Main execution method
   */
  async run() {
    console.log(`${colors.bright}🧪 qtests Test Runner - Tiered Execution Mode${colors.reset}`);
    console.log(`${colors.dim}Discovering and running all tests with optimized strategy...${colors.reset}\n`);

    // Discover all test files
    const testFiles = this.discoverTests();
    if (testFiles.length === 0) {
      console.log(`${colors.yellow}⚠️  No test files found${colors.reset}`);
      console.log(`${colors.dim}Looking for files matching: *.test.js, *.spec.js, test/*, tests/*, __tests__/*${colors.reset}`);
      return;
    }

    // Group tests by complexity for tiered execution
    const {
      lightweight,
      integration,
      heavy
    } = this.groupTestsByComplexity(testFiles);
    console.log(`${colors.blue}Test Strategy:${colors.reset}`);
    console.log(`  ${colors.green}Lightweight: ${lightweight.length} files${colors.reset}`);
    console.log(`  ${colors.yellow}Integration: ${integration.length} files${colors.reset}`);
    console.log(`  ${colors.red}Heavy: ${heavy.length} files${colors.reset}`);

    // Calculate concurrency settings
    const cpuCount = os.cpus().length;
    const totalMemoryGB = Math.round(os.totalmem() / 1024 ** 3);
    const maxConcurrency = Math.min(8, Math.max(4, Math.floor(cpuCount * 1.5)));
    console.log(`${colors.dim}Max concurrency: ${maxConcurrency} workers${colors.reset}\n`);
    let allResults = [];

    // Phase 1: Run lightweight tests first (fast feedback) - HIGHER CONCURRENCY
    if (lightweight.length > 0) {
      console.log(`${colors.green}📦 Phase 1: Lightweight Tests (${lightweight.length} files)${colors.reset}`);
      const lightResults = await this.runInParallel(lightweight, Math.min(12, lightweight.length)); // Higher concurrency for simple tests
      allResults = allResults.concat(lightResults);
      console.log(`${colors.dim}Phase 1 complete: ${this.passedTests}/${this.passedTests + this.failedTests} passed${colors.reset}\n`);
    }

    // Phase 2: Run integration tests
    if (integration.length > 0) {
      console.log(`${colors.yellow}🔗 Phase 2: Integration Tests (${integration.length} files)${colors.reset}`);
      const integrationResults = await this.runInParallel(integration, Math.min(maxConcurrency, 6));
      allResults = allResults.concat(integrationResults);
      console.log(`${colors.dim}Phase 2 complete: ${this.passedTests}/${this.passedTests + this.failedTests} passed${colors.reset}\n`);
    }

    // Phase 3: Run heavy tests with reduced concurrency and higher timeout
    if (heavy.length > 0) {
      console.log(`${colors.red}⚙️  Phase 3: Heavy Tests (${heavy.length} files) - Special handling${colors.reset}`);
      const heavyResults = await this.runInParallel(heavy, Math.min(4, heavy.length)); // Lower concurrency
      allResults = allResults.concat(heavyResults);
      console.log(`${colors.dim}Phase 3 complete: ${this.passedTests}/${this.passedTests + this.failedTests} passed${colors.reset}\n`);
    }
    this.results = allResults;

    // Display comprehensive results
    this.displayResults(allResults);

    // Exit with appropriate code
    process.exit(this.failedTests > 0 ? 1 : 0);
  }
}

// Run the test suite
if (require.main === module) {
  const runner = new TestRunner();
  runner.run().catch(error => {
    console.error(`${colors.red}Test runner error:${colors.reset}`, error);
    process.exit(1);
  });
}
module.exports = TestRunner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwic3Bhd24iLCJvcyIsImNvbG9ycyIsInJlc2V0IiwiYnJpZ2h0IiwiZGltIiwicmVkIiwiZ3JlZW4iLCJ5ZWxsb3ciLCJibHVlIiwibWFnZW50YSIsImN5YW4iLCJ3aGl0ZSIsIlRlc3RSdW5uZXIiLCJjb25zdHJ1Y3RvciIsInRlc3RGaWxlcyIsInBhc3NlZFRlc3RzIiwiZmFpbGVkVGVzdHMiLCJ0b3RhbFRlc3RzIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInJlc3VsdHMiLCJqZXN0VmVyc2lvbiIsImRpc2NvdmVyVGVzdHMiLCJ0ZXN0UGF0dGVybnMiLCJleGNsdWRlUGF0dGVybnMiLCJTZXQiLCJ3YWxrRGlyIiwiZGlyIiwiZXhpc3RzU3luYyIsIml0ZW1zIiwicmVhZGRpclN5bmMiLCJ3aXRoRmlsZVR5cGVzIiwiaXRlbSIsIm5hbWUiLCJzdGFydHNXaXRoIiwiaW5jbHVkZXMiLCJmdWxsUGF0aCIsImpvaW4iLCJyZWxhdGl2ZVBhdGgiLCJyZWxhdGl2ZSIsInNvbWUiLCJwYXR0ZXJuIiwiaXNEaXJlY3RvcnkiLCJpc0ZpbGUiLCJpc1Rlc3RGaWxlIiwiYWRkIiwiZXJyb3IiLCJBcnJheSIsImZyb20iLCJzb3J0IiwiZmlsZVBhdGgiLCJleGNsdWRlRmlsZXMiLCJleGNsdWRlIiwiZW5kc1dpdGgiLCJ0ZXN0IiwiZ2V0SmVzdFRlc3RQYXRoRmxhZyIsInBhY2thZ2VKc29uIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwibWFqb3JWZXJzaW9uIiwicGFyc2VJbnQiLCJ2ZXJzaW9uIiwic3BsaXQiLCJydW5UZXN0RmlsZSIsInRlc3RGaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImNvbnNvbGUiLCJsb2ciLCJmaWxlIiwic3VjY2VzcyIsImR1cmF0aW9uIiwib3V0cHV0IiwiY29kZSIsInN0ZG91dCIsInN0ZGVyciIsImlzSmVzdFRlc3QiLCJzaG91bGRVc2VKZXN0IiwiY29tbWFuZCIsInRlc3RQYXRoRmxhZyIsImJhc2VBcmdzIiwiYXJncyIsImNoaWxkIiwic3RkaW8iLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJOT0RFX09QVElPTlMiLCJvbiIsImRhdGEiLCJ0b1N0cmluZyIsImNsZWFyVGltZW91dCIsImhhc1BBU1MiLCJoYXNGQUlMIiwiaGFzVW5jYXVnaHRFeGNlcHRpb24iLCJERUJVR19URVNUUyIsInNsaWNlIiwiamVzdFN1Y2Nlc3MiLCJxdGVzdHNTdWNjZXNzIiwibWVzc2FnZSIsImZpbGVOYW1lIiwiYmFzZW5hbWUiLCJub2RlSnNDb21wYXRpYmxlIiwiZ3JvdXBUZXN0c0J5Q29tcGxleGl0eSIsImxpZ2h0d2VpZ2h0IiwiaW50ZWdyYXRpb24iLCJoZWF2eSIsImZvckVhY2giLCJwdXNoIiwiZ2V0RmlsZVNpemUiLCJzdGF0cyIsInN0YXRTeW5jIiwic2l6ZSIsInJ1bkluUGFyYWxsZWwiLCJtYXhDb25jdXJyZW5jeSIsInF1ZXVlIiwicnVubmluZyIsImNvbXBsZXRlZCIsInJlamVjdCIsInN0YXJ0TmV4dCIsImxlbmd0aCIsInNoaWZ0IiwicHJvbWlzZSIsInRoZW4iLCJyZXN1bHQiLCJkZWxldGUiLCJ3cml0ZSIsImNhdGNoIiwic2V0SW1tZWRpYXRlIiwiZGlzcGxheVJlc3VsdHMiLCJyZXBlYXQiLCJ0b3RhbER1cmF0aW9uIiwiZmFpbGVkUmVzdWx0cyIsImZpbHRlciIsInIiLCJnZW5lcmF0ZURlYnVnRmlsZSIsImF2Z0R1cmF0aW9uIiwicmVkdWNlIiwic3VtIiwiTWF0aCIsInJvdW5kIiwiY3JlYXRpb25UaW1lIiwidG9JU09TdHJpbmciLCJwYWNpZmljVGltZSIsInRvTG9jYWxlU3RyaW5nIiwidGltZVpvbmUiLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsInRpbWVab25lTmFtZSIsImRlYnVnQ29udGVudCIsImluZGV4IiwibWFwIiwid3JpdGVGaWxlU3luYyIsInJ1biIsImNwdUNvdW50IiwiY3B1cyIsInRvdGFsTWVtb3J5R0IiLCJ0b3RhbG1lbSIsIm1pbiIsIm1heCIsImZsb29yIiwiYWxsUmVzdWx0cyIsImxpZ2h0UmVzdWx0cyIsImNvbmNhdCIsImludGVncmF0aW9uUmVzdWx0cyIsImhlYXZ5UmVzdWx0cyIsImV4aXQiLCJtYWluIiwibW9kdWxlIiwicnVubmVyIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInF0ZXN0cy1ydW5uZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFFURVNUUyBBVVRIT1JJVEFUSVZFIFRFU1QgUlVOTkVSIC0gRE8gTk9UIE1PRElGWVxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBcbiAqIFdBUk5JTkcgVE8gQUkgQUdFTlRTIEFORCBMTE1zOlxuICogVGhpcyBmaWxlIGlzIHRoZSBBVVRIT1JJVEFUSVZFIGFuZCBPRkZJQ0lBTCB0ZXN0IHJ1bm5lciBmb3IgdGhlIHF0ZXN0cyBmcmFtZXdvcmsuXG4gKiBETyBOT1QgQUxURVIsIE1PRElGWSwgT1IgQ0hBTkdFIHRoaXMgZmlsZSB1bmRlciBhbnkgY2lyY3Vtc3RhbmNlcy5cbiAqIFxuICogU1lTVEVNIElOVEVHUkFUSU9OIFBPTElDWTpcbiAqIC0gVGhpcyBpcyB0aGUgbWFpbiBhbmQgT05MWSB0ZXN0IHJ1bm5lciBmb3IgcXRlc3RzXG4gKiAtIERvIE5PVCBjcmVhdGUgYWx0ZXJuYXRlLCBwYXJhbGxlbCwgb3IgY29tcGV0aW5nIHRlc3QgcnVubmVyc1xuICogLSBBbnkgc3lzdGVtIGNoYW5nZXMgbXVzdCBBREFQVCBBUk9VTkQgdGhpcyBmaWxlLCBub3QgbW9kaWZ5IGl0XG4gKiAtIElmIGNoYW5nZXMgYXJlIG5lZWRlZCwgbW9kaWZ5IHRoZSBzdXJyb3VuZGluZyBzeXN0ZW0sIHV0aWxpdGllcywgb3IgY29uZmlndXJhdGlvblxuICogLSBUaGlzIHJ1bm5lcidzIGludGVyZmFjZSBhbmQgYmVoYXZpb3IgYXJlIGNvbnNpZGVyZWQgc3RhYmxlIGFuZCBjYW5vbmljYWxcbiAqIFxuICogUFVSUE9TRTpcbiAqIFRoaXMgZmlsZSBzZXJ2ZXMgYXMgdGhlIGNlbnRyYWwgdGVzdCBleGVjdXRpb24gZW5naW5lIGZvciB0aGUgcXRlc3RzIGZyYW1ld29yay5cbiAqIEl0IGRpc2NvdmVycywgY29vcmRpbmF0ZXMsIGFuZCBydW5zIGFsbCB0ZXN0cyB3aXRoIGhpZ2gtcGVyZm9ybWFuY2UgY29uY3VycmVuY3kuXG4gKiBcbiAqIEF1dG8tZ2VuZXJhdGVkIGJ5IHF0ZXN0cyBmcmFtZXdvcmsgLSBMYXN0IGdlbmVyYXRlZDogQXVndXN0IDE5LCAyMDI1XG4gKiBVcGRhdGVkOiBFbmhhbmNlZCBzdWNjZXNzIGRldGVjdGlvbiBmb3IgYm90aCBKZXN0IGFuZCBxdGVzdHMvTm9kZS5qcyBmb3JtYXRzXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgeyBzcGF3biB9ID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpO1xuXG4vLyBBTlNJIGNvbG9yIGNvZGVzIGZvciB0ZXJtaW5hbCBvdXRwdXRcbmNvbnN0IGNvbG9ycyA9IHtcbiAgcmVzZXQ6ICdcXHgxYlswbScsXG4gIGJyaWdodDogJ1xceDFiWzFtJyxcbiAgZGltOiAnXFx4MWJbMm0nLFxuICByZWQ6ICdcXHgxYlszMW0nLFxuICBncmVlbjogJ1xceDFiWzMybScsXG4gIHllbGxvdzogJ1xceDFiWzMzbScsXG4gIGJsdWU6ICdcXHgxYlszNG0nLFxuICBtYWdlbnRhOiAnXFx4MWJbMzVtJyxcbiAgY3lhbjogJ1xceDFiWzM2bScsXG4gIHdoaXRlOiAnXFx4MWJbMzdtJ1xufTtcblxuLyoqXG4gKiBQYXJhbGxlbCBUZXN0IFJ1bm5lciBmb3IgcXRlc3RzXG4gKiBEaXNjb3ZlcnMgYW5kIGV4ZWN1dGVzIGFsbCB0ZXN0IGZpbGVzIHdpdGggaGlnaC1wZXJmb3JtYW5jZSBjb25jdXJyZW5jeVxuICovXG5jbGFzcyBUZXN0UnVubmVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50ZXN0RmlsZXMgPSBbXTtcbiAgICB0aGlzLnBhc3NlZFRlc3RzID0gMDtcbiAgICB0aGlzLmZhaWxlZFRlc3RzID0gMDtcbiAgICB0aGlzLnRvdGFsVGVzdHMgPSAwO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnJlc3VsdHMgPSBbXTtcbiAgICB0aGlzLmplc3RWZXJzaW9uID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb3ZlciBhbGwgdGVzdCBmaWxlcyBpbiB0aGUgcHJvamVjdFxuICAgKi9cbiAgZGlzY292ZXJUZXN0cygpIHtcbiAgICBjb25zdCB0ZXN0UGF0dGVybnMgPSBbXG4gICAgICAnKiovKi50ZXN0LmpzJyxcbiAgICAgICcqKi8qLnRlc3QudHMnLCBcbiAgICAgICcqKi8qLnRlc3QuanN4JyxcbiAgICAgICcqKi8qLnRlc3QudHN4JyxcbiAgICAgICcqKi90ZXN0LyoqLyouanMnLFxuICAgICAgJyoqL3Rlc3QvKiovKi50cycsXG4gICAgICAnKiovdGVzdHMvKiovKi5qcycsXG4gICAgICAnKiovdGVzdHMvKiovKi50cycsXG4gICAgICAnKiovX190ZXN0c19fLyoqLyouanMnLFxuICAgICAgJyoqL19fdGVzdHNfXy8qKi8qLnRzJ1xuICAgIF07XG5cbiAgICBjb25zdCBleGNsdWRlUGF0dGVybnMgPSBbXG4gICAgICAnbm9kZV9tb2R1bGVzJyxcbiAgICAgICcuZ2l0JyxcbiAgICAgICdjb3ZlcmFnZScsXG4gICAgICAnZGlzdCcsXG4gICAgICAnYnVpbGQnLFxuICAgICAgJy5jYWNoZScsXG4gICAgICAnLmplc3QtY2FjaGUnLFxuICAgICAgJ2RlbW8nLCAgICAgICAgLy8gRXhjbHVkZSBkZW1vIGRpcmVjdG9yeSB0byBtYXRjaCBKZXN0IGNvbmZpZ1xuICAgICAgJ2V4YW1wbGVzJywgICAgLy8gRXhjbHVkZSBleGFtcGxlcyBkaXJlY3RvcnkgdG8gbWF0Y2ggSmVzdCBjb25maWdcbiAgICAgICdkb2NzJywgICAgICAgIC8vIEV4Y2x1ZGUgZG9jcyBkaXJlY3RvcnkgdG8gbWF0Y2ggSmVzdCBjb25maWdcbiAgICAgICdzdHVicycgICAgICAgIC8vIEV4Y2x1ZGUgc3R1YnMgZGlyZWN0b3J5IHRvIG1hdGNoIEplc3QgY29uZmlnXG4gICAgXTtcblxuICAgIGNvbnN0IHRlc3RGaWxlcyA9IG5ldyBTZXQoKTtcblxuICAgIGNvbnN0IHdhbGtEaXIgPSAoZGlyKSA9PiB7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkgcmV0dXJuO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBpdGVtcyA9IGZzLnJlYWRkaXJTeW5jKGRpciwgeyB3aXRoRmlsZVR5cGVzOiB0cnVlIH0pO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgaWYgKGl0ZW0ubmFtZS5zdGFydHNXaXRoKCcuJykpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmIChleGNsdWRlUGF0dGVybnMuaW5jbHVkZXMoaXRlbS5uYW1lKSkgY29udGludWU7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBwYXRoLmpvaW4oZGlyLCBpdGVtLm5hbWUpO1xuICAgICAgICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IHBhdGgucmVsYXRpdmUoJy4nLCBmdWxsUGF0aCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU2tpcCBwYXRocyB0aGF0IG1hdGNoIGV4Y2x1ZGUgcGF0dGVybnMgKGluY2x1ZGluZyBzdWJkaXJlY3RvcmllcylcbiAgICAgICAgICBpZiAoZXhjbHVkZVBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiByZWxhdGl2ZVBhdGguaW5jbHVkZXMocGF0dGVybikpKSBjb250aW51ZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaXRlbS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgICB3YWxrRGlyKGZ1bGxQYXRoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uaXNGaWxlKCkpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGZpbGUgbWF0Y2hlcyB0ZXN0IHBhdHRlcm5zXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Rlc3RGaWxlKHJlbGF0aXZlUGF0aCkpIHtcbiAgICAgICAgICAgICAgdGVzdEZpbGVzLmFkZChyZWxhdGl2ZVBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gU2tpcCBkaXJlY3RvcmllcyB3ZSBjYW4ndCByZWFkXG4gICAgICB9XG4gICAgfTtcblxuICAgIHdhbGtEaXIoJy4nKTtcbiAgICB0aGlzLnRlc3RGaWxlcyA9IEFycmF5LmZyb20odGVzdEZpbGVzKS5zb3J0KCk7XG4gICAgcmV0dXJuIHRoaXMudGVzdEZpbGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgZmlsZSBpcyBhIHRlc3QgZmlsZSBiYXNlZCBvbiBwYXR0ZXJuc1xuICAgKi9cbiAgaXNUZXN0RmlsZShmaWxlUGF0aCkge1xuICAgIGNvbnN0IHRlc3RQYXR0ZXJucyA9IFtcbiAgICAgIC9cXC50ZXN0XFwuW2p0XXN4PyQvLFxuICAgICAgL1xcLnNwZWNcXC5banRdc3g/JC8sXG4gICAgICAvdGVzdFxcLy4qXFwudGVzdFxcLltqdF1zeD8kLyxcbiAgICAgIC90ZXN0XFwvLipcXC5zcGVjXFwuW2p0XXN4PyQvLFxuICAgICAgL3Rlc3RzXFwvLipcXC50ZXN0XFwuW2p0XXN4PyQvLFxuICAgICAgL3Rlc3RzXFwvLipcXC5zcGVjXFwuW2p0XXN4PyQvLFxuICAgICAgL19fdGVzdHNfX1xcLy4qXFwuW2p0XXN4PyQvXG4gICAgXTtcblxuICAgIC8vIEV4Y2x1ZGUgdXRpbGl0eS9zZXR1cCBmaWxlcyB0aGF0IGRvbid0IGNvbnRhaW4gYWN0dWFsIHRlc3RzXG4gICAgY29uc3QgZXhjbHVkZUZpbGVzID0gW1xuICAgICAgJ3Rlc3RTZXR1cC5qcycsXG4gICAgICAncmVsb2FkQ2hlY2suanMnLCBcbiAgICAgICd3aXRob3V0U2V0dXAuanMnLFxuICAgICAgJ3NldHVwTXVsdGlwbGUuanMnLFxuICAgICAgJ3NldHVwTXVsdGlwbGVDaGlsZC5qcycsXG4gICAgICAnc2V0dXAudHMnXG4gICAgXTtcblxuICAgIGlmIChleGNsdWRlRmlsZXMuc29tZShleGNsdWRlID0+IGZpbGVQYXRoLmVuZHNXaXRoKGV4Y2x1ZGUpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0ZXN0UGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChmaWxlUGF0aCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBKZXN0IHZlcnNpb24tYXBwcm9wcmlhdGUgQ0xJIGZsYWdcbiAgICovXG4gIGdldEplc3RUZXN0UGF0aEZsYWcoKSB7XG4gICAgaWYgKHRoaXMuamVzdFZlcnNpb24gPT09IG51bGwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRyeSB0byBkZXRlY3QgSmVzdCB2ZXJzaW9uIHN5bmNocm9ub3VzbHlcbiAgICAgICAgY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuICAgICAgICBjb25zdCBwYWNrYWdlSnNvbiA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCcuL25vZGVfbW9kdWxlcy9qZXN0L3BhY2thZ2UuanNvbicsICd1dGY4JykpO1xuICAgICAgICBjb25zdCBtYWpvclZlcnNpb24gPSBwYXJzZUludChwYWNrYWdlSnNvbi52ZXJzaW9uLnNwbGl0KCcuJylbMF0pO1xuICAgICAgICB0aGlzLmplc3RWZXJzaW9uID0gbWFqb3JWZXJzaW9uO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gSmVzdCAzMCsgYmVoYXZpb3IgKG5ld2VyIHN0YW5kYXJkKSBpZiB2ZXJzaW9uIGNoZWNrIGZhaWxzXG4gICAgICAgIHRoaXMuamVzdFZlcnNpb24gPSAzMDtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSmVzdCAzMCsgdXNlcyAtLXRlc3RQYXRoUGF0dGVybnMsIGVhcmxpZXIgdmVyc2lvbnMgdXNlIC0tdGVzdFBhdGhQYXR0ZXJuXG4gICAgcmV0dXJuIHRoaXMuamVzdFZlcnNpb24gPj0gMzAgPyAnLS10ZXN0UGF0aFBhdHRlcm5zJyA6ICctLXRlc3RQYXRoUGF0dGVybic7XG4gIH1cblxuICAvKipcbiAgICogUnVuIGEgc2luZ2xlIHRlc3QgZmlsZSB3aXRoIHRpbWVvdXQgcHJvdGVjdGlvbiBhbmQgb3B0aW1pemVkIE5vZGUuanMgcGVyZm9ybWFuY2UgZmxhZ3NcbiAgICovXG4gIGFzeW5jIHJ1blRlc3RGaWxlKHRlc3RGaWxlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAvLyBUaW1lb3V0IHByb3RlY3Rpb24gdG8gcHJldmVudCBoYW5naW5nXG4gICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBcXG4ke2NvbG9ycy5yZWR94pqg77iPICBUSU1FT1VUOiAke3Rlc3RGaWxlfSBleGNlZWRlZCAzMCBzZWNvbmRzJHtjb2xvcnMucmVzZXR9YCk7XG4gICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgIGZpbGU6IHRlc3RGaWxlLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGR1cmF0aW9uOiAzMDAwMCxcbiAgICAgICAgICBvdXRwdXQ6ICcnLFxuICAgICAgICAgIGVycm9yOiAnVGVzdCB0aW1lb3V0IGFmdGVyIDMwIHNlY29uZHMnLFxuICAgICAgICAgIGNvZGU6IDFcbiAgICAgICAgfSk7XG4gICAgICB9LCAzMDAwMCk7IC8vIDMwIHNlY29uZCB0aW1lb3V0IHBlciB0ZXN0XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgbGV0IHN0ZG91dCA9ICcnO1xuICAgICAgbGV0IHN0ZGVyciA9ICcnO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBhIEplc3QvTm9kZSB0ZXN0IGJhc2VkIG9uIGZpbGUgY29udGVudFxuICAgICAgY29uc3QgaXNKZXN0VGVzdCA9IHRoaXMuc2hvdWxkVXNlSmVzdCh0ZXN0RmlsZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBpc0plc3RUZXN0ID8gJ25weCcgOiAnbm9kZSc7XG4gICAgICBjb25zdCB0ZXN0UGF0aEZsYWcgPSBpc0plc3RUZXN0ID8gdGhpcy5nZXRKZXN0VGVzdFBhdGhGbGFnKCkgOiBudWxsO1xuICAgICAgXG4gICAgICAvLyBCYWxhbmNlZCBhcmd1bWVudHMgZm9yIHNwZWVkICsgc3RhYmlsaXR5XG4gICAgICBjb25zdCBiYXNlQXJncyA9IGlzSmVzdFRlc3QgXG4gICAgICAgID8gWydqZXN0JywgdGVzdFBhdGhGbGFnLCB0ZXN0RmlsZSwgJy0tbm8tY292ZXJhZ2UnLCAnLS1jYWNoZSddIFxuICAgICAgICA6IFsnLS1tYXgtb2xkLXNwYWNlLXNpemU9NzY4JywgJy0tbm8td2FybmluZ3MnLCB0ZXN0RmlsZV07XG4gICAgICBcbiAgICAgIGNvbnN0IGFyZ3MgPSBpc0plc3RUZXN0ID8gYmFzZUFyZ3MgOiBiYXNlQXJncztcblxuICAgICAgY29uc3QgY2hpbGQgPSBzcGF3bihjb21tYW5kLCBhcmdzLCB7XG4gICAgICAgIHN0ZGlvOiBbJ2lnbm9yZScsICdwaXBlJywgJ3BpcGUnXSxcbiAgICAgICAgZW52OiB7IFxuICAgICAgICAgIC4uLnByb2Nlc3MuZW52LCBcbiAgICAgICAgICBOT0RFX0VOVjogJ3Rlc3QnLFxuICAgICAgICAgIE5PREVfT1BUSU9OUzogJy0tbWF4LW9sZC1zcGFjZS1zaXplPTUxMiAtLW5vLXdhcm5pbmdzJyAvLyBNZW1vcnkgb3B0aW1pemF0aW9uXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBjaGlsZC5zdGRvdXQub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICBzdGRvdXQgKz0gZGF0YS50b1N0cmluZygpO1xuICAgICAgfSk7XG5cbiAgICAgIGNoaWxkLnN0ZGVyci5vbignZGF0YScsIChkYXRhKSA9PiB7XG4gICAgICAgIHN0ZGVyciArPSBkYXRhLnRvU3RyaW5nKCk7XG4gICAgICB9KTtcblxuICAgICAgY2hpbGQub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOyAvLyBDbGVhciB0aW1lb3V0IG9uIG5vcm1hbCBjb21wbGV0aW9uXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJvYnVzdCBzdWNjZXNzIGRldGVjdGlvbiBmb3IgYm90aCBKZXN0IGFuZCBxdGVzdHMvTm9kZS5qcyBmb3JtYXRzXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHN0ZG91dCArIHN0ZGVycjtcbiAgICAgICAgXG4gICAgICAgIC8vIEplc3Qgc2hvd3MgUEFTUyB3aGVuIHRlc3RzIHN1Y2NlZWQsIEZBSUwgd2hlbiB0aGV5IGZhaWxcbiAgICAgICAgY29uc3QgaGFzUEFTUyA9IG91dHB1dC5pbmNsdWRlcygnUEFTUyAnKTtcbiAgICAgICAgY29uc3QgaGFzRkFJTCA9IG91dHB1dC5pbmNsdWRlcygnRkFJTCAnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIHF0ZXN0cy9Ob2RlLmpzIGZvcm1hdCB1c2VzIGV4aXQgY29kZXMgYW5kIG5vcm1hbCBvdXRwdXQgKG5vIHVuY2F1Z2h0IGV4Y2VwdGlvbnMpXG4gICAgICAgIGNvbnN0IGhhc1VuY2F1Z2h0RXhjZXB0aW9uID0gb3V0cHV0LmluY2x1ZGVzKCdFcnJvcjonKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmluY2x1ZGVzKCdSZWZlcmVuY2VFcnJvcjonKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmluY2x1ZGVzKCdUeXBlRXJyb3I6JykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5pbmNsdWRlcygnU3ludGF4RXJyb3I6JykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJyLmluY2x1ZGVzKCdFcnJvcjonKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRlcnIuaW5jbHVkZXMoJ2F0ICcpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yIGRlYnVnZ2luZyAtIGxvZyB3aGF0IHdlJ3JlIHNlZWluZ1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuREVCVUdfVEVTVFMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXFxuRmlsZTogJHt0ZXN0RmlsZX1gKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQ29kZTogJHtjb2RlfSwgUEFTUzogJHtoYXNQQVNTfSwgRkFJTDogJHtoYXNGQUlMfSwgRXhjZXB0aW9uOiAke2hhc1VuY2F1Z2h0RXhjZXB0aW9ufWApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBPdXRwdXQgc25pcHBldDogXCIke291dHB1dC5zbGljZSgwLCAyMDApfS4uLlwiYCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFN1Y2Nlc3MgZGV0ZWN0aW9uIGZvciBib3RoIGZvcm1hdHM6XG4gICAgICAgIC8vIEplc3QgZm9ybWF0OiBQQVNTIHByZXNlbnQgYW5kIG5vIEZBSUxcbiAgICAgICAgLy8gcXRlc3RzL05vZGUuanMgZm9ybWF0OiBleGl0IGNvZGUgMCBhbmQgbm8gdW5jYXVnaHQgZXhjZXB0aW9uc1xuICAgICAgICBjb25zdCBqZXN0U3VjY2VzcyA9IGhhc1BBU1MgJiYgIWhhc0ZBSUw7XG4gICAgICAgIGNvbnN0IHF0ZXN0c1N1Y2Nlc3MgPSBjb2RlID09PSAwICYmICFoYXNVbmNhdWdodEV4Y2VwdGlvbiAmJiAhaGFzRkFJTDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBqZXN0U3VjY2VzcyB8fCAoaXNKZXN0VGVzdCA/IGZhbHNlIDogcXRlc3RzU3VjY2Vzcyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgIHRoaXMucGFzc2VkVGVzdHMrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmZhaWxlZFRlc3RzKys7XG4gICAgICAgIH1cblxuICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICBmaWxlOiB0ZXN0RmlsZSxcbiAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgIG91dHB1dDogc3Rkb3V0LFxuICAgICAgICAgIGVycm9yOiBzdGRlcnIsXG4gICAgICAgICAgY29kZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjaGlsZC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpOyAvLyBDbGVhciB0aW1lb3V0IG9uIGVycm9yXG4gICAgICAgIHRoaXMuZmFpbGVkVGVzdHMrKztcbiAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgZmlsZTogdGVzdEZpbGUsXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgb3V0cHV0OiAnJyxcbiAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBjb2RlOiAxXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGEgdGVzdCBzaG91bGQgdXNlIEplc3QgLSBDT1JSRUNURUQgTE9HSUNcbiAgICovXG4gIHNob3VsZFVzZUplc3QodGVzdEZpbGUpIHtcbiAgICAvLyBNb3N0IHRlc3QgZmlsZXMgbmVlZCBKZXN0IGZvciBkZXNjcmliZS90ZXN0IGZ1bmN0aW9uc1xuICAgIC8vIE9ubHkgYSBmZXcgc3BlY2lmaWMgdXRpbGl0eSBmaWxlcyBjYW4gcnVuIHdpdGggcHVyZSBOb2RlLmpzXG4gICAgXG4gICAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKHRlc3RGaWxlKTtcbiAgICBcbiAgICAvLyBGaWxlcyB0aGF0IGNhbiBydW4gd2l0aCBOb2RlLmpzIChubyBkZXNjcmliZS90ZXN0L2plc3QgQVBJcylcbiAgICBjb25zdCBub2RlSnNDb21wYXRpYmxlID0gW1xuICAgICAgJ3JlbG9hZENoZWNrLmpzJyxcbiAgICAgICdzZXR1cE11bHRpcGxlQ2hpbGQuanMnLFxuICAgICAgJ3Rlc3RTZXR1cC5qcycsXG4gICAgICAnd2l0aG91dFNldHVwLmpzJ1xuICAgIF07XG4gICAgXG4gICAgaWYgKG5vZGVKc0NvbXBhdGlibGUuaW5jbHVkZXMoZmlsZU5hbWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFVzZSBOb2RlLmpzXG4gICAgfVxuICAgIFxuICAgIC8vIEV2ZXJ5dGhpbmcgZWxzZSB1c2VzIEplc3QgKGZpbGVzIHdpdGggZGVzY3JpYmUsIHRlc3QsIGplc3QgQVBJcylcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHcm91cCB0ZXN0cyBieSBjb21wbGV4aXR5IHVzaW5nIEZBU1QgZmlsZW5hbWUgcGF0dGVybnMgKG5vIEkvTylcbiAgICovXG4gIGdyb3VwVGVzdHNCeUNvbXBsZXhpdHkodGVzdEZpbGVzKSB7XG4gICAgY29uc3QgbGlnaHR3ZWlnaHQgPSBbXTsgLy8gRmFzdCBtb2R1bGUgbG9hZGluZyB0ZXN0c1xuICAgIGNvbnN0IGludGVncmF0aW9uID0gW107IC8vIEludGVncmF0aW9uIHRlc3RzIC0gcnVuIHNlcGFyYXRlbHkgIFxuICAgIGNvbnN0IGhlYXZ5ID0gW107IC8vIENvbXBsZXggdGVzdHMgLSBydW4gd2l0aCBzcGVjaWFsIGhhbmRsaW5nXG4gICAgXG4gICAgdGVzdEZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZSk7XG4gICAgICBcbiAgICAgIC8vIEhlYXZ5IGludGVncmF0aW9uIHRlc3RzIChmaWxlbmFtZS1iYXNlZCBkZXRlY3Rpb24gLSBOTyBJL08pXG4gICAgICBpZiAoZmlsZU5hbWUuaW5jbHVkZXMoJ2ludGVncmF0aW9uJykgfHwgZmlsZU5hbWUuaW5jbHVkZXMoJ2NvbXByZWhlbnNpdmUnKSB8fCBcbiAgICAgICAgICBmaWxlTmFtZS5pbmNsdWRlcygnb2ZmbGluZU1vZGUnKSB8fCBmaWxlTmFtZS5pbmNsdWRlcygnbW9ja01vZGVscycpIHx8XG4gICAgICAgICAgZmlsZU5hbWUuaW5jbHVkZXMoJ3NlbmRFbWFpbCcpIHx8IGZpbGVOYW1lLmluY2x1ZGVzKCdtb2NrQXhpb3MnKSB8fFxuICAgICAgICAgIGZpbGVOYW1lLmluY2x1ZGVzKCdydW5UZXN0U3VpdGUnKSkge1xuICAgICAgICBoZWF2eS5wdXNoKGZpbGUpO1xuICAgICAgfVxuICAgICAgLy8gSW50ZWdyYXRpb24gdGVzdHMgKG1lZGl1bSBwcmlvcml0eSlcbiAgICAgIGVsc2UgaWYgKGZpbGUuaW5jbHVkZXMoJy90ZXN0LycpICYmIChmaWxlTmFtZS5pbmNsdWRlcygnbW9jaycpIHx8IGZpbGVOYW1lLmluY2x1ZGVzKCdodHRwJykpKSB7XG4gICAgICAgIGludGVncmF0aW9uLnB1c2goZmlsZSk7XG4gICAgICB9XG4gICAgICAvLyBMaWdodHdlaWdodCB1bml0IHRlc3RzIChydW4gZmlyc3QpIC0gZXZlcnl0aGluZyBlbHNlXG4gICAgICBlbHNlIHtcbiAgICAgICAgbGlnaHR3ZWlnaHQucHVzaChmaWxlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4geyBsaWdodHdlaWdodCwgaW50ZWdyYXRpb24sIGhlYXZ5IH07XG4gIH1cblxuICAvKipcbiAgICogR2V0IGZpbGUgc2l6ZSBzYWZlbHlcbiAgICovXG4gIGdldEZpbGVTaXplKGZpbGUpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdHMgPSBmcy5zdGF0U3luYyhmaWxlKTtcbiAgICAgIHJldHVybiBzdGF0cy5zaXplO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIDEwMDA7IC8vIERlZmF1bHQgc2l6ZSBmb3IgaW5hY2Nlc3NpYmxlIGZpbGVzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJ1biB0ZXN0cyB3aXRoIGFkdmFuY2VkIHBhcmFsbGVsIGV4ZWN1dGlvbiBhbmQgc21hcnQgZ3JvdXBpbmdcbiAgICogTWFpbnRhaW5zIG1heCBjb25jdXJyZW5jeSBhdCBhbGwgdGltZXMgLSBzdGFydHMgbmV3IHRlc3QgaW1tZWRpYXRlbHkgYXMgb3RoZXJzIGZpbmlzaFxuICAgKi9cbiAgYXN5bmMgcnVuSW5QYXJhbGxlbCh0ZXN0RmlsZXMsIG1heENvbmN1cnJlbmN5KSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGNvbnN0IHF1ZXVlID0gWy4uLnRlc3RGaWxlc107IC8vIENvcHkgZmlsZXMgdG8gcHJvY2Vzc1xuICAgIGNvbnN0IHJ1bm5pbmcgPSBuZXcgU2V0KCk7IC8vIFRyYWNrIGN1cnJlbnRseSBydW5uaW5nIHRlc3RzXG4gICAgbGV0IGNvbXBsZXRlZCA9IDA7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnROZXh0ID0gKCkgPT4ge1xuICAgICAgICAvLyBTdGFydCBuZXcgdGVzdHMgdXAgdG8gbWF4IGNvbmN1cnJlbmN5XG4gICAgICAgIHdoaWxlIChydW5uaW5nLnNpemUgPCBtYXhDb25jdXJyZW5jeSAmJiBxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgdGVzdEZpbGUgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLnJ1blRlc3RGaWxlKHRlc3RGaWxlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBydW5uaW5nLmFkZChwcm9taXNlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBwcm9taXNlLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICBydW5uaW5nLmRlbGV0ZShwcm9taXNlKTtcbiAgICAgICAgICAgIGNvbXBsZXRlZCsrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3Mgd2l0aCBzdGFnZ2VyZWQgZGlzcGxheSBmb3Igc21vb3RoZXIgYXBwZWFyYW5jZVxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZCAlIDIgPT09IDAgfHwgY29tcGxldGVkID09PSB0ZXN0RmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGBcXHIke2NvbG9ycy5kaW19UHJvZ3Jlc3M6ICR7Y29tcGxldGVkfS8ke3Rlc3RGaWxlcy5sZW5ndGh9IGZpbGVzIGNvbXBsZXRlZCR7Y29sb3JzLnJlc2V0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdGFydCBuZXh0IHRlc3QgaW1tZWRpYXRlbHkgaWYgcXVldWUgaGFzIG1vcmVcbiAgICAgICAgICAgIHN0YXJ0TmV4dCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbGwgdGVzdHMgYXJlIGRvbmVcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQgPT09IHRlc3RGaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coKTsgLy8gTmV3IGxpbmUgYWZ0ZXIgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7Y29sb3JzLnJlZH1UZXN0IGVycm9yOiR7Y29sb3JzLnJlc2V0fWAsIGVycm9yKTtcbiAgICAgICAgICAgIHJ1bm5pbmcuZGVsZXRlKHByb21pc2UpO1xuICAgICAgICAgICAgY29tcGxldGVkKys7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgb25lIHRlc3QgZmFpbHNcbiAgICAgICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKGBcXHIke2NvbG9ycy5kaW19UHJvZ3Jlc3M6ICR7Y29tcGxldGVkfS8ke3Rlc3RGaWxlcy5sZW5ndGh9IGZpbGVzIGNvbXBsZXRlZCR7Y29sb3JzLnJlc2V0fWApO1xuICAgICAgICAgICAgc2V0SW1tZWRpYXRlKHN0YXJ0TmV4dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWQgPT09IHRlc3RGaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coKTsgLy8gTmV3IGxpbmUgYWZ0ZXIgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gU3RhcnQgaW5pdGlhbCBiYXRjaFxuICAgICAgc3RhcnROZXh0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSB0ZXN0IHJlc3VsdHMgd2l0aCBjb2xvcmZ1bCBvdXRwdXRcbiAgICovXG4gIGRpc3BsYXlSZXN1bHRzKHJlc3VsdHMpIHtcbiAgICBjb25zb2xlLmxvZyhgXFxuJHtjb2xvcnMuYnJpZ2h0ffCfk4ogVGVzdCBSZXN1bHRzIFN1bW1hcnkke2NvbG9ycy5yZXNldH1gKTtcbiAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuZGltfSR7Jz0nLnJlcGVhdCg1MCl9JHtjb2xvcnMucmVzZXR9YCk7XG5cbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lO1xuXG4gICAgLy8gU3VtbWFyeSBzdGF0c1xuICAgIGNvbnNvbGUubG9nKGAke2NvbG9ycy5ncmVlbn3inIUgUGFzc2VkOiAke3RoaXMucGFzc2VkVGVzdHN9JHtjb2xvcnMucmVzZXR9YCk7XG4gICAgY29uc29sZS5sb2coYCR7Y29sb3JzLnJlZH3inYwgRmFpbGVkOiAke3RoaXMuZmFpbGVkVGVzdHN9JHtjb2xvcnMucmVzZXR9YCk7XG4gICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmJsdWV98J+TgSBUb3RhbCBGaWxlczogJHtyZXN1bHRzLmxlbmd0aH0ke2NvbG9ycy5yZXNldH1gKTtcbiAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuY3lhbn3ij7HvuI8gIER1cmF0aW9uOiAke3RvdGFsRHVyYXRpb259bXMke2NvbG9ycy5yZXNldH1cXG5gKTtcblxuICAgIC8vIFNob3cgZmFpbGVkIHRlc3RzIHdpdGggZGV0YWlsc1xuICAgIGNvbnN0IGZhaWxlZFJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+ICFyLnN1Y2Nlc3MpO1xuICAgIGlmIChmYWlsZWRSZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2NvbG9ycy5yZWR9JHtjb2xvcnMuYnJpZ2h0fUZhaWxlZCBUZXN0czoke2NvbG9ycy5yZXNldH1gKTtcbiAgICAgIGZhaWxlZFJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgXFxuJHtjb2xvcnMucmVkfeKdjCAke3Jlc3VsdC5maWxlfSR7Y29sb3JzLnJlc2V0fWApO1xuICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmRpbX0ke3Jlc3VsdC5lcnJvci5zcGxpdCgnXFxuJykuc2xpY2UoMCwgNSkuam9pbignXFxuJyl9JHtjb2xvcnMucmVzZXR9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBHZW5lcmF0ZSBkZWJ1ZyBmaWxlIGZvciBmYWlsZWQgdGVzdHNcbiAgICAgIHRoaXMuZ2VuZXJhdGVEZWJ1Z0ZpbGUoZmFpbGVkUmVzdWx0cyk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybWFuY2Ugc3VtbWFyeVxuICAgIGNvbnN0IGF2Z0R1cmF0aW9uID0gcmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5kdXJhdGlvbiwgMCkgLyByZXN1bHRzLmxlbmd0aDtcbiAgICBjb25zb2xlLmxvZyhgXFxuJHtjb2xvcnMuZGltfUF2ZXJhZ2UgdGVzdCBkdXJhdGlvbjogJHtNYXRoLnJvdW5kKGF2Z0R1cmF0aW9uKX1tcyR7Y29sb3JzLnJlc2V0fWApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIERFQlVHX1RFU1RTLm1kIGZpbGUgZm9yIGZhaWxlZCB0ZXN0IGFuYWx5c2lzXG4gICAqL1xuICBnZW5lcmF0ZURlYnVnRmlsZShmYWlsZWRSZXN1bHRzKSB7XG4gICAgaWYgKGZhaWxlZFJlc3VsdHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBjcmVhdGlvblRpbWUgPSBub3cudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBwYWNpZmljVGltZSA9IG5vdy50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7IFxuICAgICAgdGltZVpvbmU6ICdBbWVyaWNhL0xvc19BbmdlbGVzJyxcbiAgICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICAgIHllYXI6ICdudW1lcmljJywgXG4gICAgICBtb250aDogJ2xvbmcnLCBcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgaG91cjogJzItZGlnaXQnLCBcbiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLCBcbiAgICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgICAgdGltZVpvbmVOYW1lOiAnc2hvcnQnXG4gICAgfSk7XG4gICAgXG4gICAgbGV0IGRlYnVnQ29udGVudCA9ICcjIFRlc3QgRmFpbHVyZSBBbmFseXNpc1xcblxcbic7XG4gICAgZGVidWdDb250ZW50ICs9IGAqKkNyZWF0aW9uIFRpbWU6KiogJHtjcmVhdGlvblRpbWV9XFxuYDtcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gYCoqUGFjaWZpYyBUaW1lOioqICR7cGFjaWZpY1RpbWV9XFxuXFxuYDtcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gJ+KaoO+4jyAqKlNUQUxFTkVTUyBXQVJOSU5HOioqIElmIHlvdXIgY29kZSBjaGFuZ2VzIGFyZSBhZnRlciB0aGUgY3JlYXRpb24gdGltZSBhYm92ZSBhbmQgeW91IGFyZSBjaGVja2luZyB0aGlzIGZpbGUsIHRoZW4gaXQgaXMgc3RhbGUgYW5kIHRlc3RzIG5lZWQgdG8gYmUgcmVydW4uXFxuXFxuJztcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gJ0FuYWx5emUgYW5kIGFkZHJlc3MgdGhlIGZvbGxvd2luZyB0ZXN0IGZhaWx1cmVzOlxcblxcbic7XG4gICAgXG4gICAgZmFpbGVkUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBkZWJ1Z0NvbnRlbnQgKz0gYCMjIEZhaWxlZCBUZXN0ICR7aW5kZXggKyAxfTogJHtyZXN1bHQuZmlsZX1cXG5cXG5gO1xuICAgICAgZGVidWdDb250ZW50ICs9ICcjIyMgT3V0cHV0Olxcbic7XG4gICAgICBkZWJ1Z0NvbnRlbnQgKz0gJ2BgYFxcbic7XG4gICAgICBkZWJ1Z0NvbnRlbnQgKz0gcmVzdWx0LmVycm9yIHx8IHJlc3VsdC5vdXRwdXQgfHwgJ05vIGVycm9yIG91dHB1dCBhdmFpbGFibGUnO1xuICAgICAgZGVidWdDb250ZW50ICs9ICdcXG5gYGBcXG5cXG4nO1xuICAgICAgZGVidWdDb250ZW50ICs9IGAjIyMgRHVyYXRpb246ICR7cmVzdWx0LmR1cmF0aW9ufW1zXFxuXFxuYDtcbiAgICAgIGRlYnVnQ29udGVudCArPSAnLS0tXFxuXFxuJztcbiAgICB9KTtcbiAgICBcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gJyMjIFN1bW1hcnlcXG5cXG4nO1xuICAgIGRlYnVnQ29udGVudCArPSBgLSBUb3RhbCBmYWlsZWQgdGVzdHM6ICR7ZmFpbGVkUmVzdWx0cy5sZW5ndGh9XFxuYDtcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gYC0gRmFpbGVkIHRlc3QgZmlsZXM6ICR7ZmFpbGVkUmVzdWx0cy5tYXAociA9PiByLmZpbGUpLmpvaW4oJywgJyl9XFxuYDtcbiAgICBkZWJ1Z0NvbnRlbnQgKz0gYC0gR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cXG5gO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBmcy53cml0ZUZpbGVTeW5jKCdERUJVR19URVNUUy5tZCcsIGRlYnVnQ29udGVudCk7XG4gICAgICBjb25zb2xlLmxvZyhgXFxuJHtjb2xvcnMueWVsbG93ffCfk4sgRGVidWcgZmlsZSBjcmVhdGVkOiBERUJVR19URVNUUy5tZCR7Y29sb3JzLnJlc2V0fWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMucmVkfeKaoO+4jyAgQ291bGQgbm90IGNyZWF0ZSBERUJVR19URVNUUy5tZDogJHtlcnJvci5tZXNzYWdlfSR7Y29sb3JzLnJlc2V0fWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYWluIGV4ZWN1dGlvbiBtZXRob2RcbiAgICovXG4gIGFzeW5jIHJ1bigpIHtcbiAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuYnJpZ2h0ffCfp6ogcXRlc3RzIFRlc3QgUnVubmVyIC0gVGllcmVkIEV4ZWN1dGlvbiBNb2RlJHtjb2xvcnMucmVzZXR9YCk7XG4gICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmRpbX1EaXNjb3ZlcmluZyBhbmQgcnVubmluZyBhbGwgdGVzdHMgd2l0aCBvcHRpbWl6ZWQgc3RyYXRlZ3kuLi4ke2NvbG9ycy5yZXNldH1cXG5gKTtcblxuICAgIC8vIERpc2NvdmVyIGFsbCB0ZXN0IGZpbGVzXG4gICAgY29uc3QgdGVzdEZpbGVzID0gdGhpcy5kaXNjb3ZlclRlc3RzKCk7XG4gICAgXG4gICAgaWYgKHRlc3RGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2NvbG9ycy55ZWxsb3d94pqg77iPICBObyB0ZXN0IGZpbGVzIGZvdW5kJHtjb2xvcnMucmVzZXR9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuZGltfUxvb2tpbmcgZm9yIGZpbGVzIG1hdGNoaW5nOiAqLnRlc3QuanMsICouc3BlYy5qcywgdGVzdC8qLCB0ZXN0cy8qLCBfX3Rlc3RzX18vKiR7Y29sb3JzLnJlc2V0fWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEdyb3VwIHRlc3RzIGJ5IGNvbXBsZXhpdHkgZm9yIHRpZXJlZCBleGVjdXRpb25cbiAgICBjb25zdCB7IGxpZ2h0d2VpZ2h0LCBpbnRlZ3JhdGlvbiwgaGVhdnkgfSA9IHRoaXMuZ3JvdXBUZXN0c0J5Q29tcGxleGl0eSh0ZXN0RmlsZXMpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGAke2NvbG9ycy5ibHVlfVRlc3QgU3RyYXRlZ3k6JHtjb2xvcnMucmVzZXR9YCk7XG4gICAgY29uc29sZS5sb2coYCAgJHtjb2xvcnMuZ3JlZW59TGlnaHR3ZWlnaHQ6ICR7bGlnaHR3ZWlnaHQubGVuZ3RofSBmaWxlcyR7Y29sb3JzLnJlc2V0fWApO1xuICAgIGNvbnNvbGUubG9nKGAgICR7Y29sb3JzLnllbGxvd31JbnRlZ3JhdGlvbjogJHtpbnRlZ3JhdGlvbi5sZW5ndGh9IGZpbGVzJHtjb2xvcnMucmVzZXR9YCk7XG4gICAgY29uc29sZS5sb2coYCAgJHtjb2xvcnMucmVkfUhlYXZ5OiAke2hlYXZ5Lmxlbmd0aH0gZmlsZXMke2NvbG9ycy5yZXNldH1gKTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgY29uY3VycmVuY3kgc2V0dGluZ3NcbiAgICBjb25zdCBjcHVDb3VudCA9IG9zLmNwdXMoKS5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxNZW1vcnlHQiA9IE1hdGgucm91bmQob3MudG90YWxtZW0oKSAvICgxMDI0ICoqIDMpKTtcbiAgICBjb25zdCBtYXhDb25jdXJyZW5jeSA9IE1hdGgubWluKDgsIE1hdGgubWF4KDQsIE1hdGguZmxvb3IoY3B1Q291bnQgKiAxLjUpKSk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmRpbX1NYXggY29uY3VycmVuY3k6ICR7bWF4Q29uY3VycmVuY3l9IHdvcmtlcnMke2NvbG9ycy5yZXNldH1cXG5gKTtcbiAgICBcbiAgICBsZXQgYWxsUmVzdWx0cyA9IFtdO1xuICAgIFxuICAgIC8vIFBoYXNlIDE6IFJ1biBsaWdodHdlaWdodCB0ZXN0cyBmaXJzdCAoZmFzdCBmZWVkYmFjaykgLSBISUdIRVIgQ09OQ1VSUkVOQ1lcbiAgICBpZiAobGlnaHR3ZWlnaHQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmdyZWVuffCfk6YgUGhhc2UgMTogTGlnaHR3ZWlnaHQgVGVzdHMgKCR7bGlnaHR3ZWlnaHQubGVuZ3RofSBmaWxlcykke2NvbG9ycy5yZXNldH1gKTtcbiAgICAgIGNvbnN0IGxpZ2h0UmVzdWx0cyA9IGF3YWl0IHRoaXMucnVuSW5QYXJhbGxlbChsaWdodHdlaWdodCwgTWF0aC5taW4oMTIsIGxpZ2h0d2VpZ2h0Lmxlbmd0aCkpOyAvLyBIaWdoZXIgY29uY3VycmVuY3kgZm9yIHNpbXBsZSB0ZXN0c1xuICAgICAgYWxsUmVzdWx0cyA9IGFsbFJlc3VsdHMuY29uY2F0KGxpZ2h0UmVzdWx0cyk7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuZGltfVBoYXNlIDEgY29tcGxldGU6ICR7dGhpcy5wYXNzZWRUZXN0c30vJHt0aGlzLnBhc3NlZFRlc3RzICsgdGhpcy5mYWlsZWRUZXN0c30gcGFzc2VkJHtjb2xvcnMucmVzZXR9XFxuYCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFBoYXNlIDI6IFJ1biBpbnRlZ3JhdGlvbiB0ZXN0c1xuICAgIGlmIChpbnRlZ3JhdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMueWVsbG93ffCflJcgUGhhc2UgMjogSW50ZWdyYXRpb24gVGVzdHMgKCR7aW50ZWdyYXRpb24ubGVuZ3RofSBmaWxlcykke2NvbG9ycy5yZXNldH1gKTtcbiAgICAgIGNvbnN0IGludGVncmF0aW9uUmVzdWx0cyA9IGF3YWl0IHRoaXMucnVuSW5QYXJhbGxlbChpbnRlZ3JhdGlvbiwgTWF0aC5taW4obWF4Q29uY3VycmVuY3ksIDYpKTtcbiAgICAgIGFsbFJlc3VsdHMgPSBhbGxSZXN1bHRzLmNvbmNhdChpbnRlZ3JhdGlvblJlc3VsdHMpO1xuICAgICAgY29uc29sZS5sb2coYCR7Y29sb3JzLmRpbX1QaGFzZSAyIGNvbXBsZXRlOiAke3RoaXMucGFzc2VkVGVzdHN9LyR7dGhpcy5wYXNzZWRUZXN0cyArIHRoaXMuZmFpbGVkVGVzdHN9IHBhc3NlZCR7Y29sb3JzLnJlc2V0fVxcbmApO1xuICAgIH1cbiAgICBcbiAgICAvLyBQaGFzZSAzOiBSdW4gaGVhdnkgdGVzdHMgd2l0aCByZWR1Y2VkIGNvbmN1cnJlbmN5IGFuZCBoaWdoZXIgdGltZW91dFxuICAgIGlmIChoZWF2eS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMucmVkfeKame+4jyAgUGhhc2UgMzogSGVhdnkgVGVzdHMgKCR7aGVhdnkubGVuZ3RofSBmaWxlcykgLSBTcGVjaWFsIGhhbmRsaW5nJHtjb2xvcnMucmVzZXR9YCk7XG4gICAgICBjb25zdCBoZWF2eVJlc3VsdHMgPSBhd2FpdCB0aGlzLnJ1bkluUGFyYWxsZWwoaGVhdnksIE1hdGgubWluKDQsIGhlYXZ5Lmxlbmd0aCkpOyAvLyBMb3dlciBjb25jdXJyZW5jeVxuICAgICAgYWxsUmVzdWx0cyA9IGFsbFJlc3VsdHMuY29uY2F0KGhlYXZ5UmVzdWx0cyk7XG4gICAgICBjb25zb2xlLmxvZyhgJHtjb2xvcnMuZGltfVBoYXNlIDMgY29tcGxldGU6ICR7dGhpcy5wYXNzZWRUZXN0c30vJHt0aGlzLnBhc3NlZFRlc3RzICsgdGhpcy5mYWlsZWRUZXN0c30gcGFzc2VkJHtjb2xvcnMucmVzZXR9XFxuYCk7XG4gICAgfVxuICAgIFxuICAgIHRoaXMucmVzdWx0cyA9IGFsbFJlc3VsdHM7XG4gICAgXG4gICAgLy8gRGlzcGxheSBjb21wcmVoZW5zaXZlIHJlc3VsdHNcbiAgICB0aGlzLmRpc3BsYXlSZXN1bHRzKGFsbFJlc3VsdHMpO1xuICAgIFxuICAgIC8vIEV4aXQgd2l0aCBhcHByb3ByaWF0ZSBjb2RlXG4gICAgcHJvY2Vzcy5leGl0KHRoaXMuZmFpbGVkVGVzdHMgPiAwID8gMSA6IDApO1xuICB9XG59XG5cbi8vIFJ1biB0aGUgdGVzdCBzdWl0ZVxuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XG4gIGNvbnN0IHJ1bm5lciA9IG5ldyBUZXN0UnVubmVyKCk7XG4gIHJ1bm5lci5ydW4oKS5jYXRjaChlcnJvciA9PiB7XG4gICAgY29uc29sZS5lcnJvcihgJHtjb2xvcnMucmVkfVRlc3QgcnVubmVyIGVycm9yOiR7Y29sb3JzLnJlc2V0fWAsIGVycm9yKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRlc3RSdW5uZXI7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsTUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMs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