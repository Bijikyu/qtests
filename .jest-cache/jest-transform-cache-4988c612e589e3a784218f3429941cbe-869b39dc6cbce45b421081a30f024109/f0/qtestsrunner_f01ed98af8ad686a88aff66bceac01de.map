{"version":3,"names":["fs","require","path","spawn","os","colors","reset","bright","dim","red","green","yellow","blue","magenta","cyan","white","TestRunner","constructor","testFiles","passedTests","failedTests","totalTests","startTime","Date","now","results","jestVersion","discoverTests","testPatterns","excludePatterns","Set","walkDir","dir","existsSync","items","readdirSync","withFileTypes","item","name","startsWith","includes","fullPath","join","relativePath","relative","some","pattern","isDirectory","isFile","isTestFile","add","error","Array","from","sort","filePath","excludeFiles","exclude","endsWith","test","getJestTestPathFlag","packageJson","JSON","parse","readFileSync","majorVersion","parseInt","version","split","runTestFile","testFile","Promise","resolve","timeout","setTimeout","child","kill","file","success","duration","output","code","stdout","stderr","isJestTest","shouldUseJest","command","args","stdio","env","process","NODE_ENV","shell","on","data","toString","clearTimeout","hasPASS","hasFAIL","hasUncaughtException","DEBUG_TESTS","console","log","slice","jestSuccess","qtestsSuccess","message","fileName","basename","nodeJsCompatible","groupTestsByComplexity","lightweight","integration","heavy","forEach","push","getFileSize","stats","statSync","size","runJestBatch","jestFiles","length","map","baseName","hasPass","hasFail","Math","floor","runInParallel","maxConcurrency","queue","running","completed","reject","startNext","shift","promise","then","result","delete","write","catch","setImmediate","displayResults","repeat","totalDuration","failedResults","filter","r","generateDebugFile","avgDuration","reduce","sum","round","creationTime","toISOString","pacificTime","toLocaleString","timeZone","weekday","year","month","day","hour","minute","second","timeZoneName","debugContent","index","writeFileSync","run","cpuCount","cpus","totalMemoryGB","totalmem","min","max","allResults","lightJest","f","lightNode","lightResults","jestResults","nodeResults","concat","integrationResults","heavyResults","exit","main","module","runner","exports"],"sources":["qtests-runner.js"],"sourcesContent":["/**\n * ========================================================================\n * QTESTS AUTHORITATIVE TEST RUNNER - DO NOT MODIFY\n * ========================================================================\n * \n * WARNING TO AI AGENTS AND LLMs:\n * This file is the AUTHORITATIVE and OFFICIAL test runner for the qtests framework.\n * DO NOT ALTER, MODIFY, OR CHANGE this file under any circumstances.\n * \n * SYSTEM INTEGRATION POLICY:\n * - This is the main and ONLY test runner for qtests\n * - Do NOT create alternate, parallel, or competing test runners\n * - Any system changes must ADAPT AROUND this file, not modify it\n * - If changes are needed, modify the surrounding system, utilities, or configuration\n * - This runner's interface and behavior are considered stable and canonical\n * \n * PURPOSE:\n * This file serves as the central test execution engine for the qtests framework.\n * It discovers, coordinates, and runs all tests with high-performance concurrency.\n * \n * Auto-generated by qtests framework - Last generated: August 19, 2025\n * Updated: Enhanced success detection for both Jest and qtests/Node.js formats\n * ========================================================================\n */\n\nconst fs = require('fs');\nconst path = require('path');\nconst { spawn } = require('child_process');\nconst os = require('os');\n\n// ANSI color codes for terminal output\nconst colors = {\n  reset: '\\x1b[0m',\n  bright: '\\x1b[1m',\n  dim: '\\x1b[2m',\n  red: '\\x1b[31m',\n  green: '\\x1b[32m',\n  yellow: '\\x1b[33m',\n  blue: '\\x1b[34m',\n  magenta: '\\x1b[35m',\n  cyan: '\\x1b[36m',\n  white: '\\x1b[37m'\n};\n\n/**\n * Parallel Test Runner for qtests\n * Discovers and executes all test files with high-performance concurrency\n */\nclass TestRunner {\n  constructor() {\n    this.testFiles = [];\n    this.passedTests = 0;\n    this.failedTests = 0;\n    this.totalTests = 0;\n    this.startTime = Date.now();\n    this.results = [];\n    this.jestVersion = null;\n  }\n\n  /**\n   * Discover all test files in the project\n   */\n  discoverTests() {\n    const testPatterns = [\n      '**/*.test.js',\n      '**/*.test.ts', \n      '**/*.test.jsx',\n      '**/*.test.tsx',\n      '**/test/**/*.js',\n      '**/test/**/*.ts',\n      '**/tests/**/*.js',\n      '**/tests/**/*.ts',\n      '**/__tests__/**/*.js',\n      '**/__tests__/**/*.ts'\n    ];\n\n    const excludePatterns = [\n      'node_modules',\n      '.git',\n      'coverage',\n      'dist',\n      'build',\n      '.cache',\n      '.jest-cache',\n      'demo',        // Exclude demo directory to match Jest config\n      'examples',    // Exclude examples directory to match Jest config\n      'docs',        // Exclude docs directory to match Jest config\n      'stubs'        // Exclude stubs directory to match Jest config\n    ];\n\n    const testFiles = new Set();\n\n    const walkDir = (dir) => {\n      if (!fs.existsSync(dir)) return;\n      \n      try {\n        const items = fs.readdirSync(dir, { withFileTypes: true });\n        \n        for (const item of items) {\n          if (item.name.startsWith('.')) continue;\n          if (excludePatterns.includes(item.name)) continue;\n          \n          const fullPath = path.join(dir, item.name);\n          const relativePath = path.relative('.', fullPath);\n          \n          // Skip paths that match exclude patterns (including subdirectories)\n          if (excludePatterns.some(pattern => relativePath.includes(pattern))) continue;\n          \n          if (item.isDirectory()) {\n            walkDir(fullPath);\n          } else if (item.isFile()) {\n            // Check if file matches test patterns\n            if (this.isTestFile(relativePath)) {\n              testFiles.add(relativePath);\n            }\n          }\n        }\n      } catch (error) {\n        // Skip directories we can't read\n      }\n    };\n\n    walkDir('.');\n    this.testFiles = Array.from(testFiles).sort();\n    return this.testFiles;\n  }\n\n  /**\n   * Check if a file is a test file based on patterns\n   */\n  isTestFile(filePath) {\n    const testPatterns = [\n      /\\.test\\.[jt]sx?$/,\n      /\\.spec\\.[jt]sx?$/,\n      /test\\/.*\\.test\\.[jt]sx?$/,\n      /test\\/.*\\.spec\\.[jt]sx?$/,\n      /tests\\/.*\\.test\\.[jt]sx?$/,\n      /tests\\/.*\\.spec\\.[jt]sx?$/,\n      /__tests__\\/.*\\.[jt]sx?$/\n    ];\n\n    // Exclude utility/setup files that don't contain actual tests\n    const excludeFiles = [\n      'testSetup.js',\n      'reloadCheck.js', \n      'withoutSetup.js',\n      'setupMultiple.js',\n      'setupMultipleChild.js',\n      'setup.ts'\n    ];\n\n    if (excludeFiles.some(exclude => filePath.endsWith(exclude))) {\n      return false;\n    }\n\n    return testPatterns.some(pattern => pattern.test(filePath));\n  }\n\n  /**\n   * Get Jest version-appropriate CLI flag\n   */\n  getJestTestPathFlag() {\n    if (this.jestVersion === null) {\n      try {\n        // Try to detect Jest version synchronously\n        const fs = require('fs');\n        const packageJson = JSON.parse(fs.readFileSync('./node_modules/jest/package.json', 'utf8'));\n        const majorVersion = parseInt(packageJson.version.split('.')[0]);\n        this.jestVersion = majorVersion;\n      } catch {\n        // Default to Jest 30+ behavior (newer standard) if version check fails\n        this.jestVersion = 30;\n      }\n    }\n    \n    // Jest 30+ uses --testPathPatterns, earlier versions use --testPathPattern\n    return this.jestVersion >= 30 ? '--testPathPatterns' : '--testPathPattern';\n  }\n\n  /**\n   * Run a single test file with timeout protection and optimized Node.js performance flags\n   */\n  async runTestFile(testFile) {\n    return new Promise((resolve) => {\n      // Reasonable timeout - 20 seconds per test\n      const timeout = setTimeout(() => {\n        child.kill('SIGTERM');\n        resolve({\n          file: testFile,\n          success: false,\n          duration: 20000,\n          output: '',\n          error: 'Test timeout after 20 seconds',\n          code: 124\n        });\n      }, 20000);\n      \n      const startTime = Date.now();\n      let stdout = '';\n      let stderr = '';\n\n      // Determine if this is a Jest/Node test based on file content\n      const isJestTest = this.shouldUseJest(testFile);\n      \n      const command = isJestTest ? 'npx' : 'node';\n      \n      // Minimal arguments that actually work\n      const args = isJestTest \n        ? ['jest', testFile, '--forceExit']\n        : ['--max-old-space-size=768', '--no-warnings', testFile];\n\n      const child = spawn(command, args, {\n        stdio: ['ignore', 'pipe', 'pipe'],\n        env: { \n          ...process.env, \n          NODE_ENV: 'test'\n        },\n        shell: true // Use shell for better Jest compatibility\n      });\n\n      child.stdout.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      child.stderr.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      child.on('close', (code) => {\n        clearTimeout(timeout);\n        const duration = Date.now() - startTime;\n        \n        // Robust success detection for both Jest and qtests/Node.js formats\n        const output = stdout + stderr;\n        \n        // Jest shows PASS when tests succeed, FAIL when they fail\n        const hasPASS = output.includes('PASS ');\n        const hasFAIL = output.includes('FAIL ');\n        \n        // qtests/Node.js format uses exit codes and normal output (no uncaught exceptions)\n        const hasUncaughtException = output.includes('Error:') || \n                                   output.includes('ReferenceError:') || \n                                   output.includes('TypeError:') || \n                                   output.includes('SyntaxError:') ||\n                                   stderr.includes('Error:') ||\n                                   stderr.includes('at ');\n        \n        // For debugging - log what we're seeing\n        if (process.env.DEBUG_TESTS) {\n          console.log(`\\nFile: ${testFile}`);\n          console.log(`Code: ${code}, PASS: ${hasPASS}, FAIL: ${hasFAIL}, Exception: ${hasUncaughtException}`);\n          console.log(`Output snippet: \"${output.slice(0, 200)}...\"`);\n        }\n        \n        // Success detection for both formats:\n        // Jest format: PASS present and no FAIL\n        // qtests/Node.js format: exit code 0 and no uncaught exceptions\n        const jestSuccess = hasPASS && !hasFAIL;\n        const qtestsSuccess = code === 0 && !hasUncaughtException && !hasFAIL;\n        \n        const success = jestSuccess || (isJestTest ? false : qtestsSuccess);\n        \n        if (success) {\n          this.passedTests++;\n        } else {\n          this.failedTests++;\n        }\n\n        resolve({\n          file: testFile,\n          success,\n          duration,\n          output: stdout,\n          error: stderr,\n          code\n        });\n      });\n\n      child.on('error', (error) => {\n        clearTimeout(timeout);\n        this.failedTests++;\n        resolve({\n          file: testFile,\n          success: false,\n          duration: Date.now() - startTime,\n          output: '',\n          error: error.message,\n          code: 1\n        });\n      });\n    });\n  }\n\n  /**\n   * Determine if a test should use Jest - CORRECTED LOGIC\n   */\n  shouldUseJest(testFile) {\n    // Most test files need Jest for describe/test functions\n    // Only a few specific utility files can run with pure Node.js\n    \n    const fileName = path.basename(testFile);\n    \n    // Files that can run with Node.js (no describe/test/jest APIs)\n    const nodeJsCompatible = [\n      'reloadCheck.js',\n      'setupMultipleChild.js',\n      'testSetup.js',\n      'withoutSetup.js'\n    ];\n    \n    if (nodeJsCompatible.includes(fileName)) {\n      return false; // Use Node.js\n    }\n    \n    // Everything else uses Jest (files with describe, test, jest APIs)\n    return true;\n  }\n\n  /**\n   * Group tests by complexity using FAST filename patterns (no I/O)\n   */\n  groupTestsByComplexity(testFiles) {\n    const lightweight = []; // Fast module loading tests\n    const integration = []; // Integration tests - run separately  \n    const heavy = []; // Complex tests - run with special handling\n    \n    testFiles.forEach(file => {\n      const fileName = path.basename(file);\n      \n      // Heavy integration tests (filename-based detection - NO I/O)\n      if (fileName.includes('integration') || fileName.includes('comprehensive') || \n          fileName.includes('offlineMode') || fileName.includes('mockModels') ||\n          fileName.includes('sendEmail') || fileName.includes('mockAxios') ||\n          fileName.includes('runTestSuite')) {\n        heavy.push(file);\n      }\n      // Integration tests (medium priority)\n      else if (file.includes('/test/') && (fileName.includes('mock') || fileName.includes('http'))) {\n        integration.push(file);\n      }\n      // Lightweight unit tests (run first) - everything else\n      else {\n        lightweight.push(file);\n      }\n    });\n    \n    return { lightweight, integration, heavy };\n  }\n\n  /**\n   * Get file size safely\n   */\n  getFileSize(file) {\n    try {\n      const stats = fs.statSync(file);\n      return stats.size;\n    } catch {\n      return 1000; // Default size for inaccessible files\n    }\n  }\n\n  /**\n   * Run Jest tests in efficient batches like Jest does natively\n   */\n  async runJestBatch(jestFiles) {\n    if (jestFiles.length === 0) return [];\n    \n    return new Promise((resolve) => {\n      const startTime = Date.now();\n      \n      // Run all Jest files in a single Jest process - this is what makes Jest fast!\n      const args = ['jest', ...jestFiles, '--forceExit'];\n      \n      const child = spawn('npx', args, {\n        stdio: ['ignore', 'pipe', 'pipe'],\n        env: { ...process.env, NODE_ENV: 'test' },\n        shell: true\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      child.stdout.on('data', (data) => stdout += data.toString());\n      child.stderr.on('data', (data) => stderr += data.toString());\n\n      child.on('close', (code) => {\n        const duration = Date.now() - startTime;\n        const output = stdout + stderr;\n        \n        // Parse Jest results - Jest shows PASS/FAIL for each file\n        const results = jestFiles.map(file => {\n          const baseName = path.basename(file);\n          const hasPass = output.includes(`PASS ${file}`) || output.includes(`PASS ./${file}`) || \n                         output.includes(`âœ“`) && output.includes(baseName);\n          const hasFail = output.includes(`FAIL ${file}`) || output.includes(`FAIL ./${file}`) ||\n                         output.includes(`âœ—`) && output.includes(baseName);\n          \n          const success = hasPass && !hasFail && code === 0;\n          \n          if (success) this.passedTests++;\n          else this.failedTests++;\n          \n          return {\n            file,\n            success,\n            duration: Math.floor(duration / jestFiles.length), // Approximate per file\n            output: success ? `PASS ${file}` : output.slice(0, 500),\n            error: success ? '' : stderr,\n            code\n          };\n        });\n        \n        resolve(results);\n      });\n    });\n  }\n\n  /**\n   * Run tests with advanced parallel execution and smart grouping\n   * Maintains max concurrency at all times - starts new test immediately as others finish\n   */\n  async runInParallel(testFiles, maxConcurrency) {\n    const results = [];\n    const queue = [...testFiles]; // Copy files to process\n    const running = new Set(); // Track currently running tests\n    let completed = 0;\n\n    return new Promise((resolve, reject) => {\n      const startNext = () => {\n        // Start new tests up to max concurrency\n        while (running.size < maxConcurrency && queue.length > 0) {\n          const testFile = queue.shift();\n          const promise = this.runTestFile(testFile);\n          \n          running.add(promise);\n          \n          promise.then((result) => {\n            results.push(result);\n            running.delete(promise);\n            completed++;\n            \n            // Update progress with staggered display for smoother appearance\n            if (completed % 2 === 0 || completed === testFiles.length) {\n              process.stdout.write(`\\r${colors.dim}Progress: ${completed}/${testFiles.length} files completed${colors.reset}`);\n            }\n            \n            // Start next test immediately if queue has more\n            startNext();\n            \n            // Check if all tests are done\n            if (completed === testFiles.length) {\n              console.log(); // New line after progress\n              resolve(results);\n            }\n          }).catch((error) => {\n            console.error(`${colors.red}Test error:${colors.reset}`, error);\n            running.delete(promise);\n            completed++;\n            \n            // Continue even if one test fails\n            process.stdout.write(`\\r${colors.dim}Progress: ${completed}/${testFiles.length} files completed${colors.reset}`);\n            setImmediate(startNext);\n            \n            if (completed === testFiles.length) {\n              console.log(); // New line after progress\n              resolve(results);\n            }\n          });\n        }\n      };\n\n      // Start initial batch\n      startNext();\n    });\n  }\n\n  /**\n   * Display test results with colorful output\n   */\n  displayResults(results) {\n    console.log(`\\n${colors.bright}ðŸ“Š Test Results Summary${colors.reset}`);\n    console.log(`${colors.dim}${'='.repeat(50)}${colors.reset}`);\n\n    const totalDuration = Date.now() - this.startTime;\n\n    // Summary stats\n    console.log(`${colors.green}âœ… Passed: ${this.passedTests}${colors.reset}`);\n    console.log(`${colors.red}âŒ Failed: ${this.failedTests}${colors.reset}`);\n    console.log(`${colors.blue}ðŸ“ Total Files: ${results.length}${colors.reset}`);\n    console.log(`${colors.cyan}â±ï¸  Duration: ${totalDuration}ms${colors.reset}\\n`);\n\n    // Show failed tests with details\n    const failedResults = results.filter(r => !r.success);\n    if (failedResults.length > 0) {\n      console.log(`${colors.red}${colors.bright}Failed Tests:${colors.reset}`);\n      failedResults.forEach(result => {\n        console.log(`\\n${colors.red}âŒ ${result.file}${colors.reset}`);\n        if (result.error) {\n          console.log(`${colors.dim}${result.error.split('\\n').slice(0, 5).join('\\n')}${colors.reset}`);\n        }\n      });\n\n      // Generate debug file for failed tests\n      this.generateDebugFile(failedResults);\n    }\n\n    // Performance summary\n    const avgDuration = results.reduce((sum, r) => sum + r.duration, 0) / results.length;\n    console.log(`\\n${colors.dim}Average test duration: ${Math.round(avgDuration)}ms${colors.reset}`);\n  }\n\n  /**\n   * Generate DEBUG_TESTS.md file for failed test analysis\n   */\n  generateDebugFile(failedResults) {\n    if (failedResults.length === 0) return;\n    \n    const now = new Date();\n    const creationTime = now.toISOString();\n    const pacificTime = now.toLocaleString('en-US', { \n      timeZone: 'America/Los_Angeles',\n      weekday: 'long',\n      year: 'numeric', \n      month: 'long', \n      day: 'numeric',\n      hour: '2-digit', \n      minute: '2-digit', \n      second: '2-digit',\n      timeZoneName: 'short'\n    });\n    \n    let debugContent = '# Test Failure Analysis\\n\\n';\n    debugContent += `**Creation Time:** ${creationTime}\\n`;\n    debugContent += `**Pacific Time:** ${pacificTime}\\n\\n`;\n    debugContent += 'âš ï¸ **STALENESS WARNING:** If your code changes are after the creation time above and you are checking this file, then it is stale and tests need to be rerun.\\n\\n';\n    debugContent += 'Analyze and address the following test failures:\\n\\n';\n    \n    failedResults.forEach((result, index) => {\n      debugContent += `## Failed Test ${index + 1}: ${result.file}\\n\\n`;\n      debugContent += '### Output:\\n';\n      debugContent += '```\\n';\n      debugContent += result.error || result.output || 'No error output available';\n      debugContent += '\\n```\\n\\n';\n      debugContent += `### Duration: ${result.duration}ms\\n\\n`;\n      debugContent += '---\\n\\n';\n    });\n    \n    debugContent += '## Summary\\n\\n';\n    debugContent += `- Total failed tests: ${failedResults.length}\\n`;\n    debugContent += `- Failed test files: ${failedResults.map(r => r.file).join(', ')}\\n`;\n    debugContent += `- Generated: ${new Date().toISOString()}\\n`;\n    \n    try {\n      fs.writeFileSync('DEBUG_TESTS.md', debugContent);\n      console.log(`\\n${colors.yellow}ðŸ“‹ Debug file created: DEBUG_TESTS.md${colors.reset}`);\n    } catch (error) {\n      console.log(`${colors.red}âš ï¸  Could not create DEBUG_TESTS.md: ${error.message}${colors.reset}`);\n    }\n  }\n\n  /**\n   * Main execution method\n   */\n  async run() {\n    console.log(`${colors.bright}ðŸ§ª qtests Test Runner - Tiered Execution Mode${colors.reset}`);\n    console.log(`${colors.dim}Discovering and running all tests with optimized strategy...${colors.reset}\\n`);\n\n    // Discover all test files\n    const testFiles = this.discoverTests();\n    \n    if (testFiles.length === 0) {\n      console.log(`${colors.yellow}âš ï¸  No test files found${colors.reset}`);\n      console.log(`${colors.dim}Looking for files matching: *.test.js, *.spec.js, test/*, tests/*, __tests__/*${colors.reset}`);\n      return;\n    }\n\n    // Group tests by complexity for tiered execution\n    const { lightweight, integration, heavy } = this.groupTestsByComplexity(testFiles);\n    \n    console.log(`${colors.blue}Test Strategy:${colors.reset}`);\n    console.log(`  ${colors.green}Lightweight: ${lightweight.length} files${colors.reset}`);\n    console.log(`  ${colors.yellow}Integration: ${integration.length} files${colors.reset}`);\n    console.log(`  ${colors.red}Heavy: ${heavy.length} files${colors.reset}`);\n    \n    // Calculate concurrency settings\n    const cpuCount = os.cpus().length;\n    const totalMemoryGB = Math.round(os.totalmem() / (1024 ** 3));\n    const maxConcurrency = Math.min(8, Math.max(4, Math.floor(cpuCount * 1.5)));\n    \n    console.log(`${colors.dim}Max concurrency: ${maxConcurrency} workers${colors.reset}\\n`);\n    \n    let allResults = [];\n    \n    // Phase 1: Run lightweight tests with Jest-style batch execution\n    if (lightweight.length > 0) {\n      console.log(`${colors.green}ðŸ“¦ Phase 1: Lightweight Tests (${lightweight.length} files)${colors.reset}`);\n      \n      // Separate Jest and Node.js tests for optimal execution\n      const lightJest = lightweight.filter(f => this.shouldUseJest(f));\n      const lightNode = lightweight.filter(f => !this.shouldUseJest(f));\n      \n      const lightResults = [];\n      if (lightJest.length > 0) {\n        console.log(`${colors.dim}Running ${lightJest.length} Jest tests in efficient batch...${colors.reset}`);\n        const jestResults = await this.runJestBatch(lightJest);\n        lightResults.push(...jestResults);\n      }\n      if (lightNode.length > 0) {\n        console.log(`${colors.dim}Running ${lightNode.length} Node.js tests individually...${colors.reset}`);\n        const nodeResults = await this.runInParallel(lightNode, Math.min(12, lightNode.length));\n        lightResults.push(...nodeResults);\n      }\n      \n      allResults = allResults.concat(lightResults);\n      console.log(`${colors.dim}Phase 1 complete: ${lightResults.filter(r => r.success).length}/${lightweight.length} passed${colors.reset}\\n`);\n    }\n    \n    // Phase 2: Run integration tests\n    if (integration.length > 0) {\n      console.log(`${colors.yellow}ðŸ”— Phase 2: Integration Tests (${integration.length} files)${colors.reset}`);\n      const integrationResults = await this.runInParallel(integration, Math.min(maxConcurrency, 6));\n      allResults = allResults.concat(integrationResults);\n      console.log(`${colors.dim}Phase 2 complete: ${this.passedTests}/${this.passedTests + this.failedTests} passed${colors.reset}\\n`);\n    }\n    \n    // Phase 3: Run heavy tests with reduced concurrency and higher timeout\n    if (heavy.length > 0) {\n      console.log(`${colors.red}âš™ï¸  Phase 3: Heavy Tests (${heavy.length} files) - Special handling${colors.reset}`);\n      const heavyResults = await this.runInParallel(heavy, Math.min(4, heavy.length)); // Lower concurrency\n      allResults = allResults.concat(heavyResults);\n      console.log(`${colors.dim}Phase 3 complete: ${this.passedTests}/${this.passedTests + this.failedTests} passed${colors.reset}\\n`);\n    }\n    \n    this.results = allResults;\n    \n    // Display comprehensive results\n    this.displayResults(allResults);\n    \n    // Exit with appropriate code\n    process.exit(this.failedTests > 0 ? 1 : 0);\n  }\n}\n\n// Run the test suite\nif (require.main === module) {\n  const runner = new TestRunner();\n  runner.run().catch(error => {\n    console.error(`${colors.red}Test runner error:${colors.reset}`, error);\n    process.exit(1);\n  });\n}\n\nmodule.exports = TestRunner;\n"],"mappings":"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","ignoreList":[]}