54b8ce03fb799adcbf86a611e71c2515
/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class focuses solely on test data creation and management.
 * It eliminates duplicate test data creation across test files.
 */

const {
  logStart,
  logReturn
} = require('../../lib/logUtils');

/**
 * Test Data Factory for Creating Realistic Test Entities
 * 
 * This class eliminates duplicate test data creation across test files
 * by providing standardized factory methods for common test entities.
 * 
 * PARALLEL TEST SAFETY:
 * - Uses process.hrtime.bigint() for unique IDs to avoid race conditions
 * - No shared static state between parallel test executions
 * - Each test gets unique data that won't conflict with other tests
 */
class TestDataFactory {
  static counter = 0;

  /**
   * Gets next unique ID for test data (parallel-safe when needed)
   * 
   * @returns {string|number} Unique identifier - simple counter for normal tests, complex for parallel
   */
  static nextId() {
    // Only use complex IDs in very specific parallel execution scenarios
    const isJestParallel = process.env.JEST_WORKER_ID && process.env.JEST_WORKER_ID !== '1';
    const isExplicitParallel = process.env.QTESTS_PARALLEL_MODE === 'true';
    if (!isJestParallel && !isExplicitParallel) {
      // Normal testing - use simple counter for expected format
      return ++this.counter;
    }

    // Parallel testing - use complex unique identifier
    const hrTime = process.hrtime.bigint();
    const random = Math.random().toString(36).substr(2, 9);
    return `${hrTime}-${random}`;
  }

  /**
   * Creates a test user with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test user object
   */
  static createUser(overrides = {}) {
    logStart('TestDataFactory.createUser', overrides);
    const id = this.nextId();
    const user = {
      id: `user-${id}`,
      username: `testuser${id}`,
      email: `test${id}@example.com`,
      password: `hashedpassword${id}`,
      firstName: 'Test',
      lastName: `User${id}`,
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createUser', user);
    return user;
  }

  /**
   * Creates a test API key with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test API key object
   */
  static createApiKey(overrides = {}) {
    logStart('TestDataFactory.createApiKey', overrides);
    const id = this.nextId();
    const apiKey = {
      id: `key-${id}`,
      key: `test-api-key-${id}-${Math.random().toString(36).substr(2, 9)}`,
      name: `Test API Key ${id}`,
      userId: `user-${id}`,
      isActive: true,
      permissions: ['read', 'write'],
      createdAt: new Date(),
      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
      // 30 days
      ...overrides
    };
    logReturn('TestDataFactory.createApiKey', apiKey);
    return apiKey;
  }

  /**
   * Creates a test log entry with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test log entry object
   */
  static createLogEntry(overrides = {}) {
    logStart('TestDataFactory.createLogEntry', overrides);
    const id = this.nextId();
    const logEntry = {
      id: `log-${id}`,
      message: `Test log message ${id}`,
      level: 'info',
      timestamp: new Date(),
      userId: `user-${id}`,
      source: 'test-application',
      metadata: {
        testId: id,
        environment: 'test'
      },
      ...overrides
    };
    logReturn('TestDataFactory.createLogEntry', logEntry);
    return logEntry;
  }

  /**
   * Creates a test configuration object with realistic properties
   * 
   * @param {Object} overrides - Properties to override defaults
   * @returns {Object} Test configuration object
   */
  static createConfig(overrides = {}) {
    logStart('TestDataFactory.createConfig', overrides);
    const id = this.nextId();
    const config = {
      id: `config-${id}`,
      name: `Test Configuration ${id}`,
      value: `test-value-${id}`,
      environment: 'test',
      type: 'string',
      isActive: true,
      settings: {
        debug: true,
        maxRetries: 3,
        timeout: 5000
      },
      features: {
        enableLogging: true,
        enableMetrics: false,
        enableAlerts: true
      },
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
    logReturn('TestDataFactory.createConfig', config);
    return config;
  }

  /**
   * Creates multiple test entities using a factory function
   * 
   * @param {Function} factoryFn - Factory function to create single entities
   * @param {number} count - Number of entities to create
   * @param {Object} baseOverrides - Base overrides applied to all entities
   * @returns {Array} Array of created test entities
   */
  static createMultiple(factoryFn, count = 10, baseOverrides = {}) {
    logStart('TestDataFactory.createMultiple', {
      count,
      baseOverrides
    });
    const entities = [];
    for (let i = 0; i < count; i++) {
      const entityOverrides = {
        ...baseOverrides
      };
      entities.push(factoryFn.call(this, entityOverrides));
    }
    logReturn('TestDataFactory.createMultiple', `${entities.length} entities`);
    return entities;
  }

  // Instance method wrappers for compatibility with TestSuiteBuilder
  createUser(overrides) {
    return TestDataFactory.createUser(overrides);
  }
  createApiKey(overrides) {
    return TestDataFactory.createApiKey(overrides);
  }
  createLogEntry(overrides) {
    return TestDataFactory.createLogEntry(overrides);
  }
  createConfig(overrides) {
    return TestDataFactory.createConfig(overrides);
  }
  createMultiple(factoryFn, count, baseOverrides) {
    return TestDataFactory.createMultiple(factoryFn.bind(this), count, baseOverrides);
  }

  // Static method for resetting counter
  static reset() {
    this.counter = 0;
  }

  /**
   * Creates related entities with relationships
   * 
   * @param {Object} config - Configuration for creating related entities
   * @returns {Object} Object with created entities and relationships
   */
  static createRelatedEntities(config) {
    logStart('TestDataFactory.createRelatedEntities', config);
    try {
      const {
        userCount = 1,
        apiKeysPerUser = 1,
        logsPerUser = 1
      } = config;
      const users = [];
      const apiKeys = [];
      const logs = [];

      // Create users first
      for (let i = 0; i < userCount; i++) {
        users.push(this.createUser());
      }

      // Create configs (shared configurations)
      const configs = [this.createConfig()];

      // Create API keys for each user
      users.forEach(user => {
        for (let i = 0; i < apiKeysPerUser; i++) {
          apiKeys.push(this.createApiKey({
            userId: user.id,
            key: `${user.username}-key-${i + 1}`
          }));
        }
      });

      // Create logs for each user
      users.forEach(user => {
        for (let i = 0; i < logsPerUser; i++) {
          logs.push(this.createLogEntry({
            userId: user.id,
            endpoint: `/api/users/${user.id}/data-${i + 1}`
          }));
        }
      });
      const result = {
        users,
        apiKeys,
        logs,
        configs,
        relationships: {
          userToApiKeys: users.reduce((acc, user) => {
            acc[user.id] = apiKeys.filter(key => key.userId === user.id);
            return acc;
          }, {}),
          userToLogs: users.reduce((acc, user) => {
            acc[user.id] = logs.filter(log => log.userId === user.id);
            return acc;
          }, {})
        }
      };
      logReturn('TestDataFactory.createRelatedEntities', `created ${users.length} users, ${apiKeys.length} API keys, ${logs.length} logs`);
      return result;
    } catch (error) {
      logReturn('TestDataFactory.createRelatedEntities', `error: ${error.message}`);
      throw error;
    }
  }
}
module.exports = {
  TestDataFactory
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dTdGFydCIsImxvZ1JldHVybiIsInJlcXVpcmUiLCJUZXN0RGF0YUZhY3RvcnkiLCJjb3VudGVyIiwibmV4dElkIiwiaXNKZXN0UGFyYWxsZWwiLCJwcm9jZXNzIiwiZW52IiwiSkVTVF9XT1JLRVJfSUQiLCJpc0V4cGxpY2l0UGFyYWxsZWwiLCJRVEVTVFNfUEFSQUxMRUxfTU9ERSIsImhyVGltZSIsImhydGltZSIsImJpZ2ludCIsInJhbmRvbSIsIk1hdGgiLCJ0b1N0cmluZyIsInN1YnN0ciIsImNyZWF0ZVVzZXIiLCJvdmVycmlkZXMiLCJpZCIsInVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImlzQWN0aXZlIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsImNyZWF0ZUFwaUtleSIsImFwaUtleSIsImtleSIsIm5hbWUiLCJ1c2VySWQiLCJwZXJtaXNzaW9ucyIsImV4cGlyZXNBdCIsIm5vdyIsImNyZWF0ZUxvZ0VudHJ5IiwibG9nRW50cnkiLCJtZXNzYWdlIiwibGV2ZWwiLCJ0aW1lc3RhbXAiLCJzb3VyY2UiLCJtZXRhZGF0YSIsInRlc3RJZCIsImVudmlyb25tZW50IiwiY3JlYXRlQ29uZmlnIiwiY29uZmlnIiwidmFsdWUiLCJ0eXBlIiwic2V0dGluZ3MiLCJkZWJ1ZyIsIm1heFJldHJpZXMiLCJ0aW1lb3V0IiwiZmVhdHVyZXMiLCJlbmFibGVMb2dnaW5nIiwiZW5hYmxlTWV0cmljcyIsImVuYWJsZUFsZXJ0cyIsImNyZWF0ZU11bHRpcGxlIiwiZmFjdG9yeUZuIiwiY291bnQiLCJiYXNlT3ZlcnJpZGVzIiwiZW50aXRpZXMiLCJpIiwiZW50aXR5T3ZlcnJpZGVzIiwicHVzaCIsImNhbGwiLCJsZW5ndGgiLCJiaW5kIiwicmVzZXQiLCJjcmVhdGVSZWxhdGVkRW50aXRpZXMiLCJ1c2VyQ291bnQiLCJhcGlLZXlzUGVyVXNlciIsImxvZ3NQZXJVc2VyIiwidXNlcnMiLCJhcGlLZXlzIiwibG9ncyIsImNvbmZpZ3MiLCJmb3JFYWNoIiwiZW5kcG9pbnQiLCJyZXN1bHQiLCJyZWxhdGlvbnNoaXBzIiwidXNlclRvQXBpS2V5cyIsInJlZHVjZSIsImFjYyIsImZpbHRlciIsInVzZXJUb0xvZ3MiLCJsb2ciLCJlcnJvciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ0ZXN0RGF0YUZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0IERhdGEgRmFjdG9yeSBmb3IgQ3JlYXRpbmcgUmVhbGlzdGljIFRlc3QgRW50aXRpZXNcbiAqIFxuICogVGhpcyBjbGFzcyBmb2N1c2VzIHNvbGVseSBvbiB0ZXN0IGRhdGEgY3JlYXRpb24gYW5kIG1hbmFnZW1lbnQuXG4gKiBJdCBlbGltaW5hdGVzIGR1cGxpY2F0ZSB0ZXN0IGRhdGEgY3JlYXRpb24gYWNyb3NzIHRlc3QgZmlsZXMuXG4gKi9cblxuY29uc3QgeyBsb2dTdGFydCwgbG9nUmV0dXJuIH0gPSByZXF1aXJlKCcuLi8uLi9saWIvbG9nVXRpbHMnKTtcblxuLyoqXG4gKiBUZXN0IERhdGEgRmFjdG9yeSBmb3IgQ3JlYXRpbmcgUmVhbGlzdGljIFRlc3QgRW50aXRpZXNcbiAqIFxuICogVGhpcyBjbGFzcyBlbGltaW5hdGVzIGR1cGxpY2F0ZSB0ZXN0IGRhdGEgY3JlYXRpb24gYWNyb3NzIHRlc3QgZmlsZXNcbiAqIGJ5IHByb3ZpZGluZyBzdGFuZGFyZGl6ZWQgZmFjdG9yeSBtZXRob2RzIGZvciBjb21tb24gdGVzdCBlbnRpdGllcy5cbiAqIFxuICogUEFSQUxMRUwgVEVTVCBTQUZFVFk6XG4gKiAtIFVzZXMgcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCkgZm9yIHVuaXF1ZSBJRHMgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zXG4gKiAtIE5vIHNoYXJlZCBzdGF0aWMgc3RhdGUgYmV0d2VlbiBwYXJhbGxlbCB0ZXN0IGV4ZWN1dGlvbnNcbiAqIC0gRWFjaCB0ZXN0IGdldHMgdW5pcXVlIGRhdGEgdGhhdCB3b24ndCBjb25mbGljdCB3aXRoIG90aGVyIHRlc3RzXG4gKi9cbmNsYXNzIFRlc3REYXRhRmFjdG9yeSB7XG4gIHN0YXRpYyBjb3VudGVyID0gMDtcblxuICAvKipcbiAgICogR2V0cyBuZXh0IHVuaXF1ZSBJRCBmb3IgdGVzdCBkYXRhIChwYXJhbGxlbC1zYWZlIHdoZW4gbmVlZGVkKVxuICAgKiBcbiAgICogQHJldHVybnMge3N0cmluZ3xudW1iZXJ9IFVuaXF1ZSBpZGVudGlmaWVyIC0gc2ltcGxlIGNvdW50ZXIgZm9yIG5vcm1hbCB0ZXN0cywgY29tcGxleCBmb3IgcGFyYWxsZWxcbiAgICovXG4gIHN0YXRpYyBuZXh0SWQoKSB7XG4gICAgLy8gT25seSB1c2UgY29tcGxleCBJRHMgaW4gdmVyeSBzcGVjaWZpYyBwYXJhbGxlbCBleGVjdXRpb24gc2NlbmFyaW9zXG4gICAgY29uc3QgaXNKZXN0UGFyYWxsZWwgPSBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCAmJiBwcm9jZXNzLmVudi5KRVNUX1dPUktFUl9JRCAhPT0gJzEnO1xuICAgIGNvbnN0IGlzRXhwbGljaXRQYXJhbGxlbCA9IHByb2Nlc3MuZW52LlFURVNUU19QQVJBTExFTF9NT0RFID09PSAndHJ1ZSc7XG4gICAgXG4gICAgaWYgKCFpc0plc3RQYXJhbGxlbCAmJiAhaXNFeHBsaWNpdFBhcmFsbGVsKSB7XG4gICAgICAvLyBOb3JtYWwgdGVzdGluZyAtIHVzZSBzaW1wbGUgY291bnRlciBmb3IgZXhwZWN0ZWQgZm9ybWF0XG4gICAgICByZXR1cm4gKyt0aGlzLmNvdW50ZXI7XG4gICAgfVxuICAgIFxuICAgIC8vIFBhcmFsbGVsIHRlc3RpbmcgLSB1c2UgY29tcGxleCB1bmlxdWUgaWRlbnRpZmllclxuICAgIGNvbnN0IGhyVGltZSA9IHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpO1xuICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgICByZXR1cm4gYCR7aHJUaW1lfS0ke3JhbmRvbX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZXN0IHVzZXIgd2l0aCByZWFsaXN0aWMgcHJvcGVydGllc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyAtIFByb3BlcnRpZXMgdG8gb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICogQHJldHVybnMge09iamVjdH0gVGVzdCB1c2VyIG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVVzZXIob3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVVzZXInLCBvdmVycmlkZXMpO1xuICAgIFxuICAgIGNvbnN0IGlkID0gdGhpcy5uZXh0SWQoKTtcbiAgICBjb25zdCB1c2VyID0ge1xuICAgICAgaWQ6IGB1c2VyLSR7aWR9YCxcbiAgICAgIHVzZXJuYW1lOiBgdGVzdHVzZXIke2lkfWAsXG4gICAgICBlbWFpbDogYHRlc3Qke2lkfUBleGFtcGxlLmNvbWAsXG4gICAgICBwYXNzd29yZDogYGhhc2hlZHBhc3N3b3JkJHtpZH1gLFxuICAgICAgZmlyc3ROYW1lOiAnVGVzdCcsXG4gICAgICBsYXN0TmFtZTogYFVzZXIke2lkfWAsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIC4uLm92ZXJyaWRlc1xuICAgIH07XG4gICAgXG4gICAgbG9nUmV0dXJuKCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlVXNlcicsIHVzZXIpO1xuICAgIHJldHVybiB1c2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0ZXN0IEFQSSBrZXkgd2l0aCByZWFsaXN0aWMgcHJvcGVydGllc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyAtIFByb3BlcnRpZXMgdG8gb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICogQHJldHVybnMge09iamVjdH0gVGVzdCBBUEkga2V5IG9iamVjdFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUFwaUtleShvdmVycmlkZXMgPSB7fSkge1xuICAgIGxvZ1N0YXJ0KCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQXBpS2V5Jywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgYXBpS2V5ID0ge1xuICAgICAgaWQ6IGBrZXktJHtpZH1gLFxuICAgICAga2V5OiBgdGVzdC1hcGkta2V5LSR7aWR9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICBuYW1lOiBgVGVzdCBBUEkgS2V5ICR7aWR9YCxcbiAgICAgIHVzZXJJZDogYHVzZXItJHtpZH1gLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICBwZXJtaXNzaW9uczogWydyZWFkJywgJ3dyaXRlJ10sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLCAvLyAzMCBkYXlzXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUFwaUtleScsIGFwaUtleSk7XG4gICAgcmV0dXJuIGFwaUtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCBsb2cgZW50cnkgd2l0aCByZWFsaXN0aWMgcHJvcGVydGllc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IG92ZXJyaWRlcyAtIFByb3BlcnRpZXMgdG8gb3ZlcnJpZGUgZGVmYXVsdHNcbiAgICogQHJldHVybnMge09iamVjdH0gVGVzdCBsb2cgZW50cnkgb2JqZWN0XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlTG9nRW50cnkob3ZlcnJpZGVzID0ge30pIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUxvZ0VudHJ5Jywgb3ZlcnJpZGVzKTtcbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMubmV4dElkKCk7XG4gICAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgICBpZDogYGxvZy0ke2lkfWAsXG4gICAgICBtZXNzYWdlOiBgVGVzdCBsb2cgbWVzc2FnZSAke2lkfWAsXG4gICAgICBsZXZlbDogJ2luZm8nLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgdXNlcklkOiBgdXNlci0ke2lkfWAsXG4gICAgICBzb3VyY2U6ICd0ZXN0LWFwcGxpY2F0aW9uJyxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIHRlc3RJZDogaWQsXG4gICAgICAgIGVudmlyb25tZW50OiAndGVzdCdcbiAgICAgIH0sXG4gICAgICAuLi5vdmVycmlkZXNcbiAgICB9O1xuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUxvZ0VudHJ5JywgbG9nRW50cnkpO1xuICAgIHJldHVybiBsb2dFbnRyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVzdCBjb25maWd1cmF0aW9uIG9iamVjdCB3aXRoIHJlYWxpc3RpYyBwcm9wZXJ0aWVzXG4gICAqIFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3ZlcnJpZGVzIC0gUHJvcGVydGllcyB0byBvdmVycmlkZSBkZWZhdWx0c1xuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlQ29uZmlnKG92ZXJyaWRlcyA9IHt9KSB7XG4gICAgbG9nU3RhcnQoJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVDb25maWcnLCBvdmVycmlkZXMpO1xuICAgIFxuICAgIGNvbnN0IGlkID0gdGhpcy5uZXh0SWQoKTtcbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBpZDogYGNvbmZpZy0ke2lkfWAsXG4gICAgICBuYW1lOiBgVGVzdCBDb25maWd1cmF0aW9uICR7aWR9YCxcbiAgICAgIHZhbHVlOiBgdGVzdC12YWx1ZS0ke2lkfWAsXG4gICAgICBlbnZpcm9ubWVudDogJ3Rlc3QnLFxuICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgIGRlYnVnOiB0cnVlLFxuICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICB0aW1lb3V0OiA1MDAwXG4gICAgICB9LFxuICAgICAgZmVhdHVyZXM6IHtcbiAgICAgICAgZW5hYmxlTG9nZ2luZzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlTWV0cmljczogZmFsc2UsXG4gICAgICAgIGVuYWJsZUFsZXJ0czogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIC4uLm92ZXJyaWRlc1xuICAgIH07XG4gICAgXG4gICAgbG9nUmV0dXJuKCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQ29uZmlnJywgY29uZmlnKTtcbiAgICByZXR1cm4gY29uZmlnO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbXVsdGlwbGUgdGVzdCBlbnRpdGllcyB1c2luZyBhIGZhY3RvcnkgZnVuY3Rpb25cbiAgICogXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZhY3RvcnlGbiAtIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIHNpbmdsZSBlbnRpdGllc1xuICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgLSBOdW1iZXIgb2YgZW50aXRpZXMgdG8gY3JlYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBiYXNlT3ZlcnJpZGVzIC0gQmFzZSBvdmVycmlkZXMgYXBwbGllZCB0byBhbGwgZW50aXRpZXNcbiAgICogQHJldHVybnMge0FycmF5fSBBcnJheSBvZiBjcmVhdGVkIHRlc3QgZW50aXRpZXNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVNdWx0aXBsZShmYWN0b3J5Rm4sIGNvdW50ID0gMTAsIGJhc2VPdmVycmlkZXMgPSB7fSkge1xuICAgIGxvZ1N0YXJ0KCdUZXN0RGF0YUZhY3RvcnkuY3JlYXRlTXVsdGlwbGUnLCB7IGNvdW50LCBiYXNlT3ZlcnJpZGVzIH0pO1xuICAgIFxuICAgIGNvbnN0IGVudGl0aWVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBjb25zdCBlbnRpdHlPdmVycmlkZXMgPSB7IC4uLmJhc2VPdmVycmlkZXMgfTtcbiAgICAgIGVudGl0aWVzLnB1c2goZmFjdG9yeUZuLmNhbGwodGhpcywgZW50aXR5T3ZlcnJpZGVzKSk7XG4gICAgfVxuICAgIFxuICAgIGxvZ1JldHVybignVGVzdERhdGFGYWN0b3J5LmNyZWF0ZU11bHRpcGxlJywgYCR7ZW50aXRpZXMubGVuZ3RofSBlbnRpdGllc2ApO1xuICAgIHJldHVybiBlbnRpdGllcztcbiAgfVxuXG4gIC8vIEluc3RhbmNlIG1ldGhvZCB3cmFwcGVycyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIFRlc3RTdWl0ZUJ1aWxkZXJcbiAgY3JlYXRlVXNlcihvdmVycmlkZXMpIHtcbiAgICByZXR1cm4gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVVzZXIob3ZlcnJpZGVzKTtcbiAgfVxuXG4gIGNyZWF0ZUFwaUtleShvdmVycmlkZXMpIHtcbiAgICByZXR1cm4gVGVzdERhdGFGYWN0b3J5LmNyZWF0ZUFwaUtleShvdmVycmlkZXMpO1xuICB9XG5cbiAgY3JlYXRlTG9nRW50cnkob3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVMb2dFbnRyeShvdmVycmlkZXMpO1xuICB9XG5cbiAgY3JlYXRlQ29uZmlnKG92ZXJyaWRlcykge1xuICAgIHJldHVybiBUZXN0RGF0YUZhY3RvcnkuY3JlYXRlQ29uZmlnKG92ZXJyaWRlcyk7XG4gIH1cblxuICBjcmVhdGVNdWx0aXBsZShmYWN0b3J5Rm4sIGNvdW50LCBiYXNlT3ZlcnJpZGVzKSB7XG4gICAgcmV0dXJuIFRlc3REYXRhRmFjdG9yeS5jcmVhdGVNdWx0aXBsZShmYWN0b3J5Rm4uYmluZCh0aGlzKSwgY291bnQsIGJhc2VPdmVycmlkZXMpO1xuICB9XG5cbiAgLy8gU3RhdGljIG1ldGhvZCBmb3IgcmVzZXR0aW5nIGNvdW50ZXJcbiAgc3RhdGljIHJlc2V0KCkge1xuICAgIHRoaXMuY291bnRlciA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyByZWxhdGVkIGVudGl0aWVzIHdpdGggcmVsYXRpb25zaGlwc1xuICAgKiBcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIENvbmZpZ3VyYXRpb24gZm9yIGNyZWF0aW5nIHJlbGF0ZWQgZW50aXRpZXNcbiAgICogQHJldHVybnMge09iamVjdH0gT2JqZWN0IHdpdGggY3JlYXRlZCBlbnRpdGllcyBhbmQgcmVsYXRpb25zaGlwc1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVJlbGF0ZWRFbnRpdGllcyhjb25maWcpIHtcbiAgICBsb2dTdGFydCgnVGVzdERhdGFGYWN0b3J5LmNyZWF0ZVJlbGF0ZWRFbnRpdGllcycsIGNvbmZpZyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgdXNlckNvdW50ID0gMSxcbiAgICAgICAgYXBpS2V5c1BlclVzZXIgPSAxLFxuICAgICAgICBsb2dzUGVyVXNlciA9IDFcbiAgICAgIH0gPSBjb25maWc7XG4gICAgICBcbiAgICAgIGNvbnN0IHVzZXJzID0gW107XG4gICAgICBjb25zdCBhcGlLZXlzID0gW107XG4gICAgICBjb25zdCBsb2dzID0gW107XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB1c2VycyBmaXJzdFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1c2VyQ291bnQ7IGkrKykge1xuICAgICAgICB1c2Vycy5wdXNoKHRoaXMuY3JlYXRlVXNlcigpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNvbmZpZ3MgKHNoYXJlZCBjb25maWd1cmF0aW9ucylcbiAgICAgIGNvbnN0IGNvbmZpZ3MgPSBbdGhpcy5jcmVhdGVDb25maWcoKV07XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBBUEkga2V5cyBmb3IgZWFjaCB1c2VyXG4gICAgICB1c2Vycy5mb3JFYWNoKHVzZXIgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFwaUtleXNQZXJVc2VyOyBpKyspIHtcbiAgICAgICAgICBhcGlLZXlzLnB1c2godGhpcy5jcmVhdGVBcGlLZXkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAga2V5OiBgJHt1c2VyLnVzZXJuYW1lfS1rZXktJHtpICsgMX1gXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGxvZ3MgZm9yIGVhY2ggdXNlclxuICAgICAgdXNlcnMuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2dzUGVyVXNlcjsgaSsrKSB7XG4gICAgICAgICAgbG9ncy5wdXNoKHRoaXMuY3JlYXRlTG9nRW50cnkoe1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3VzZXJzLyR7dXNlci5pZH0vZGF0YS0ke2kgKyAxfWBcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHVzZXJzLFxuICAgICAgICBhcGlLZXlzLFxuICAgICAgICBsb2dzLFxuICAgICAgICBjb25maWdzLFxuICAgICAgICByZWxhdGlvbnNoaXBzOiB7XG4gICAgICAgICAgdXNlclRvQXBpS2V5czogdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICAgICAgICAgIGFjY1t1c2VyLmlkXSA9IGFwaUtleXMuZmlsdGVyKGtleSA9PiBrZXkudXNlcklkID09PSB1c2VyLmlkKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHVzZXJUb0xvZ3M6IHVzZXJzLnJlZHVjZSgoYWNjLCB1c2VyKSA9PiB7XG4gICAgICAgICAgICBhY2NbdXNlci5pZF0gPSBsb2dzLmZpbHRlcihsb2cgPT4gbG9nLnVzZXJJZCA9PT0gdXNlci5pZCk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgIH0sIHt9KVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgY3JlYXRlZCAke3VzZXJzLmxlbmd0aH0gdXNlcnMsICR7YXBpS2V5cy5sZW5ndGh9IEFQSSBrZXlzLCAke2xvZ3MubGVuZ3RofSBsb2dzYCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dSZXR1cm4oJ1Rlc3REYXRhRmFjdG9yeS5jcmVhdGVSZWxhdGVkRW50aXRpZXMnLCBgZXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVGVzdERhdGFGYWN0b3J5XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU07RUFBRUEsUUFBUTtFQUFFQztBQUFVLENBQUMsR0FBR0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDOztBQUU3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsZUFBZSxDQUFDO0VBQ3BCLE9BQU9DLE9BQU8sR0FBRyxDQUFDOztFQUVsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0MsTUFBTUEsQ0FBQSxFQUFHO0lBQ2Q7SUFDQSxNQUFNQyxjQUFjLEdBQUdDLE9BQU8sQ0FBQ0MsR0FB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