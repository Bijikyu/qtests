{"version":3,"names":["collections","Map","BaseMockModel","constructor","data","_id","Date","now","Math","random","toString","substr","Object","assign","save","collectionName","modelName","has","set","collection","get","existingIndex","findIndex","item","push","getCollection","find","query","keys","length","filter","every","key","createMockModel","MockModel","ApiKey","name","permissions","createdAt","ApiLog","endpoint","method","statusCode","timestamp","resetAllCollections","clear","module","exports","mockApiKeys","mockLogs"],"sources":["mockModels.js"],"sourcesContent":["/**\n * Mock Models for Testing - Working Implementation\n */\n\n// Collections storage\nconst collections = new Map();\n\n/**\n * Base Mock Model class\n */\nclass BaseMockModel {\n  constructor(data = {}) {\n    this._id = data._id || `mock_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    Object.assign(this, data);\n  }\n  \n  async save() {\n    const collectionName = this.constructor.modelName || 'default';\n    if (!collections.has(collectionName)) {\n      collections.set(collectionName, []);\n    }\n    \n    const collection = collections.get(collectionName);\n    const existingIndex = collection.findIndex(item => item._id === this._id);\n    \n    if (existingIndex >= 0) {\n      collection[existingIndex] = this;\n    } else {\n      collection.push(this);\n    }\n    \n    return this;\n  }\n  \n  static getCollection() {\n    const collectionName = this.modelName || 'default';\n    return collections.get(collectionName) || [];\n  }\n  \n  static find(query = {}) {\n    const collection = this.getCollection();\n    if (Object.keys(query).length === 0) {\n      return [...collection]; // Return copy\n    }\n    \n    return collection.filter(item => {\n      return Object.keys(query).every(key => item[key] === query[key]);\n    });\n  }\n}\n\n/**\n * Create mock model class\n */\nfunction createMockModel(modelName) {\n  class MockModel extends BaseMockModel {\n    static modelName = modelName;\n  }\n  MockModel.modelName = modelName;\n  return MockModel;\n}\n\n/**\n * Pre-built API Key model\n */\nclass ApiKey extends BaseMockModel {\n  static modelName = 'ApiKey';\n  \n  constructor(data = {}) {\n    super(data);\n    this.key = data.key || '';\n    this.name = data.name || '';\n    this.permissions = data.permissions || [];\n    this.createdAt = data.createdAt || new Date();\n  }\n}\n\n/**\n * Pre-built API Log model  \n */\nclass ApiLog extends BaseMockModel {\n  static modelName = 'ApiLog';\n  \n  constructor(data = {}) {\n    super(data);\n    this.endpoint = data.endpoint || '';\n    this.method = data.method || 'GET';\n    this.statusCode = data.statusCode || 200;\n    this.timestamp = data.timestamp || new Date();\n  }\n}\n\n/**\n * Reset all collections\n */\nfunction resetAllCollections() {\n  collections.clear();\n}\n\nmodule.exports = {\n  BaseMockModel,\n  ApiKey,\n  ApiLog,\n  createMockModel,\n  resetAllCollections,\n  // Legacy exports for compatibility\n  mockApiKeys: () => ApiKey.getCollection(),\n  mockLogs: () => ApiLog.getCollection()\n};"],"mappings":"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","ignoreList":[]}