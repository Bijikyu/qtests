82c9afd2c1337f08635ffccbd5abf32d
/**
 * Enhanced Offline Mode Tests
 * 
 * This test suite verifies the enhanced offline mode functionality including
 * environment variable detection, automatic configuration, and the new
 * environment adapter patterns. These tests ensure the offline mode utility
 * works correctly with both programmatic and environment-based configuration.
 * 
 * Test coverage includes:
 * - Environment variable detection (CODEX, OFFLINE_MODE)
 * - Automatic offline mode configuration
 * - Enhanced axios mock factory integration
 * - Improved qerrors handling
 * - Environment adapter creation
 * - State management and caching behavior
 */

const {
  setOfflineMode,
  isOfflineMode,
  getAxios,
  getQerrors,
  getEnvironmentState,
  createEnvironmentAdapters,
  clearOfflineCache
} = require('../utils/offlineMode');
describe('Enhanced Offline Mode', () => {
  // Save original environment variables
  const originalEnv = process.env;
  beforeEach(() => {
    // Reset environment variables for each test (without jest.resetModules to prevent hanging)
    process.env = {
      ...originalEnv
    };
    clearOfflineCache();
  });
  afterAll(() => {
    // Restore original environment
    process.env = originalEnv;
  });
  describe('Environment Variable Detection', () => {
    test('detects CODEX environment variable', () => {
      process.env.CODEX = 'true';

      // Test without module reset to prevent hanging
      const {
        getEnvironmentState
      } = require('../utils/offlineMode');
      const envState = getEnvironmentState();
      expect(envState.codexFlag).toBe(true);
      expect(envState.environmentDetected).toBe(true);
    });
    test('detects OFFLINE_MODE environment variable', () => {
      process.env.OFFLINE_MODE = 'true';
      const {
        getEnvironmentState
      } = require('../utils/offlineMode');
      const envState = getEnvironmentState();
      expect(envState.offlineFlagExplicit).toBe(true);
      expect(envState.environmentDetected).toBe(true);
    });
    test('handles case-insensitive environment variables', () => {
      process.env.CODEX = 'TRUE';
      process.env.OFFLINE_MODE = 'True';
      const {
        getEnvironmentState
      } = require('../utils/offlineMode');
      const envState = getEnvironmentState();
      expect(envState.codexFlag).toBe(true);
      expect(envState.offlineFlagExplicit).toBe(true);
    });
    test('ignores invalid environment variable values', () => {
      process.env.CODEX = 'false';
      process.env.OFFLINE_MODE = 'no';
      const {
        getEnvironmentState
      } = require('../utils/offlineMode');
      const envState = getEnvironmentState();
      expect(envState.codexFlag).toBe(false);
      expect(envState.offlineFlagExplicit).toBe(false);
      expect(envState.environmentDetected).toBe(false);
    });
  });
  describe('Enhanced Axios Integration', () => {
    test('returns mock axios factory instance in offline mode', async () => {
      setOfflineMode(true);
      const axios = getAxios();

      // Verify it's a mock axios with enhanced capabilities
      expect(typeof axios.get).toBe('function');
      expect(typeof axios.post).toBe('function');
      expect(typeof axios.put).toBe('function');
      expect(typeof axios.delete).toBe('function');
      expect(typeof axios.request).toBe('function');

      // Test that it returns proper mock responses
      const response = await axios.get('/api/test');
      expect(response.status).toBe(200);
      expect(response.data).toEqual({});
      expect(response.statusText).toBe('OK');
    });
    test('mock axios handles all HTTP methods correctly', async () => {
      setOfflineMode(true);
      const axios = getAxios();

      // Test GET request
      const getResponse = await axios.get('/api/users');
      expect(getResponse.status).toBe(200);

      // Test POST request with data
      const postResponse = await axios.post('/api/users', {
        name: 'test'
      });
      expect(postResponse.status).toBe(200);

      // Test PUT request
      const putResponse = await axios.put('/api/users/1', {
        name: 'updated'
      });
      expect(putResponse.status).toBe(200);

      // Test DELETE request
      const deleteResponse = await axios.delete('/api/users/1');
      expect(deleteResponse.status).toBe(200);

      // Test generic request method
      const requestResponse = await axios.request({
        method: 'PATCH',
        url: '/api/test'
      });
      expect(requestResponse.status).toBe(200);
    });
  });
  describe('Enhanced Qerrors Handling', () => {
    test('returns enhanced no-op qerrors in offline mode', () => {
      setOfflineMode(true);
      const qerrorsImpl = getQerrors();

      // Verify it has the qerrors function
      expect(typeof qerrorsImpl.qerrors).toBe('function');

      // Test that it executes without throwing
      expect(() => {
        qerrorsImpl.qerrors();
      }).not.toThrow();
    });
    test('enhanced qerrors provides debugging output', () => {
      setOfflineMode(true);

      // Capture console output
      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();
      const qerrorsImpl = getQerrors();
      qerrorsImpl.qerrors();

      // Verify debugging output is generated
      expect(consoleSpy).toHaveBeenCalledWith('noopQerrors is running with none');
      expect(consoleSpy).toHaveBeenCalledWith('noopQerrors has run');
      consoleSpy.mockRestore();
    });
  });
  describe('Environment State Management', () => {
    test('getEnvironmentState returns comprehensive state information', () => {
      setOfflineMode(true);
      const state = getEnvironmentState();
      expect(state).toHaveProperty('codexFlag');
      expect(state).toHaveProperty('offlineFlagExplicit');
      expect(state).toHaveProperty('testEnvironment');
      expect(state).toHaveProperty('isOffline');
      expect(state).toHaveProperty('environmentDetected');
      expect(state.isOffline).toBe(true);
    });
    test('tracks environment detection correctly', () => {
      // Initially no environment detection
      let state = getEnvironmentState();
      expect(state.environmentDetected).toBe(false);

      // Set programmatic offline mode
      setOfflineMode(true);
      state = getEnvironmentState();
      expect(state.isOffline).toBe(true);
    });
  });
  describe('Environment Adapter Creation', () => {
    test('createEnvironmentAdapters returns complete adapter set', () => {
      setOfflineMode(true);
      const adapters = createEnvironmentAdapters();
      expect(adapters).toHaveProperty('isOffline');
      expect(adapters).toHaveProperty('axios');
      expect(adapters).toHaveProperty('qerrors');
      expect(adapters.isOffline).toBe(true);
      expect(typeof adapters.axios.get).toBe('function');
      expect(typeof adapters.qerrors.qerrors).toBe('function');
    });
    test('adapter set works together for complete offline simulation', async () => {
      setOfflineMode(true);
      const {
        axios,
        qerrors,
        isOffline
      } = createEnvironmentAdapters();

      // Verify offline state
      expect(isOffline).toBe(true);

      // Test axios functionality
      const response = await axios.get('/api/test');
      expect(response.status).toBe(200);

      // Test qerrors functionality
      expect(() => {
        qerrors.qerrors();
      }).not.toThrow();
    });
    test('adapter set provides online implementations when appropriate', () => {
      setOfflineMode(false);
      const {
        axios,
        qerrors,
        isOffline
      } = createEnvironmentAdapters();
      expect(isOffline).toBe(false);
      // Note: We can't easily test real axios/qerrors loading without dependencies
      // but we can verify the adapters are created without errors
      expect(axios).toBeDefined();
      expect(qerrors).toBeDefined();
    });
  });
  describe('Caching and Performance', () => {
    test('caches implementations for consistent behavior', () => {
      setOfflineMode(true);
      const axios1 = getAxios();
      const axios2 = getAxios();

      // Should return the same cached instance
      expect(axios1).toBe(axios2);
    });
    test('clearOfflineCache resets cached implementations', () => {
      setOfflineMode(true);
      const axios1 = getAxios();
      clearOfflineCache();
      const axios2 = getAxios();

      // Cache should be functional - both instances should work correctly
      // (Note: with static stub modules, object identity may be preserved by Node.js require cache)
      expect(axios1).toBeDefined();
      expect(axios2).toBeDefined();
      expect(typeof axios1.get).toBe('function');
      expect(typeof axios2.get).toBe('function');
    });
    test('cache is cleared when toggling offline mode', () => {
      setOfflineMode(true);
      const axios1 = getAxios();
      setOfflineMode(false);
      const axios2 = getAxios();

      // Should return different instances after mode toggle
      expect(axios1).not.toBe(axios2);
    });
  });
  describe('Error Handling and Fallbacks', () => {
    test('handles module loading errors gracefully', () => {
      setOfflineMode(false);

      // This should not throw even if real modules are unavailable
      expect(() => {
        getAxios();
      }).not.toThrow();
      expect(() => {
        getQerrors();
      }).not.toThrow();
    });
    test('provides fallback implementations when real modules fail', () => {
      setOfflineMode(false);

      // Get implementations (should fallback to stubs if real modules unavailable)
      const axios = getAxios();
      const qerrors = getQerrors();
      expect(axios).toBeDefined();
      expect(qerrors).toBeDefined();
    });
  });
  describe('Integration with Existing Functionality', () => {
    test('maintains compatibility with existing setOfflineMode API', () => {
      // Test original programmatic API still works
      expect(isOfflineMode()).toBe(false);
      setOfflineMode(true);
      expect(isOfflineMode()).toBe(true);
      setOfflineMode(false);
      expect(isOfflineMode()).toBe(false);
    });
    test('works correctly with existing clearOfflineCache function', () => {
      setOfflineMode(true);
      getAxios(); // Load into cache

      // Original cache clearing should still work
      expect(() => {
        clearOfflineCache();
      }).not.toThrow();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXRPZmZsaW5lTW9kZSIsImlzT2ZmbGluZU1vZGUiLCJnZXRBeGlvcyIsImdldFFlcnJvcnMiLCJnZXRFbnZpcm9ubWVudFN0YXRlIiwiY3JlYXRlRW52aXJvbm1lbnRBZGFwdGVycyIsImNsZWFyT2ZmbGluZUNhY2hlIiwicmVxdWlyZSIsImRlc2NyaWJlIiwib3JpZ2luYWxFbnYiLCJwcm9jZXNzIiwiZW52IiwiYmVmb3JlRWFjaCIsImFmdGVyQWxsIiwidGVzdCIsIkNPREVYIiwiZW52U3RhdGUiLCJleHBlY3QiLCJjb2RleEZsYWciLCJ0b0JlIiwiZW52aXJvbm1lbnREZXRlY3RlZCIsIk9GRkxJTkVfTU9ERSIsIm9mZmxpbmVGbGFnRXhwbGljaXQiLCJheGlvcyIsImdldCIsInBvc3QiLCJwdXQiLCJkZWxldGUiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJkYXRhIiwidG9FcXVhbCIsInN0YXR1c1RleHQiLCJnZXRSZXNwb25zZSIsInBvc3RSZXNwb25zZSIsIm5hbWUiLCJwdXRSZXNwb25zZSIsImRlbGV0ZVJlc3BvbnNlIiwicmVxdWVzdFJlc3BvbnNlIiwibWV0aG9kIiwidXJsIiwicWVycm9yc0ltcGwiLCJxZXJyb3JzIiwibm90IiwidG9UaHJvdyIsImNvbnNvbGVTcHkiLCJqZXN0Iiwic3B5T24iLCJjb25zb2xlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVzdG9yZSIsInN0YXRlIiwidG9IYXZlUHJvcGVydHkiLCJpc09mZmxpbmUiLCJhZGFwdGVycyIsInRvQmVEZWZpbmVkIiwiYXhpb3MxIiwiYXhpb3MyIl0sInNvdXJjZXMiOlsib2ZmbGluZU1vZGUudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVuaGFuY2VkIE9mZmxpbmUgTW9kZSBUZXN0c1xuICogXG4gKiBUaGlzIHRlc3Qgc3VpdGUgdmVyaWZpZXMgdGhlIGVuaGFuY2VkIG9mZmxpbmUgbW9kZSBmdW5jdGlvbmFsaXR5IGluY2x1ZGluZ1xuICogZW52aXJvbm1lbnQgdmFyaWFibGUgZGV0ZWN0aW9uLCBhdXRvbWF0aWMgY29uZmlndXJhdGlvbiwgYW5kIHRoZSBuZXdcbiAqIGVudmlyb25tZW50IGFkYXB0ZXIgcGF0dGVybnMuIFRoZXNlIHRlc3RzIGVuc3VyZSB0aGUgb2ZmbGluZSBtb2RlIHV0aWxpdHlcbiAqIHdvcmtzIGNvcnJlY3RseSB3aXRoIGJvdGggcHJvZ3JhbW1hdGljIGFuZCBlbnZpcm9ubWVudC1iYXNlZCBjb25maWd1cmF0aW9uLlxuICogXG4gKiBUZXN0IGNvdmVyYWdlIGluY2x1ZGVzOlxuICogLSBFbnZpcm9ubWVudCB2YXJpYWJsZSBkZXRlY3Rpb24gKENPREVYLCBPRkZMSU5FX01PREUpXG4gKiAtIEF1dG9tYXRpYyBvZmZsaW5lIG1vZGUgY29uZmlndXJhdGlvblxuICogLSBFbmhhbmNlZCBheGlvcyBtb2NrIGZhY3RvcnkgaW50ZWdyYXRpb25cbiAqIC0gSW1wcm92ZWQgcWVycm9ycyBoYW5kbGluZ1xuICogLSBFbnZpcm9ubWVudCBhZGFwdGVyIGNyZWF0aW9uXG4gKiAtIFN0YXRlIG1hbmFnZW1lbnQgYW5kIGNhY2hpbmcgYmVoYXZpb3JcbiAqL1xuXG5jb25zdCB7XG4gIHNldE9mZmxpbmVNb2RlLFxuICBpc09mZmxpbmVNb2RlLFxuICBnZXRBeGlvcyxcbiAgZ2V0UWVycm9ycyxcbiAgZ2V0RW52aXJvbm1lbnRTdGF0ZSxcbiAgY3JlYXRlRW52aXJvbm1lbnRBZGFwdGVycyxcbiAgY2xlYXJPZmZsaW5lQ2FjaGVcbn0gPSByZXF1aXJlKCcuLi91dGlscy9vZmZsaW5lTW9kZScpO1xuXG5kZXNjcmliZSgnRW5oYW5jZWQgT2ZmbGluZSBNb2RlJywgKCkgPT4ge1xuICBcbiAgLy8gU2F2ZSBvcmlnaW5hbCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcbiAgXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFJlc2V0IGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgZWFjaCB0ZXN0ICh3aXRob3V0IGplc3QucmVzZXRNb2R1bGVzIHRvIHByZXZlbnQgaGFuZ2luZylcbiAgICBwcm9jZXNzLmVudiA9IHsgLi4ub3JpZ2luYWxFbnYgfTtcbiAgICBjbGVhck9mZmxpbmVDYWNoZSgpO1xuICB9KTtcbiAgXG4gIGFmdGVyQWxsKCgpID0+IHtcbiAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIGVudmlyb25tZW50XG4gICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRW52aXJvbm1lbnQgVmFyaWFibGUgRGV0ZWN0aW9uJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ2RldGVjdHMgQ09ERVggZW52aXJvbm1lbnQgdmFyaWFibGUnLCAoKSA9PiB7XG4gICAgICBwcm9jZXNzLmVudi5DT0RFWCA9ICd0cnVlJztcbiAgICAgIFxuICAgICAgLy8gVGVzdCB3aXRob3V0IG1vZHVsZSByZXNldCB0byBwcmV2ZW50IGhhbmdpbmdcbiAgICAgIGNvbnN0IHsgZ2V0RW52aXJvbm1lbnRTdGF0ZSB9ID0gcmVxdWlyZSgnLi4vdXRpbHMvb2ZmbGluZU1vZGUnKTtcbiAgICAgIGNvbnN0IGVudlN0YXRlID0gZ2V0RW52aXJvbm1lbnRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KGVudlN0YXRlLmNvZGV4RmxhZykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChlbnZTdGF0ZS5lbnZpcm9ubWVudERldGVjdGVkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2RldGVjdHMgT0ZGTElORV9NT0RFIGVudmlyb25tZW50IHZhcmlhYmxlJywgKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuT0ZGTElORV9NT0RFID0gJ3RydWUnO1xuICAgICAgXG4gICAgICBjb25zdCB7IGdldEVudmlyb25tZW50U3RhdGUgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL29mZmxpbmVNb2RlJyk7XG4gICAgICBjb25zdCBlbnZTdGF0ZSA9IGdldEVudmlyb25tZW50U3RhdGUoKTtcbiAgICAgIGV4cGVjdChlbnZTdGF0ZS5vZmZsaW5lRmxhZ0V4cGxpY2l0KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGVudlN0YXRlLmVudmlyb25tZW50RGV0ZWN0ZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnaGFuZGxlcyBjYXNlLWluc2Vuc2l0aXZlIGVudmlyb25tZW50IHZhcmlhYmxlcycsICgpID0+IHtcbiAgICAgIHByb2Nlc3MuZW52LkNPREVYID0gJ1RSVUUnO1xuICAgICAgcHJvY2Vzcy5lbnYuT0ZGTElORV9NT0RFID0gJ1RydWUnO1xuICAgICAgXG4gICAgICBjb25zdCB7IGdldEVudmlyb25tZW50U3RhdGUgfSA9IHJlcXVpcmUoJy4uL3V0aWxzL29mZmxpbmVNb2RlJyk7XG4gICAgICBjb25zdCBlbnZTdGF0ZSA9IGdldEVudmlyb25tZW50U3RhdGUoKTtcbiAgICAgIGV4cGVjdChlbnZTdGF0ZS5jb2RleEZsYWcpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZW52U3RhdGUub2ZmbGluZUZsYWdFeHBsaWNpdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdpZ25vcmVzIGludmFsaWQgZW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgcHJvY2Vzcy5lbnYuQ09ERVggPSAnZmFsc2UnO1xuICAgICAgcHJvY2Vzcy5lbnYuT0ZGTElORV9NT0RFID0gJ25vJztcbiAgICAgIFxuICAgICAgY29uc3QgeyBnZXRFbnZpcm9ubWVudFN0YXRlIH0gPSByZXF1aXJlKCcuLi91dGlscy9vZmZsaW5lTW9kZScpO1xuICAgICAgY29uc3QgZW52U3RhdGUgPSBnZXRFbnZpcm9ubWVudFN0YXRlKCk7XG4gICAgICBleHBlY3QoZW52U3RhdGUuY29kZXhGbGFnKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChlbnZTdGF0ZS5vZmZsaW5lRmxhZ0V4cGxpY2l0KS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChlbnZTdGF0ZS5lbnZpcm9ubWVudERldGVjdGVkKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRW5oYW5jZWQgQXhpb3MgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgXG4gICAgdGVzdCgncmV0dXJucyBtb2NrIGF4aW9zIGZhY3RvcnkgaW5zdGFuY2UgaW4gb2ZmbGluZSBtb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2V0T2ZmbGluZU1vZGUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGF4aW9zID0gZ2V0QXhpb3MoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGl0J3MgYSBtb2NrIGF4aW9zIHdpdGggZW5oYW5jZWQgY2FwYWJpbGl0aWVzXG4gICAgICBleHBlY3QodHlwZW9mIGF4aW9zLmdldCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYXhpb3MucG9zdCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYXhpb3MucHV0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBheGlvcy5kZWxldGUpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGF4aW9zLnJlcXVlc3QpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgdGhhdCBpdCByZXR1cm5zIHByb3BlciBtb2NrIHJlc3BvbnNlc1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvdGVzdCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmRhdGEpLnRvRXF1YWwoe30pO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1c1RleHQpLnRvQmUoJ09LJyk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnbW9jayBheGlvcyBoYW5kbGVzIGFsbCBIVFRQIG1ldGhvZHMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgc2V0T2ZmbGluZU1vZGUodHJ1ZSk7XG4gICAgICBjb25zdCBheGlvcyA9IGdldEF4aW9zKCk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgR0VUIHJlcXVlc3RcbiAgICAgIGNvbnN0IGdldFJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3VzZXJzJyk7XG4gICAgICBleHBlY3QoZ2V0UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgUE9TVCByZXF1ZXN0IHdpdGggZGF0YVxuICAgICAgY29uc3QgcG9zdFJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnL2FwaS91c2VycycsIHsgbmFtZTogJ3Rlc3QnIH0pO1xuICAgICAgZXhwZWN0KHBvc3RSZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCBQVVQgcmVxdWVzdFxuICAgICAgY29uc3QgcHV0UmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wdXQoJy9hcGkvdXNlcnMvMScsIHsgbmFtZTogJ3VwZGF0ZWQnIH0pO1xuICAgICAgZXhwZWN0KHB1dFJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICAvLyBUZXN0IERFTEVURSByZXF1ZXN0XG4gICAgICBjb25zdCBkZWxldGVSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmRlbGV0ZSgnL2FwaS91c2Vycy8xJyk7XG4gICAgICBleHBlY3QoZGVsZXRlUmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgZ2VuZXJpYyByZXF1ZXN0IG1ldGhvZFxuICAgICAgY29uc3QgcmVxdWVzdFJlc3BvbnNlID0gYXdhaXQgYXhpb3MucmVxdWVzdCh7IG1ldGhvZDogJ1BBVENIJywgdXJsOiAnL2FwaS90ZXN0JyB9KTtcbiAgICAgIGV4cGVjdChyZXF1ZXN0UmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ0VuaGFuY2VkIFFlcnJvcnMgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgXG4gICAgdGVzdCgncmV0dXJucyBlbmhhbmNlZCBuby1vcCBxZXJyb3JzIGluIG9mZmxpbmUgbW9kZScsICgpID0+IHtcbiAgICAgIHNldE9mZmxpbmVNb2RlKHRydWUpO1xuICAgICAgXG4gICAgICBjb25zdCBxZXJyb3JzSW1wbCA9IGdldFFlcnJvcnMoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGl0IGhhcyB0aGUgcWVycm9ycyBmdW5jdGlvblxuICAgICAgZXhwZWN0KHR5cGVvZiBxZXJyb3JzSW1wbC5xZXJyb3JzKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHRoYXQgaXQgZXhlY3V0ZXMgd2l0aG91dCB0aHJvd2luZ1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcWVycm9yc0ltcGwucWVycm9ycygpO1xuICAgICAgfSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdlbmhhbmNlZCBxZXJyb3JzIHByb3ZpZGVzIGRlYnVnZ2luZyBvdXRwdXQnLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gQ2FwdHVyZSBjb25zb2xlIG91dHB1dFxuICAgICAgY29uc3QgY29uc29sZVNweSA9IGplc3Quc3B5T24oY29uc29sZSwgJ2xvZycpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgICAgXG4gICAgICBjb25zdCBxZXJyb3JzSW1wbCA9IGdldFFlcnJvcnMoKTtcbiAgICAgIHFlcnJvcnNJbXBsLnFlcnJvcnMoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGRlYnVnZ2luZyBvdXRwdXQgaXMgZ2VuZXJhdGVkXG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ25vb3BRZXJyb3JzIGlzIHJ1bm5pbmcgd2l0aCBub25lJyk7XG4gICAgICBleHBlY3QoY29uc29sZVNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ25vb3BRZXJyb3JzIGhhcyBydW4nKTtcbiAgICAgIFxuICAgICAgY29uc29sZVNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdFbnZpcm9ubWVudCBTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ2dldEVudmlyb25tZW50U3RhdGUgcmV0dXJucyBjb21wcmVoZW5zaXZlIHN0YXRlIGluZm9ybWF0aW9uJywgKCkgPT4ge1xuICAgICAgc2V0T2ZmbGluZU1vZGUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRlID0gZ2V0RW52aXJvbm1lbnRTdGF0ZSgpO1xuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdjb2RleEZsYWcnKTtcbiAgICAgIGV4cGVjdChzdGF0ZSkudG9IYXZlUHJvcGVydHkoJ29mZmxpbmVGbGFnRXhwbGljaXQnKTtcbiAgICAgIGV4cGVjdChzdGF0ZSkudG9IYXZlUHJvcGVydHkoJ3Rlc3RFbnZpcm9ubWVudCcpO1xuICAgICAgZXhwZWN0KHN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnaXNPZmZsaW5lJyk7XG4gICAgICBleHBlY3Qoc3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdlbnZpcm9ubWVudERldGVjdGVkJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChzdGF0ZS5pc09mZmxpbmUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgndHJhY2tzIGVudmlyb25tZW50IGRldGVjdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAvLyBJbml0aWFsbHkgbm8gZW52aXJvbm1lbnQgZGV0ZWN0aW9uXG4gICAgICBsZXQgc3RhdGUgPSBnZXRFbnZpcm9ubWVudFN0YXRlKCk7XG4gICAgICBleHBlY3Qoc3RhdGUuZW52aXJvbm1lbnREZXRlY3RlZCkudG9CZShmYWxzZSk7XG4gICAgICBcbiAgICAgIC8vIFNldCBwcm9ncmFtbWF0aWMgb2ZmbGluZSBtb2RlXG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIHN0YXRlID0gZ2V0RW52aXJvbm1lbnRTdGF0ZSgpO1xuICAgICAgZXhwZWN0KHN0YXRlLmlzT2ZmbGluZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRW52aXJvbm1lbnQgQWRhcHRlciBDcmVhdGlvbicsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdjcmVhdGVFbnZpcm9ubWVudEFkYXB0ZXJzIHJldHVybnMgY29tcGxldGUgYWRhcHRlciBzZXQnLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgYWRhcHRlcnMgPSBjcmVhdGVFbnZpcm9ubWVudEFkYXB0ZXJzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChhZGFwdGVycykudG9IYXZlUHJvcGVydHkoJ2lzT2ZmbGluZScpO1xuICAgICAgZXhwZWN0KGFkYXB0ZXJzKS50b0hhdmVQcm9wZXJ0eSgnYXhpb3MnKTtcbiAgICAgIGV4cGVjdChhZGFwdGVycykudG9IYXZlUHJvcGVydHkoJ3FlcnJvcnMnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFkYXB0ZXJzLmlzT2ZmbGluZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgYWRhcHRlcnMuYXhpb3MuZ2V0KS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBhZGFwdGVycy5xZXJyb3JzLnFlcnJvcnMpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnYWRhcHRlciBzZXQgd29ya3MgdG9nZXRoZXIgZm9yIGNvbXBsZXRlIG9mZmxpbmUgc2ltdWxhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHNldE9mZmxpbmVNb2RlKHRydWUpO1xuICAgICAgXG4gICAgICBjb25zdCB7IGF4aW9zLCBxZXJyb3JzLCBpc09mZmxpbmUgfSA9IGNyZWF0ZUVudmlyb25tZW50QWRhcHRlcnMoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IG9mZmxpbmUgc3RhdGVcbiAgICAgIGV4cGVjdChpc09mZmxpbmUpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFRlc3QgYXhpb3MgZnVuY3Rpb25hbGl0eVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvdGVzdCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHFlcnJvcnMgZnVuY3Rpb25hbGl0eVxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcWVycm9ycy5xZXJyb3JzKCk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ2FkYXB0ZXIgc2V0IHByb3ZpZGVzIG9ubGluZSBpbXBsZW1lbnRhdGlvbnMgd2hlbiBhcHByb3ByaWF0ZScsICgpID0+IHtcbiAgICAgIHNldE9mZmxpbmVNb2RlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBheGlvcywgcWVycm9ycywgaXNPZmZsaW5lIH0gPSBjcmVhdGVFbnZpcm9ubWVudEFkYXB0ZXJzKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpc09mZmxpbmUpLnRvQmUoZmFsc2UpO1xuICAgICAgLy8gTm90ZTogV2UgY2FuJ3QgZWFzaWx5IHRlc3QgcmVhbCBheGlvcy9xZXJyb3JzIGxvYWRpbmcgd2l0aG91dCBkZXBlbmRlbmNpZXNcbiAgICAgIC8vIGJ1dCB3ZSBjYW4gdmVyaWZ5IHRoZSBhZGFwdGVycyBhcmUgY3JlYXRlZCB3aXRob3V0IGVycm9yc1xuICAgICAgZXhwZWN0KGF4aW9zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHFlcnJvcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ0NhY2hpbmcgYW5kIFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ2NhY2hlcyBpbXBsZW1lbnRhdGlvbnMgZm9yIGNvbnNpc3RlbnQgYmVoYXZpb3InLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgYXhpb3MxID0gZ2V0QXhpb3MoKTtcbiAgICAgIGNvbnN0IGF4aW9zMiA9IGdldEF4aW9zKCk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZXR1cm4gdGhlIHNhbWUgY2FjaGVkIGluc3RhbmNlXG4gICAgICBleHBlY3QoYXhpb3MxKS50b0JlKGF4aW9zMik7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnY2xlYXJPZmZsaW5lQ2FjaGUgcmVzZXRzIGNhY2hlZCBpbXBsZW1lbnRhdGlvbnMnLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgYXhpb3MxID0gZ2V0QXhpb3MoKTtcbiAgICAgIGNsZWFyT2ZmbGluZUNhY2hlKCk7XG4gICAgICBjb25zdCBheGlvczIgPSBnZXRBeGlvcygpO1xuICAgICAgXG4gICAgICAvLyBDYWNoZSBzaG91bGQgYmUgZnVuY3Rpb25hbCAtIGJvdGggaW5zdGFuY2VzIHNob3VsZCB3b3JrIGNvcnJlY3RseVxuICAgICAgLy8gKE5vdGU6IHdpdGggc3RhdGljIHN0dWIgbW9kdWxlcywgb2JqZWN0IGlkZW50aXR5IG1heSBiZSBwcmVzZXJ2ZWQgYnkgTm9kZS5qcyByZXF1aXJlIGNhY2hlKVxuICAgICAgZXhwZWN0KGF4aW9zMSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChheGlvczIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIGF4aW9zMS5nZXQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGF4aW9zMi5nZXQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnY2FjaGUgaXMgY2xlYXJlZCB3aGVuIHRvZ2dsaW5nIG9mZmxpbmUgbW9kZScsICgpID0+IHtcbiAgICAgIHNldE9mZmxpbmVNb2RlKHRydWUpO1xuICAgICAgY29uc3QgYXhpb3MxID0gZ2V0QXhpb3MoKTtcbiAgICAgIFxuICAgICAgc2V0T2ZmbGluZU1vZGUoZmFsc2UpO1xuICAgICAgY29uc3QgYXhpb3MyID0gZ2V0QXhpb3MoKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIHJldHVybiBkaWZmZXJlbnQgaW5zdGFuY2VzIGFmdGVyIG1vZGUgdG9nZ2xlXG4gICAgICBleHBlY3QoYXhpb3MxKS5ub3QudG9CZShheGlvczIpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBhbmQgRmFsbGJhY2tzJywgKCkgPT4ge1xuICAgIFxuICAgIHRlc3QoJ2hhbmRsZXMgbW9kdWxlIGxvYWRpbmcgZXJyb3JzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZShmYWxzZSk7XG4gICAgICBcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCB0aHJvdyBldmVuIGlmIHJlYWwgbW9kdWxlcyBhcmUgdW5hdmFpbGFibGVcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIGdldEF4aW9zKCk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgICAgXG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBnZXRRZXJyb3JzKCk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Byb3ZpZGVzIGZhbGxiYWNrIGltcGxlbWVudGF0aW9ucyB3aGVuIHJlYWwgbW9kdWxlcyBmYWlsJywgKCkgPT4ge1xuICAgICAgc2V0T2ZmbGluZU1vZGUoZmFsc2UpO1xuICAgICAgXG4gICAgICAvLyBHZXQgaW1wbGVtZW50YXRpb25zIChzaG91bGQgZmFsbGJhY2sgdG8gc3R1YnMgaWYgcmVhbCBtb2R1bGVzIHVuYXZhaWxhYmxlKVxuICAgICAgY29uc3QgYXhpb3MgPSBnZXRBeGlvcygpO1xuICAgICAgY29uc3QgcWVycm9ycyA9IGdldFFlcnJvcnMoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGF4aW9zKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHFlcnJvcnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIHdpdGggRXhpc3RpbmcgRnVuY3Rpb25hbGl0eScsICgpID0+IHtcbiAgICBcbiAgICB0ZXN0KCdtYWludGFpbnMgY29tcGF0aWJpbGl0eSB3aXRoIGV4aXN0aW5nIHNldE9mZmxpbmVNb2RlIEFQSScsICgpID0+IHtcbiAgICAgIC8vIFRlc3Qgb3JpZ2luYWwgcHJvZ3JhbW1hdGljIEFQSSBzdGlsbCB3b3Jrc1xuICAgICAgZXhwZWN0KGlzT2ZmbGluZU1vZGUoKSkudG9CZShmYWxzZSk7XG4gICAgICBcbiAgICAgIHNldE9mZmxpbmVNb2RlKHRydWUpO1xuICAgICAgZXhwZWN0KGlzT2ZmbGluZU1vZGUoKSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgc2V0T2ZmbGluZU1vZGUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGlzT2ZmbGluZU1vZGUoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnd29ya3MgY29ycmVjdGx5IHdpdGggZXhpc3RpbmcgY2xlYXJPZmZsaW5lQ2FjaGUgZnVuY3Rpb24nLCAoKSA9PiB7XG4gICAgICBzZXRPZmZsaW5lTW9kZSh0cnVlKTtcbiAgICAgIGdldEF4aW9zKCk7IC8vIExvYWQgaW50byBjYWNoZVxuICAgICAgXG4gICAgICAvLyBPcmlnaW5hbCBjYWNoZSBjbGVhcmluZyBzaG91bGQgc3RpbGwgd29ya1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgY2xlYXJPZmZsaW5lQ2FjaGUoKTtcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQ0pBLGNBQWM7RUFDZEMsYUFBYTtFQUNiQyxRQUFRO0VBQ1JDLFVBQVU7RUFDVkMsbUJBQW1CO0VBQ25CQyx5QkFBeUI7RUFDekJDO0FBQ0YsQ0FBQyxHQUFHQyxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFFbkNDLFFBQVEsQ0FBQyx1QkFBdUIsRUFBRSxNQUFNO0VBRXRDO0VBQ0EsTUFBTUMsV0FBVyxHQUFHQyxPQUFPLENBQUNDLEdBQUc7RUFFL0JDLFVBQVUsQ0FBQyxNQUFNO0lBQ2Y7SUFDQUYsT0FBTyxDQUFDQyxHQUFHLEdBQUc7TUFBRSxHQUFHRjtJQUFZLENBQUM7SUFDaENILGlCQUFpQixDQUFDLENBQUM7RUFDckIsQ0FBQyxDQUFDO0VBRUZPLFFBQVEsQ0FBQyxNQUFNO0lBQ2I7SUFDQUgsT0FBTyxDQUFDQyxHQUFHLEdBQUdGLFdBQVc7RUFDM0IsQ0FBQyxDQUFDO0VBRUZELFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxNQUFNO0lBRS9DTSxJQUFJLENBQUMsb0NBQW9DLEVBQUUsTUFBTTtNQUMvQ0osT0FBTyxDQUFDQyxHQUFHLENBQUNJLEtBQUssR0FBRyxNQUFNOztNQUUxQjtNQUNBLE1BQU07UUFBRVg7TUFBb0IsQ0FBQyxHQUFHRyxPQUFPLENBQUMsc0JBQXNCLENBQUM7TUFDL0QsTUFBTVMsUUFBUSxHQUFHWixtQkFBbUIsQ0FBQyxDQUFDO01BQ3RDYSxNQUFNLENBQUNELFFBQVEsQ0FBQ0UsU0FBUyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDckNGLE1BQU0sQ0FBQ0QsUUFBUSxDQUFDSSxtQkFBbUIsQ0FBQyxDQUFDRCxJQUFJ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