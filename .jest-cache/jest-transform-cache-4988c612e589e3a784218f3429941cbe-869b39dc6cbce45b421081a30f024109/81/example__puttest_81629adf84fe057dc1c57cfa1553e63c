3b923dfb775c01ca60bff8914be44e23
// Auto-generated API test for PUT /api/users/:id - optimized for speed
import { httpTest } from 'qtests/utils/httpTest';

describe('PUT /api/users/:id', () => {
  // Shared app setup for performance
  let sharedApp;
  beforeAll(() => {
    sharedApp = httpTest.createMockApp();
  });

  test('should succeed', async () => {
    // Reuse shared app for speed
    const app = httpTest.createMockApp();
    app.put('/api/users/:id', (req, res) => {
      res.statusCode = 200;
      res.setHeader('content-type', 'application/json');
      res.end(JSON.stringify({ success: true }));
    });
    
    const res = await httpTest.supertest(app)
      .put('/api/users/:id')
      .expect(200)
      .end();
    
    expect(res.body.success).toBe(true);
  });

  test('should handle error responses', async () => {
    const app = httpTest.createMockApp();
    app.put('/api/users/:id', (req, res) => {
      res.statusCode = 400;
      res.setHeader('content-type', 'application/json');
      res.end(JSON.stringify({ error: 'Bad request' }));
    });
    
    const res = await httpTest.supertest(app)
      .put('/api/users/:id')
      .expect(400)
      .end();
    
    expect(res.body.error).toBe('Bad request');
  });
});
