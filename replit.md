<!--AI Can write above this line-->
<!--┌── �� PROTECTED: DO NOT EDIT (READ ONLY) BELOW THIS LINE-->
Reference Patch
For comprehensive agent development rules and guidelines, please refer to the documentation located at node_modules/commoncontext/00-AGENTS.md. This file contains detailed instructions for agent behavior, CLI tool usage, coding standards, and workflow procedures that should be followed throughout the development process.

Additional project-specific guidance can be found in:
node_modules/npmcontext/01-STACK_RULES.md - NPM & JavaScript development rules and policies
node_modules/npmcontext/02-NPM_architecture.md - Architecture patterns and Single Responsibility Principle guidelines
FILE_FLOWS.md- File & Data Workflow information. Read this before deciding the scope of file changes and where you need to work.
IMPLEMENT_META.md- Information for metadata support for npm modules so that client apps can better use this module.
node_modules/commoncontext/ReplitCodexUse.md - details Replit Codex Use Protocol (RCUP), the main development workflow for non-trivial tasks.

Here is a high level guide for RCUP:
=================
Replit Agent Development Workflow (RCUP)
RCUP = Replit Codex Use Protocol
This workflow uses 6 parallel codex workflows (Codex Task 1-6) for cost-effective, high-quality implementation.

IMPORTANT: Always communicate your workflow decisions to the user for transparency.

1. Tell user: "This is a non-trivial task requiring the full workflow"
2. Launch single codex workflow to create CURRENTPLAN.md
3. Create task list based on plan
4. Check FILE_FLOWS.md: Review file organization to determine parallelization strategy
         - Can parallelize by logical divisions (features, components)
         - Can parallelize by file index (even/odd, quarters, etc.) for tasks like bug checks, commenting, refactoring
         - Decide optimal division based on task type and file structure
5. Tell user: "I'll run [N] codex workflow(s) [division strategy] because [reason]"
6. Implementation via codex with explicit file assignments:
         - CRITICAL: Create prompt.txt, and write prompt to prompt.txt before launching each workflow
         - Launch workflows sequentially (brief delay between each):
         - Write full prompt to prompt.txt (this is rewritten over with the prompt for each workflow, it is just the staging area, the codex workflows pull the prompt from here)
         - Start workflow (e.g., "Codex Task 1")
         - Wait 100ms
         - Repeat for next workflow
         - Workflows execute in parallel once started
         - 1 codex workflow for sequential/single cohesive tasks
         - 2-6 parallel codex workflows for independent tasks (divided by feature, component, file index, or other logical grouping)
         - Each prompt MUST include: 
                        - (a) CURRENTPLAN.md section this workflow implements, 
                        - (b) Explicit list of files to modify, 
                        - (c) Files to avoid (handled by other workflows)
                        - This prevents merge conflicts by ensuring distinct code areas
7. Architect evaluation: Use architect(responsibility="evaluate_task") to verify CURRENTPLAN.md was fully implemented
         - If architect finds plan NOT implemented: RESTART workflow from step 2 (create new plan for shortcomings → parallel codex execution)
         - If architect finds plan IS implemented: proceed to testing
8. Testing loop (codex runs tests since Replit Agent cannot):
         - Launch single codex: "Run `npm test` and report all results. Do not begin fixing test failures. Do nothing else." 
         - Tests pass → Continue to step 9 (Mark tasks complete)
         - Tests fail → DEBUG_TESTS.md auto-generated by qtests module (not codex)
                 - Read DEBUG_TESTS.md to analyze failures
                 - RESTART from step 3 (Create task list based on plan) with DEBUG_TESTS.md instead of CURRENTPLAN.md as work to be addressed (parallel codex fixes test failures)
         - After codex fixes, run npm test again, repeat until test are passing
9. Mark tasks complete (only after tests all pass)

For trivial tasks (comments, single-line fixes):
Announce classification: Tell user this is a trivial task you'll implement directly
Implement directly

Transparency Requirements:
Always state whether task is "trivial" or "non-trivial" and explain why
Always state how many codex workflows you'll run (0, 1, or 2-6) and the reasoning
This gives the user visibility into your decision-making process
Rationale: Codex uses GPT-5 model (more intelligent and cheaper than Replit Agent's default). Use codex for heavy lifting, Replit Agent for orchestration.

Available Workflows: Codex Task 1, Codex Task 2, Codex Task 3, Codex Task 4, Codex Task 5, Codex Task 6
=====================

While replit.md is the source of truth for replit agent, it often becomes out of date, 
with these being the maintained rules files. Check these for up to date information and 
copy their guidance to replit.md.
<!--└── END PROTECTED RANGE ��-->
<!--AI Can write from here on below-->

Perform the aforementioned information copying verbatim, not as summary.

You have authority to implement this according to best practices. You may make a plan and follow through it's steps if that helps keep you on task, but do not ask me for guidance, clarifying questions, or check in with me. I only expect to first hear from you when you are done with this task completely.