/** Comprehensive Testing Suite Utilities - TypeScript Implementation */
import{DatabaseTestHelper}from'./testing/databaseTestHelper.js';import{MockManager}from'./testing/mockManager.js';import{AssertionHelper}from'./testing/assertionHelper.js';import{TestDataFactory}from'./testing/testDataFactory.js';import{PerformanceTestHelper}from'./testing/performanceTestHelper.js';
interface TestSuiteConfig{apiMocks?:boolean;emailMocks?:boolean;consoleMocks?:boolean;performance?:boolean;autoCleanup?:boolean;database?:boolean;environmentMocks?:Record<string,string>;httpMocks?:any[];}
interface TestSuiteInstance{mocks:MockManager;db?:DatabaseTestHelper;assertions:AssertionHelper;assert:typeof AssertionHelper;data:typeof TestDataFactory;performance?:typeof PerformanceTestHelper;config:TestSuiteConfig;}
class TestSuiteBuilder{private config:TestSuiteConfig;constructor(){this.config={apiMocks:false,emailMocks:false,consoleMocks:false,performance:false,autoCleanup:true};}withApiMocks():TestSuiteBuilder{this.config.apiMocks=true;return this;}withEmailMocks():TestSuiteBuilder{this.config.emailMocks=true;return this;}withConsoleMocks():TestSuiteBuilder{this.config.consoleMocks=true;return this;}withPerformance():TestSuiteBuilder{this.config.performance=true;return this;}withDatabase():TestSuiteBuilder{this.config.database=true;return this;}withEnvironmentMocks(envVars?:Record<string,string>):TestSuiteBuilder{this.config.environmentMocks=envVars||{};return this;}withHttpMocks(responses?:any[]):TestSuiteBuilder{this.config.httpMocks=responses||[];return this;}withoutAutoCleanup():TestSuiteBuilder{this.config.autoCleanup=false;return this;}build():TestSuiteInstance{const mockManager=new MockManager();if(this.config.apiMocks){mockManager.setupApiClientMocks();}if(this.config.emailMocks){try{mockManager.registerMock('email',{sendEmail:()=>{}});}catch(error){}}if(this.config.consoleMocks){mockManager.setupConsoleMocks();}if(this.config.environmentMocks&&Object.keys(this.config.environmentMocks).length>0){mockManager.setupEnvironmentMocks(this.config.environmentMocks);}if(this.config.httpMocks&&this.config.httpMocks.length>0){mockManager.setupHttpMocks(this.config.httpMocks);}const assertionHelper=new AssertionHelper();return{mocks:mockManager,db:this.config.database?new DatabaseTestHelper():undefined,assertions:assertionHelper,assert:AssertionHelper,data:TestDataFactory,performance:this.config.performance?PerformanceTestHelper:undefined,config:{...this.config}};}}
export{DatabaseTestHelper,MockManager,AssertionHelper,TestDataFactory,PerformanceTestHelper,TestSuiteBuilder};